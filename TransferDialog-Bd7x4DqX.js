import{bX as Fn,bW as Ba,aP as er,ci as ht,cj as Ua,ck as Ma,cl as In,a6 as ue,R as c,Z as tr,a5 as te,cm as qa,aM as Ce,bI as nr,aT as $a,cn as $t,co as Wa,ap as ye,bP as Ka,a2 as Va,$ as J,ag as rr,E as le,a0 as Ue,a1 as Me,a9 as ar,al as se,a8 as Ha,ak as sr,c8 as yt,b7 as za,aW as pt,am as Ya,ad as Bt,Y as ir,bf as or,by as cr,aw as Xe,bF as lr,aD as Ja,bo as Ft,b0 as Ga,br as Xa}from"./app-brB7pEg7.js";import{ar as Za,c as Qa,P as qe,m as es,as as ts,w as Be,o as ns,M as mt,y as rs,v as as,S as ss,G as is,at as os}from"./app-stage2-Dak6UP0U.js";import{L as cs}from"./LumenPurchaseOptions-BU21Ky10.js";import{T as ls}from"./ConnectedTransferDialog-GPimnIc9.js";import"./ScrollableBalances-B6Rm1TRW.js";var Fe={},oe={},It,Nn;function ur(){return Nn||(Nn=1,It=typeof self=="object"?self.FormData:window.FormData),It}var ft={},jn;function fr(){if(jn)return ft;jn=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.ResponseError=e;function e(s,m){var b=s.headers["content-type"]&&/json/.test(s.headers["content-type"]),C=b&&s.data&&(s.data.error||s.data.message);return Error(C?"Request to ".concat(m.domain," failed: ").concat(C):"Request to ".concat(m.domain," failed with status ").concat(s.status))}return ft}var Ie={},Ge={},Ln;function bt(){if(Ln)return Ge;Ln=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.TransferResultType=void 0;var e;return function(s){s.ok="success",s.kyc="kyc"}(e||(Ge.TransferResultType=e={})),Ge}var Bn;function Wt(){if(Bn)return Ie;Bn=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.KYCResponseType=void 0,Ie.createKYCInstructions=b,Ie.isKYCRequired=C;var e=bt(),s;(function(v){v.interactive="interactive",v.nonInteractive="non-interactive",v.status="status"})(s||(Ie.KYCResponseType=s={}));var m={customer_info_status:s.status,interactive_customer_info_needed:s.interactive,non_interactive_customer_info_needed:s.nonInteractive};function b(v,A){var E=m[v.data.type];if(!E)throw Error("".concat(A," requires KYC, but did not specify valid KYC instructions."));return{data:v.data,subtype:E,type:e.TransferResultType.kyc}}function C(v){return v.status===403||v.data.type==="interactive_customer_info_needed"}return Ie}var Un;function us(){if(Un)return oe;Un=1;var e=oe&&oe.__assign||function(){return e=Object.assign||function(h){for(var d,a=1,l=arguments.length;a<l;a++){d=arguments[a];for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])}return h},e.apply(this,arguments)},s=oe&&oe.__awaiter||function(h,d,a,l){function f(u){return u instanceof a?u:new a(function(D){D(u)})}return new(a||(a=Promise))(function(u,D){function T(j){try{O(l.next(j))}catch(F){D(F)}}function L(j){try{O(l.throw(j))}catch(F){D(F)}}function O(j){j.done?u(j.value):f(j.value).then(T,L)}O((l=l.apply(h,d||[])).next())})},m=oe&&oe.__generator||function(h,d){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},l,f,u,D=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return D.next=T(0),D.throw=T(1),D.return=T(2),typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function T(O){return function(j){return L([O,j])}}function L(O){if(l)throw new TypeError("Generator is already executing.");for(;D&&(D=0,O[0]&&(a=0)),a;)try{if(l=1,f&&(u=O[0]&2?f.return:O[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,O[1])).done)return u;switch(f=0,u&&(O=[O[0]&2,u.value]),O[0]){case 0:case 1:u=O;break;case 4:return a.label++,{value:O[1],done:!1};case 5:a.label++,f=O[1],O=[0];continue;case 7:O=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(O[0]===6||O[0]===2)){a=0;continue}if(O[0]===3&&(!u||O[1]>u[0]&&O[1]<u[3])){a.label=O[1];break}if(O[0]===6&&a.label<u[1]){a.label=u[1],u=O;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(O);break}u[2]&&a.ops.pop(),a.trys.pop();continue}O=d.call(h,a)}catch(j){O=[6,j],f=0}finally{l=u=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},b=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(oe,"__esModule",{value:!0}),oe.DepositType=void 0,oe.Deposit=R;var C=b(ur()),v=fr(),A=Wt(),E=bt(),S;(function(h){h.SEPA="SEPA",h.SWIFT="SWIFT"})(S||(oe.DepositType=S={}));function R(h,d,a,l){if(l===void 0&&(l={}),d.isNative())throw Error("Cannot deposit lumens, but only assets issued by ".concat(h.domain,"."));var f={accountID:a,asset:d,fields:e(e({lang:h.options.lang,wallet_name:h.options.walletName,wallet_url:h.options.walletURL},l),{account:a,asset_code:d.getCode()}),interactive:function(u){return x(f,u)},legacy:function(u){return g(f,u)},transferServer:h};return f}function x(h,d){return s(this,void 0,void 0,function(){var a,l,f,u,D,T,L;return m(this,function(O){switch(O.label){case 0:a=h.fields,l=h.transferServer,f=new C.default,Object.keys(a).forEach(function(j){typeof a[j]<"u"&&f.append(j,a[j])}),u={"Content-Type":"multipart/form-data"},d&&(u.Authorization="Bearer ".concat(d)),D=function(j){return j===200||j===201||j===400||j===403},O.label=1;case 1:return O.trys.push([1,3,,4]),[4,y(h,function(){return l.post("/transactions/deposit/interactive",f,{headers:u,validateStatus:D})})];case 2:return[2,O.sent()];case 3:if(T=O.sent(),L=T.response,L&&L.status===404)return[2,g(h,d)];if(L)throw(0,v.ResponseError)(L,h.transferServer);return[2,g(h,d)];case 4:return[2]}})})}function g(h,d){return s(this,void 0,void 0,function(){var a,l,f,u;return m(this,function(D){return a=h.fields,l=h.transferServer,f={},d&&(f.Authorization="Bearer ".concat(d)),u=function(T){return T===200||T===201||T===400||T===403},[2,y(h,function(){return l.get("/deposit",{headers:f,params:a,validateStatus:u})})]})})}function y(h,d){return s(this,void 0,void 0,function(){var a,l;return m(this,function(f){switch(f.label){case 0:return a=h.transferServer,[4,d()];case 1:if(l=f.sent(),(0,A.isKYCRequired)(l))return[2,(0,A.createKYCInstructions)(l,a.domain)];if(l.status===200)return[2,{data:l.data,type:E.TransferResultType.ok}];throw(0,v.ResponseError)(l,h.transferServer)}})})}return oe}var Ae={},Mn;function fs(){if(Mn)return Ae;Mn=1;var e=Ae&&Ae.__awaiter||function(b,C,v,A){function E(S){return S instanceof v?S:new v(function(R){R(S)})}return new(v||(v=Promise))(function(S,R){function x(h){try{y(A.next(h))}catch(d){R(d)}}function g(h){try{y(A.throw(h))}catch(d){R(d)}}function y(h){h.done?S(h.value):E(h.value).then(x,g)}y((A=A.apply(b,C||[])).next())})},s=Ae&&Ae.__generator||function(b,C){var v={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},A,E,S,R=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return R.next=x(0),R.throw=x(1),R.return=x(2),typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function x(y){return function(h){return g([y,h])}}function g(y){if(A)throw new TypeError("Generator is already executing.");for(;R&&(R=0,y[0]&&(v=0)),v;)try{if(A=1,E&&(S=y[0]&2?E.return:y[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,y[1])).done)return S;switch(E=0,S&&(y=[y[0]&2,S.value]),y[0]){case 0:case 1:S=y;break;case 4:return v.label++,{value:y[1],done:!1};case 5:v.label++,E=y[1],y=[0];continue;case 7:y=v.ops.pop(),v.trys.pop();continue;default:if(S=v.trys,!(S=S.length>0&&S[S.length-1])&&(y[0]===6||y[0]===2)){v=0;continue}if(y[0]===3&&(!S||y[1]>S[0]&&y[1]<S[3])){v.label=y[1];break}if(y[0]===6&&v.label<S[1]){v.label=S[1],S=y;break}if(S&&v.label<S[2]){v.label=S[2],v.ops.push(y);break}S[2]&&v.ops.pop(),v.trys.pop();continue}y=C.call(b,v)}catch(h){y=[6,h],E=0}finally{A=S=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.fetchFee=m;function m(b,C,v,A,E){return e(this,void 0,void 0,function(){var S;return s(this,function(R){switch(R.label){case 0:return[4,b.get("/fee",{params:{operation:C,type:v,asset_code:A.code,amount:String(E)}})];case 1:return S=R.sent(),[2,S.data]}})})}return Ae}var Se={},qn;function ds(){if(qn)return Se;qn=1;var e=Se&&Se.__awaiter||function(A,E,S,R){function x(g){return g instanceof S?g:new S(function(y){y(g)})}return new(S||(S=Promise))(function(g,y){function h(l){try{a(R.next(l))}catch(f){y(f)}}function d(l){try{a(R.throw(l))}catch(f){y(f)}}function a(l){l.done?g(l.value):x(l.value).then(h,d)}a((R=R.apply(A,E||[])).next())})},s=Se&&Se.__generator||function(A,E){var S={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},R,x,g,y=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return y.next=h(0),y.throw=h(1),y.return=h(2),typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function h(a){return function(l){return d([a,l])}}function d(a){if(R)throw new TypeError("Generator is already executing.");for(;y&&(y=0,a[0]&&(S=0)),S;)try{if(R=1,x&&(g=a[0]&2?x.return:a[0]?x.throw||((g=x.return)&&g.call(x),0):x.next)&&!(g=g.call(x,a[1])).done)return g;switch(x=0,g&&(a=[a[0]&2,g.value]),a[0]){case 0:case 1:g=a;break;case 4:return S.label++,{value:a[1],done:!1};case 5:S.label++,x=a[1],a=[0];continue;case 7:a=S.ops.pop(),S.trys.pop();continue;default:if(g=S.trys,!(g=g.length>0&&g[g.length-1])&&(a[0]===6||a[0]===2)){S=0;continue}if(a[0]===3&&(!g||a[1]>g[0]&&a[1]<g[3])){S.label=a[1];break}if(a[0]===6&&S.label<g[1]){S.label=g[1],g=a;break}if(g&&S.label<g[2]){S.label=g[2],S.ops.push(a);break}g[2]&&S.ops.pop(),S.trys.pop();continue}a=E.call(A,S)}catch(l){a=[6,l],x=0}finally{R=g=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},m=Se&&Se.__spreadArray||function(A,E,S){if(S||arguments.length===2)for(var R=0,x=E.length,g;R<x;R++)(g||!(R in E))&&(g||(g=Array.prototype.slice.call(E,0,R)),g[R]=E[R]);return A.concat(g||Array.prototype.slice.call(E))};Object.defineProperty(Se,"__esModule",{value:!0}),Se.fetchTransferInfos=v;var b=function(A){return Array.from(new Set(A))};function C(A){throw Error(A)}function v(A){return e(this,void 0,void 0,function(){var E,S,R;return s(this,function(x){switch(x.label){case 0:return[4,A.get("/info")];case 1:return E=x.sent(),S=b(m(m([],Object.keys(E.data.deposit),!0),Object.keys(E.data.withdraw),!0)).filter(function(g){return g!=="transactions"}),R=S.filter(function(g){return A.assets.some(function(y){return y.code===g})}).map(function(g){return{asset:A.assets.find(function(y){return y.code===g})||C("".concat(A.domain," does not issue asset ").concat(g,".")),deposit:E.data.deposit[g],endpoints:E.data,transferServer:A,withdraw:E.data.withdraw[g]}}),[2,{assets:R,depositableAssets:R.filter(function(g){return g.deposit}).map(function(g){return g.asset}),endpoints:E.data,transferServer:A,withdrawableAssets:R.filter(function(g){return g.withdraw}).map(function(g){return g.asset})}]}})})}return Se}var ge={},$n;function ms(){if($n)return ge;$n=1;var e=ge&&ge.__awaiter||function(v,A,E,S){function R(x){return x instanceof E?x:new E(function(g){g(x)})}return new(E||(E=Promise))(function(x,g){function y(a){try{d(S.next(a))}catch(l){g(l)}}function h(a){try{d(S.throw(a))}catch(l){g(l)}}function d(a){a.done?x(a.value):R(a.value).then(y,h)}d((S=S.apply(v,A||[])).next())})},s=ge&&ge.__generator||function(v,A){var E={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},S,R,x,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=y(0),g.throw=y(1),g.return=y(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(d){return function(a){return h([d,a])}}function h(d){if(S)throw new TypeError("Generator is already executing.");for(;g&&(g=0,d[0]&&(E=0)),E;)try{if(S=1,R&&(x=d[0]&2?R.return:d[0]?R.throw||((x=R.return)&&x.call(R),0):R.next)&&!(x=x.call(R,d[1])).done)return x;switch(R=0,x&&(d=[d[0]&2,x.value]),d[0]){case 0:case 1:x=d;break;case 4:return E.label++,{value:d[1],done:!1};case 5:E.label++,R=d[1],d=[0];continue;case 7:d=E.ops.pop(),E.trys.pop();continue;default:if(x=E.trys,!(x=x.length>0&&x[x.length-1])&&(d[0]===6||d[0]===2)){E=0;continue}if(d[0]===3&&(!x||d[1]>x[0]&&d[1]<x[3])){E.label=d[1];break}if(d[0]===6&&E.label<x[1]){E.label=x[1],x=d;break}if(x&&E.label<x[2]){E.label=x[2],E.ops.push(d);break}x[2]&&E.ops.pop(),E.trys.pop();continue}d=A.call(v,E)}catch(a){d=[6,a],R=0}finally{S=x=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(ge,"__esModule",{value:!0}),ge.TransferStatus=void 0,ge.fetchTransaction=b,ge.fetchTransactions=C;var m;(function(v){v.completed="completed",v.pending_external="pending_external",v.pending_anchor="pending_anchor",v.pending_stellar="pending_stellar",v.pending_trust="pending_trust",v.pending_user="pending_user",v.pending_user_transfer_start="pending_user_transfer_start",v.incomplete="incomplete",v.no_market="no_market",v.too_small="too_small",v.too_large="too_large",v.error="error"})(m||(ge.TransferStatus=m={}));function b(v,A){return e(this,arguments,void 0,function(E,S,R,x){var g,y,h,d;return R===void 0&&(R="transfer"),s(this,function(a){switch(a.label){case 0:return g={},x&&(g.Authorization="Bearer ".concat(x)),y=R==="stellar"?"stellar_transaction_id":R==="external"?"external_transaction_id":"id",[4,E.get("/transaction",{headers:g,params:(d={},d[y]=S,d)})];case 1:return h=a.sent(),[2,h.data]}})})}function C(v,A,E){return e(this,arguments,void 0,function(S,R,x,g){var y,h;return g===void 0&&(g={}),s(this,function(d){switch(d.label){case 0:return y={},x&&(y.Authorization="Bearer ".concat(x)),[4,S.get("/transactions",{headers:y,params:{asset_code:R,kind:g.kind,limit:g.limit,no_older_than:g.noOlderThan,paging_id:g.pagingId}})];case 1:return h=d.sent(),[2,h.data]}})})}return ge}var ce={},Nt,Wn;function dr(){if(Wn)return Nt;Wn=1;function e(t,n){return function(){return t.apply(n,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:m}=Object,{iterator:b,toStringTag:C}=Symbol,v=(t=>n=>{const r=s.call(n);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),A=t=>(t=t.toLowerCase(),n=>v(n)===t),E=t=>n=>typeof n===t,{isArray:S}=Array,R=E("undefined");function x(t){return t!==null&&!R(t)&&t.constructor!==null&&!R(t.constructor)&&d(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const g=A("ArrayBuffer");function y(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&g(t.buffer),n}const h=E("string"),d=E("function"),a=E("number"),l=t=>t!==null&&typeof t=="object",f=t=>t===!0||t===!1,u=t=>{if(v(t)!=="object")return!1;const n=m(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(C in t)&&!(b in t)},D=t=>{if(!l(t)||x(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},T=A("Date"),L=A("File"),O=A("Blob"),j=A("FileList"),F=t=>l(t)&&d(t.pipe),W=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||d(t.append)&&((n=v(t))==="formdata"||n==="object"&&d(t.toString)&&t.toString()==="[object FormData]"))},ne=A("URLSearchParams"),[He,Te,V,re]=["ReadableStream","Request","Response","Headers"].map(A),fe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ze(t,n,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),S(t))for(i=0,o=t.length;i<o;i++)n.call(null,t[i],i,t);else{if(x(t))return;const w=r?Object.getOwnPropertyNames(t):Object.keys(t),p=w.length;let k;for(i=0;i<p;i++)k=w[i],n.call(null,t[k],k,t)}}function Vt(t,n){if(x(t))return null;n=n.toLowerCase();const r=Object.keys(t);let i=r.length,o;for(;i-- >0;)if(o=r[i],n===o.toLowerCase())return o;return null}const Oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ba,Ht=t=>!R(t)&&t!==Oe;function wt(){const{caseless:t,skipUndefined:n}=Ht(this)&&this||{},r={},i=(o,w)=>{const p=t&&Vt(r,w)||w;u(r[p])&&u(o)?r[p]=wt(r[p],o):u(o)?r[p]=wt({},o):S(o)?r[p]=o.slice():(!n||!R(o))&&(r[p]=o)};for(let o=0,w=arguments.length;o<w;o++)arguments[o]&&ze(arguments[o],i);return r}const Ar=(t,n,r,{allOwnKeys:i}={})=>(ze(n,(o,w)=>{r&&d(o)?t[w]=e(o,r):t[w]=o},{allOwnKeys:i}),t),Cr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Or=(t,n,r,i)=>{t.prototype=Object.create(n.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),r&&Object.assign(t.prototype,r)},kr=(t,n,r,i)=>{let o,w,p;const k={};if(n=n||{},t==null)return n;do{for(o=Object.getOwnPropertyNames(t),w=o.length;w-- >0;)p=o[w],(!i||i(p,t,n))&&!k[p]&&(n[p]=t[p],k[p]=!0);t=r!==!1&&m(t)}while(t&&(!r||r(t,n))&&t!==Object.prototype);return n},Dr=(t,n,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=n.length;const i=t.indexOf(n,r);return i!==-1&&i===r},Pr=t=>{if(!t)return null;if(S(t))return t;let n=t.length;if(!a(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=t[n];return r},Fr=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&m(Uint8Array)),Ir=(t,n)=>{const i=(t&&t[b]).call(t);let o;for(;(o=i.next())&&!o.done;){const w=o.value;n.call(t,w[0],w[1])}},Nr=(t,n)=>{let r;const i=[];for(;(r=t.exec(n))!==null;)i.push(r);return i},jr=A("HTMLFormElement"),Lr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,o){return i.toUpperCase()+o}),zt=(({hasOwnProperty:t})=>(n,r)=>t.call(n,r))(Object.prototype),Br=A("RegExp"),Yt=(t,n)=>{const r=Object.getOwnPropertyDescriptors(t),i={};ze(r,(o,w)=>{let p;(p=n(o,w,t))!==!1&&(i[w]=p||o)}),Object.defineProperties(t,i)},Ur=t=>{Yt(t,(n,r)=>{if(d(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(d(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Mr=(t,n)=>{const r={},i=o=>{o.forEach(w=>{r[w]=!0})};return S(t)?i(t):i(String(t).split(n)),r},qr=()=>{},$r=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function Wr(t){return!!(t&&d(t.append)&&t[C]==="FormData"&&t[b])}const Kr=t=>{const n=new Array(10),r=(i,o)=>{if(l(i)){if(n.indexOf(i)>=0)return;if(x(i))return i;if(!("toJSON"in i)){n[o]=i;const w=S(i)?[]:{};return ze(i,(p,k)=>{const B=r(p,o+1);!R(B)&&(w[k]=B)}),n[o]=void 0,w}}return i};return r(t,0)},Vr=A("AsyncFunction"),Hr=t=>t&&(l(t)||d(t))&&d(t.then)&&d(t.catch),Jt=((t,n)=>t?setImmediate:n?((r,i)=>(Oe.addEventListener("message",({source:o,data:w})=>{o===Oe&&w===r&&i.length&&i.shift()()},!1),o=>{i.push(o),Oe.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",d(Oe.postMessage)),zr=typeof queueMicrotask<"u"?queueMicrotask.bind(Oe):typeof Fn<"u"&&Fn.nextTick||Jt;var _={isArray:S,isArrayBuffer:g,isBuffer:x,isFormData:W,isArrayBufferView:y,isString:h,isNumber:a,isBoolean:f,isObject:l,isPlainObject:u,isEmptyObject:D,isReadableStream:He,isRequest:Te,isResponse:V,isHeaders:re,isUndefined:R,isDate:T,isFile:L,isBlob:O,isRegExp:Br,isFunction:d,isStream:F,isURLSearchParams:ne,isTypedArray:Fr,isFileList:j,forEach:ze,merge:wt,extend:Ar,trim:fe,stripBOM:Cr,inherits:Or,toFlatObject:kr,kindOf:v,kindOfTest:A,endsWith:Dr,toArray:Pr,forEachEntry:Ir,matchAll:Nr,isHTMLForm:jr,hasOwnProperty:zt,hasOwnProp:zt,reduceDescriptors:Yt,freezeMethods:Ur,toObjectSet:Mr,toCamelCase:Lr,noop:qr,toFiniteNumber:$r,findKey:Vt,global:Oe,isContextDefined:Ht,isSpecCompliantForm:Wr,toJSONObject:Kr,isAsyncFn:Vr,isThenable:Hr,setImmediate:Jt,asap:zr,isIterable:t=>t!=null&&d(t[b])};function $(t,n,r,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}_.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Gt=$.prototype,Xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Xt[t]={value:t}}),Object.defineProperties($,Xt),Object.defineProperty(Gt,"isAxiosError",{value:!0}),$.from=(t,n,r,i,o,w)=>{const p=Object.create(Gt);_.toFlatObject(t,p,function(P){return P!==Error.prototype},N=>N!=="isAxiosError");const k=t&&t.message?t.message:"Error",B=n==null&&t?t.code:n;return $.call(p,k,B,r,i,o),t&&p.cause==null&&Object.defineProperty(p,"cause",{value:t,configurable:!0}),p.name=t&&t.name||"Error",w&&Object.assign(p,w),p};var Yr=null;function gt(t){return _.isPlainObject(t)||_.isArray(t)}function Zt(t){return _.endsWith(t,"[]")?t.slice(0,-2):t}function Qt(t,n,r){return t?t.concat(n).map(function(o,w){return o=Zt(o),!r&&w?"["+o+"]":o}).join(r?".":""):n}function Jr(t){return _.isArray(t)&&!t.some(gt)}const Gr=_.toFlatObject(_,{},null,function(n){return/^is[A-Z]/.test(n)});function Qe(t,n,r){if(!_.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,r=_.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,U){return!_.isUndefined(U[q])});const i=r.metaTokens,o=r.visitor||P,w=r.dots,p=r.indexes,B=(r.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(n);if(!_.isFunction(o))throw new TypeError("visitor must be a function");function N(I){if(I===null)return"";if(_.isDate(I))return I.toISOString();if(_.isBoolean(I))return I.toString();if(!B&&_.isBlob(I))throw new $("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(I)||_.isTypedArray(I)?B&&typeof Blob=="function"?new Blob([I]):er.from(I):I}function P(I,q,U){let G=I;if(I&&!U&&typeof I=="object"){if(_.endsWith(q,"{}"))q=i?q:q.slice(0,-2),I=JSON.stringify(I);else if(_.isArray(I)&&Jr(I)||(_.isFileList(I)||_.endsWith(q,"[]"))&&(G=_.toArray(I)))return q=Zt(q),G.forEach(function(X,ie){!(_.isUndefined(X)||X===null)&&n.append(p===!0?Qt([q],ie,w):p===null?q:q+"[]",N(X))}),!1}return gt(I)?!0:(n.append(Qt(U,q,w),N(I)),!1)}const M=[],K=Object.assign(Gr,{defaultVisitor:P,convertValue:N,isVisitable:gt});function ee(I,q){if(!_.isUndefined(I)){if(M.indexOf(I)!==-1)throw Error("Circular reference detected in "+q.join("."));M.push(I),_.forEach(I,function(G,de){(!(_.isUndefined(G)||G===null)&&o.call(n,G,_.isString(de)?de.trim():de,q,K))===!0&&ee(G,q?q.concat(de):[de])}),M.pop()}}if(!_.isObject(t))throw new TypeError("data must be an object");return ee(t),n}function en(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function vt(t,n){this._pairs=[],t&&Qe(t,this,n)}const tn=vt.prototype;tn.append=function(n,r){this._pairs.push([n,r])},tn.toString=function(n){const r=n?function(i){return n.call(this,i,en)}:en;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function Xr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nn(t,n,r){if(!n)return t;const i=r&&r.encode||Xr;_.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let w;if(o?w=o(n,r):w=_.isURLSearchParams(n)?n.toString():new vt(n,r).toString(i),w){const p=t.indexOf("#");p!==-1&&(t=t.slice(0,p)),t+=(t.indexOf("?")===-1?"?":"&")+w}return t}class Zr{constructor(){this.handlers=[]}use(n,r,i){return this.handlers.push({fulfilled:n,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){_.forEach(this.handlers,function(i){i!==null&&n(i)})}}var rn=Zr,an={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qr=typeof URLSearchParams<"u"?URLSearchParams:vt,ea=typeof FormData<"u"?FormData:null,ta=typeof Blob<"u"?Blob:null,na={isBrowser:!0,classes:{URLSearchParams:Qr,FormData:ea,Blob:ta},protocols:["http","https","file","blob","url","data"]};const Et=typeof window<"u"&&typeof document<"u",St=typeof navigator=="object"&&navigator||void 0,ra=Et&&(!St||["ReactNative","NativeScript","NS"].indexOf(St.product)<0),aa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sa=Et&&window.location.href||"http://localhost";var ia=Object.freeze({__proto__:null,hasBrowserEnv:Et,hasStandardBrowserWebWorkerEnv:aa,hasStandardBrowserEnv:ra,navigator:St,origin:sa}),Q={...ia,...na};function oa(t,n){return Qe(t,new Q.classes.URLSearchParams,{visitor:function(r,i,o,w){return Q.isNode&&_.isBuffer(r)?(this.append(i,r.toString("base64")),!1):w.defaultVisitor.apply(this,arguments)},...n})}function ca(t){return _.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function la(t){const n={},r=Object.keys(t);let i;const o=r.length;let w;for(i=0;i<o;i++)w=r[i],n[w]=t[w];return n}function sn(t){function n(r,i,o,w){let p=r[w++];if(p==="__proto__")return!0;const k=Number.isFinite(+p),B=w>=r.length;return p=!p&&_.isArray(o)?o.length:p,B?(_.hasOwnProp(o,p)?o[p]=[o[p],i]:o[p]=i,!k):((!o[p]||!_.isObject(o[p]))&&(o[p]=[]),n(r,i,o[p],w)&&_.isArray(o[p])&&(o[p]=la(o[p])),!k)}if(_.isFormData(t)&&_.isFunction(t.entries)){const r={};return _.forEachEntry(t,(i,o)=>{n(ca(i),o,r,0)}),r}return null}function ua(t,n,r){if(_.isString(t))try{return(n||JSON.parse)(t),_.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const _t={transitional:an,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const i=r.getContentType()||"",o=i.indexOf("application/json")>-1,w=_.isObject(n);if(w&&_.isHTMLForm(n)&&(n=new FormData(n)),_.isFormData(n))return o?JSON.stringify(sn(n)):n;if(_.isArrayBuffer(n)||_.isBuffer(n)||_.isStream(n)||_.isFile(n)||_.isBlob(n)||_.isReadableStream(n))return n;if(_.isArrayBufferView(n))return n.buffer;if(_.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let k;if(w){if(i.indexOf("application/x-www-form-urlencoded")>-1)return oa(n,this.formSerializer).toString();if((k=_.isFileList(n))||i.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return Qe(k?{"files[]":n}:n,B&&new B,this.formSerializer)}}return w||o?(r.setContentType("application/json",!1),ua(n)):n}],transformResponse:[function(n){const r=this.transitional||_t.transitional,i=r&&r.forcedJSONParsing,o=this.responseType==="json";if(_.isResponse(n)||_.isReadableStream(n))return n;if(n&&_.isString(n)&&(i&&!this.responseType||o)){const p=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(n,this.parseReviver)}catch(k){if(p)throw k.name==="SyntaxError"?$.from(k,$.ERR_BAD_RESPONSE,this,null,this.response):k}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q.classes.FormData,Blob:Q.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],t=>{_t.headers[t]={}});var Tt=_t;const fa=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var da=t=>{const n={};let r,i,o;return t&&t.split(`
`).forEach(function(p){o=p.indexOf(":"),r=p.substring(0,o).trim().toLowerCase(),i=p.substring(o+1).trim(),!(!r||n[r]&&fa[r])&&(r==="set-cookie"?n[r]?n[r].push(i):n[r]=[i]:n[r]=n[r]?n[r]+", "+i:i)}),n};const on=Symbol("internals");function Ye(t){return t&&String(t).trim().toLowerCase()}function et(t){return t===!1||t==null?t:_.isArray(t)?t.map(et):String(t)}function ma(t){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)n[i[1]]=i[2];return n}const ha=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Rt(t,n,r,i,o){if(_.isFunction(i))return i.call(this,n,r);if(o&&(n=r),!!_.isString(n)){if(_.isString(i))return n.indexOf(i)!==-1;if(_.isRegExp(i))return i.test(n)}}function ya(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,i)=>r.toUpperCase()+i)}function pa(t,n){const r=_.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(o,w,p){return this[i].call(this,n,o,w,p)},configurable:!0})})}class tt{constructor(n){n&&this.set(n)}set(n,r,i){const o=this;function w(k,B,N){const P=Ye(B);if(!P)throw new Error("header name must be a non-empty string");const M=_.findKey(o,P);(!M||o[M]===void 0||N===!0||N===void 0&&o[M]!==!1)&&(o[M||B]=et(k))}const p=(k,B)=>_.forEach(k,(N,P)=>w(N,P,B));if(_.isPlainObject(n)||n instanceof this.constructor)p(n,r);else if(_.isString(n)&&(n=n.trim())&&!ha(n))p(da(n),r);else if(_.isObject(n)&&_.isIterable(n)){let k={},B,N;for(const P of n){if(!_.isArray(P))throw TypeError("Object iterator must return a key-value pair");k[N=P[0]]=(B=k[N])?_.isArray(B)?[...B,P[1]]:[B,P[1]]:P[1]}p(k,r)}else n!=null&&w(r,n,i);return this}get(n,r){if(n=Ye(n),n){const i=_.findKey(this,n);if(i){const o=this[i];if(!r)return o;if(r===!0)return ma(o);if(_.isFunction(r))return r.call(this,o,i);if(_.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=Ye(n),n){const i=_.findKey(this,n);return!!(i&&this[i]!==void 0&&(!r||Rt(this,this[i],i,r)))}return!1}delete(n,r){const i=this;let o=!1;function w(p){if(p=Ye(p),p){const k=_.findKey(i,p);k&&(!r||Rt(i,i[k],k,r))&&(delete i[k],o=!0)}}return _.isArray(n)?n.forEach(w):w(n),o}clear(n){const r=Object.keys(this);let i=r.length,o=!1;for(;i--;){const w=r[i];(!n||Rt(this,this[w],w,n,!0))&&(delete this[w],o=!0)}return o}normalize(n){const r=this,i={};return _.forEach(this,(o,w)=>{const p=_.findKey(i,w);if(p){r[p]=et(o),delete r[w];return}const k=n?ya(w):String(w).trim();k!==w&&delete r[w],r[k]=et(o),i[k]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return _.forEach(this,(i,o)=>{i!=null&&i!==!1&&(r[o]=n&&_.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const i=new this(n);return r.forEach(o=>i.set(o)),i}static accessor(n){const i=(this[on]=this[on]={accessors:{}}).accessors,o=this.prototype;function w(p){const k=Ye(p);i[k]||(pa(o,p),i[k]=!0)}return _.isArray(n)?n.forEach(w):w(n),this}}tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),_.reduceDescriptors(tt.prototype,({value:t},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(i){this[r]=i}}}),_.freezeMethods(tt);var be=tt;function xt(t,n){const r=this||Tt,i=n||r,o=be.from(i.headers);let w=i.data;return _.forEach(t,function(k){w=k.call(r,w,o.normalize(),n?n.status:void 0)}),o.normalize(),w}function cn(t){return!!(t&&t.__CANCEL__)}function We(t,n,r){$.call(this,t??"canceled",$.ERR_CANCELED,n,r),this.name="CanceledError"}_.inherits(We,$,{__CANCEL__:!0});function ln(t,n,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):n(new $("Request failed with status code "+r.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ba(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function wa(t,n){t=t||10;const r=new Array(t),i=new Array(t);let o=0,w=0,p;return n=n!==void 0?n:1e3,function(B){const N=Date.now(),P=i[w];p||(p=N),r[o]=B,i[o]=N;let M=w,K=0;for(;M!==o;)K+=r[M++],M=M%t;if(o=(o+1)%t,o===w&&(w=(w+1)%t),N-p<n)return;const ee=P&&N-P;return ee?Math.round(K*1e3/ee):void 0}}function ga(t,n){let r=0,i=1e3/n,o,w;const p=(N,P=Date.now())=>{r=P,o=null,w&&(clearTimeout(w),w=null),t(...N)};return[(...N)=>{const P=Date.now(),M=P-r;M>=i?p(N,P):(o=N,w||(w=setTimeout(()=>{w=null,p(o)},i-M)))},()=>o&&p(o)]}const nt=(t,n,r=3)=>{let i=0;const o=wa(50,250);return ga(w=>{const p=w.loaded,k=w.lengthComputable?w.total:void 0,B=p-i,N=o(B),P=p<=k;i=p;const M={loaded:p,total:k,progress:k?p/k:void 0,bytes:B,rate:N||void 0,estimated:N&&k&&P?(k-p)/N:void 0,event:w,lengthComputable:k!=null,[n?"download":"upload"]:!0};t(M)},r)},un=(t,n)=>{const r=t!=null;return[i=>n[0]({lengthComputable:r,total:t,loaded:i}),n[1]]},fn=t=>(...n)=>_.asap(()=>t(...n));var va=Q.hasStandardBrowserEnv?((t,n)=>r=>(r=new URL(r,Q.origin),t.protocol===r.protocol&&t.host===r.host&&(n||t.port===r.port)))(new URL(Q.origin),Q.navigator&&/(msie|trident)/i.test(Q.navigator.userAgent)):()=>!0,Ea=Q.hasStandardBrowserEnv?{write(t,n,r,i,o,w){const p=[t+"="+encodeURIComponent(n)];_.isNumber(r)&&p.push("expires="+new Date(r).toGMTString()),_.isString(i)&&p.push("path="+i),_.isString(o)&&p.push("domain="+o),w===!0&&p.push("secure"),document.cookie=p.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Sa(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _a(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function dn(t,n,r){let i=!Sa(n);return t&&(i||r==!1)?_a(t,n):n}const mn=t=>t instanceof be?{...t}:t;function ke(t,n){n=n||{};const r={};function i(N,P,M,K){return _.isPlainObject(N)&&_.isPlainObject(P)?_.merge.call({caseless:K},N,P):_.isPlainObject(P)?_.merge({},P):_.isArray(P)?P.slice():P}function o(N,P,M,K){if(_.isUndefined(P)){if(!_.isUndefined(N))return i(void 0,N,M,K)}else return i(N,P,M,K)}function w(N,P){if(!_.isUndefined(P))return i(void 0,P)}function p(N,P){if(_.isUndefined(P)){if(!_.isUndefined(N))return i(void 0,N)}else return i(void 0,P)}function k(N,P,M){if(M in n)return i(N,P);if(M in t)return i(void 0,N)}const B={url:w,method:w,data:w,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:k,headers:(N,P,M)=>o(mn(N),mn(P),M,!0)};return _.forEach(Object.keys({...t,...n}),function(P){const M=B[P]||o,K=M(t[P],n[P],P);_.isUndefined(K)&&M!==k||(r[P]=K)}),r}var hn=t=>{const n=ke({},t);let{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:w,headers:p,auth:k}=n;if(n.headers=p=be.from(p),n.url=nn(dn(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),k&&p.set("Authorization","Basic "+btoa((k.username||"")+":"+(k.password?unescape(encodeURIComponent(k.password)):""))),_.isFormData(r)){if(Q.hasStandardBrowserEnv||Q.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if(_.isFunction(r.getHeaders)){const B=r.getHeaders(),N=["content-type","content-length"];Object.entries(B).forEach(([P,M])=>{N.includes(P.toLowerCase())&&p.set(P,M)})}}if(Q.hasStandardBrowserEnv&&(i&&_.isFunction(i)&&(i=i(n)),i||i!==!1&&va(n.url))){const B=o&&w&&Ea.read(w);B&&p.set(o,B)}return n},Ta=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,i){const o=hn(t);let w=o.data;const p=be.from(o.headers).normalize();let{responseType:k,onUploadProgress:B,onDownloadProgress:N}=o,P,M,K,ee,I;function q(){ee&&ee(),I&&I(),o.cancelToken&&o.cancelToken.unsubscribe(P),o.signal&&o.signal.removeEventListener("abort",P)}let U=new XMLHttpRequest;U.open(o.method.toUpperCase(),o.url,!0),U.timeout=o.timeout;function G(){if(!U)return;const X=be.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),we={data:!k||k==="text"||k==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:X,config:t,request:U};ln(function(me){r(me),q()},function(me){i(me),q()},we),U=null}"onloadend"in U?U.onloadend=G:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(G)},U.onabort=function(){U&&(i(new $("Request aborted",$.ECONNABORTED,t,U)),U=null)},U.onerror=function(ie){const we=ie&&ie.message?ie.message:"Network Error",De=new $(we,$.ERR_NETWORK,t,U);De.event=ie||null,i(De),U=null},U.ontimeout=function(){let ie=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const we=o.transitional||an;o.timeoutErrorMessage&&(ie=o.timeoutErrorMessage),i(new $(ie,we.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,t,U)),U=null},w===void 0&&p.setContentType(null),"setRequestHeader"in U&&_.forEach(p.toJSON(),function(ie,we){U.setRequestHeader(we,ie)}),_.isUndefined(o.withCredentials)||(U.withCredentials=!!o.withCredentials),k&&k!=="json"&&(U.responseType=o.responseType),N&&([K,I]=nt(N,!0),U.addEventListener("progress",K)),B&&U.upload&&([M,ee]=nt(B),U.upload.addEventListener("progress",M),U.upload.addEventListener("loadend",ee)),(o.cancelToken||o.signal)&&(P=X=>{U&&(i(!X||X.type?new We(null,t,U):X),U.abort(),U=null)},o.cancelToken&&o.cancelToken.subscribe(P),o.signal&&(o.signal.aborted?P():o.signal.addEventListener("abort",P)));const de=ba(o.url);if(de&&Q.protocols.indexOf(de)===-1){i(new $("Unsupported protocol "+de+":",$.ERR_BAD_REQUEST,t));return}U.send(w||null)})},Ra=(t,n)=>{const{length:r}=t=t?t.filter(Boolean):[];if(n||r){let i=new AbortController,o;const w=function(N){if(!o){o=!0,k();const P=N instanceof Error?N:this.reason;i.abort(P instanceof $?P:new We(P instanceof Error?P.message:P))}};let p=n&&setTimeout(()=>{p=null,w(new $(`timeout ${n} of ms exceeded`,$.ETIMEDOUT))},n);const k=()=>{t&&(p&&clearTimeout(p),p=null,t.forEach(N=>{N.unsubscribe?N.unsubscribe(w):N.removeEventListener("abort",w)}),t=null)};t.forEach(N=>N.addEventListener("abort",w));const{signal:B}=i;return B.unsubscribe=()=>_.asap(k),B}};const xa=function*(t,n){let r=t.byteLength;if(r<n){yield t;return}let i=0,o;for(;i<r;)o=i+n,yield t.slice(i,o),i=o},Aa=async function*(t,n){for await(const r of Ca(t))yield*xa(r,n)},Ca=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:r,value:i}=await n.read();if(r)break;yield i}}finally{await n.cancel()}},yn=(t,n,r,i)=>{const o=Aa(t,n);let w=0,p,k=B=>{p||(p=!0,i&&i(B))};return new ReadableStream({async pull(B){try{const{done:N,value:P}=await o.next();if(N){k(),B.close();return}let M=P.byteLength;if(r){let K=w+=M;r(K)}B.enqueue(new Uint8Array(P))}catch(N){throw k(N),N}},cancel(B){return k(B),o.return()}},{highWaterMark:2})},pn=64*1024,{isFunction:rt}=_,bn=(({fetch:t,Request:n,Response:r})=>({fetch:t,Request:n,Response:r}))(_.global),{ReadableStream:wn,TextEncoder:gn}=_.global,vn=(t,...n)=>{try{return!!t(...n)}catch{return!1}},Oa=t=>{const{fetch:n,Request:r,Response:i}=Object.assign({},bn,t),o=rt(n),w=rt(r),p=rt(i);if(!o)return!1;const k=o&&rt(wn),B=o&&(typeof gn=="function"?(I=>q=>I.encode(q))(new gn):async I=>new Uint8Array(await new r(I).arrayBuffer())),N=w&&k&&vn(()=>{let I=!1;const q=new r(Q.origin,{body:new wn,method:"POST",get duplex(){return I=!0,"half"}}).headers.has("Content-Type");return I&&!q}),P=p&&k&&vn(()=>_.isReadableStream(new i("").body)),M={stream:P&&(I=>I.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(I=>{!M[I]&&(M[I]=(q,U)=>{let G=q&&q[I];if(G)return G.call(q);throw new $(`Response type '${I}' is not supported`,$.ERR_NOT_SUPPORT,U)})});const K=async I=>{if(I==null)return 0;if(_.isBlob(I))return I.size;if(_.isSpecCompliantForm(I))return(await new r(Q.origin,{method:"POST",body:I}).arrayBuffer()).byteLength;if(_.isArrayBufferView(I)||_.isArrayBuffer(I))return I.byteLength;if(_.isURLSearchParams(I)&&(I=I+""),_.isString(I))return(await B(I)).byteLength},ee=async(I,q)=>{const U=_.toFiniteNumber(I.getContentLength());return U??K(q)};return async I=>{let{url:q,method:U,data:G,signal:de,cancelToken:X,timeout:ie,onDownloadProgress:we,onUploadProgress:De,responseType:me,headers:Dt,withCredentials:ct="same-origin",fetchOptions:Cn}=hn(I);me=me?(me+"").toLowerCase():"text";let lt=Ra([de,X&&X.toAbortSignal()],ie),Je=null;const Pe=lt&&lt.unsubscribe&&(()=>{lt.unsubscribe()});let On;try{if(De&&N&&U!=="get"&&U!=="head"&&(On=await ee(Dt,G))!==0){let xe=new r(q,{method:"POST",body:G,duplex:"half"}),Ke;if(_.isFormData(G)&&(Ke=xe.headers.get("content-type"))&&Dt.setContentType(Ke),xe.body){const[Pt,ut]=un(On,nt(fn(De)));G=yn(xe.body,pn,Pt,ut)}}_.isString(ct)||(ct=ct?"include":"omit");const Ee=w&&"credentials"in r.prototype,kn={...Cn,signal:lt,method:U.toUpperCase(),headers:Dt.normalize().toJSON(),body:G,duplex:"half",credentials:Ee?ct:void 0};Je=w&&new r(q,kn);let Re=await(w?n(Je,Cn):n(q,kn));const Dn=P&&(me==="stream"||me==="response");if(P&&(we||Dn&&Pe)){const xe={};["status","statusText","headers"].forEach(Pn=>{xe[Pn]=Re[Pn]});const Ke=_.toFiniteNumber(Re.headers.get("content-length")),[Pt,ut]=we&&un(Ke,nt(fn(we),!0))||[];Re=new i(yn(Re.body,pn,Pt,()=>{ut&&ut(),Pe&&Pe()}),xe)}me=me||"text";let La=await M[_.findKey(M,me)||"text"](Re,I);return!Dn&&Pe&&Pe(),await new Promise((xe,Ke)=>{ln(xe,Ke,{data:La,headers:be.from(Re.headers),status:Re.status,statusText:Re.statusText,config:I,request:Je})})}catch(Ee){throw Pe&&Pe(),Ee&&Ee.name==="TypeError"&&/Load failed|fetch/i.test(Ee.message)?Object.assign(new $("Network Error",$.ERR_NETWORK,I,Je),{cause:Ee.cause||Ee}):$.from(Ee,Ee&&Ee.code,I,Je)}}},ka=new Map,En=t=>{let n=_.merge.call({skipUndefined:!0},bn,t?t.env:null);const{fetch:r,Request:i,Response:o}=n,w=[i,o,r];let p=w.length,k=p,B,N,P=ka;for(;k--;)B=w[k],N=P.get(B),N===void 0&&P.set(B,N=k?new Map:Oa(n)),P=N;return N};En();const At={http:Yr,xhr:Ta,fetch:{get:En}};_.forEach(At,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Sn=t=>`- ${t}`,Da=t=>_.isFunction(t)||t===null||t===!1;var _n={getAdapter:(t,n)=>{t=_.isArray(t)?t:[t];const{length:r}=t;let i,o;const w={};for(let p=0;p<r;p++){i=t[p];let k;if(o=i,!Da(i)&&(o=At[(k=String(i)).toLowerCase()],o===void 0))throw new $(`Unknown adapter '${k}'`);if(o&&(_.isFunction(o)||(o=o.get(n))))break;w[k||"#"+p]=o}if(!o){const p=Object.entries(w).map(([B,N])=>`adapter ${B} `+(N===!1?"is not supported by the environment":"is not available in the build"));let k=r?p.length>1?`since :
`+p.map(Sn).join(`
`):" "+Sn(p[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+k,"ERR_NOT_SUPPORT")}return o},adapters:At};function Ct(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new We(null,t)}function Tn(t){return Ct(t),t.headers=be.from(t.headers),t.data=xt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_n.getAdapter(t.adapter||Tt.adapter,t)(t).then(function(i){return Ct(t),i.data=xt.call(t,t.transformResponse,i),i.headers=be.from(i.headers),i},function(i){return cn(i)||(Ct(t),i&&i.response&&(i.response.data=xt.call(t,t.transformResponse,i.response),i.response.headers=be.from(i.response.headers))),Promise.reject(i)})}const Rn="1.12.0",at={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{at[t]=function(i){return typeof i===t||"a"+(n<1?"n ":" ")+t}});const xn={};at.transitional=function(n,r,i){function o(w,p){return"[Axios v"+Rn+"] Transitional option '"+w+"'"+p+(i?". "+i:"")}return(w,p,k)=>{if(n===!1)throw new $(o(p," has been removed"+(r?" in "+r:"")),$.ERR_DEPRECATED);return r&&!xn[p]&&(xn[p]=!0,console.warn(o(p," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(w,p,k):!0}},at.spelling=function(n){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function Pa(t,n,r){if(typeof t!="object")throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const w=i[o],p=n[w];if(p){const k=t[w],B=k===void 0||p(k,w,t);if(B!==!0)throw new $("option "+w+" must be "+B,$.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new $("Unknown option "+w,$.ERR_BAD_OPTION)}}var st={assertOptions:Pa,validators:at};const ve=st.validators;class it{constructor(n){this.defaults=n||{},this.interceptors={request:new rn,response:new rn}}async request(n,r){try{return await this._request(n,r)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const w=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?w&&!String(i.stack).endsWith(w.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+w):i.stack=w}catch{}}throw i}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=ke(this.defaults,r);const{transitional:i,paramsSerializer:o,headers:w}=r;i!==void 0&&st.assertOptions(i,{silentJSONParsing:ve.transitional(ve.boolean),forcedJSONParsing:ve.transitional(ve.boolean),clarifyTimeoutError:ve.transitional(ve.boolean)},!1),o!=null&&(_.isFunction(o)?r.paramsSerializer={serialize:o}:st.assertOptions(o,{encode:ve.function,serialize:ve.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),st.assertOptions(r,{baseUrl:ve.spelling("baseURL"),withXsrfToken:ve.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let p=w&&_.merge(w.common,w[r.method]);w&&_.forEach(["delete","get","head","post","put","patch","common"],I=>{delete w[I]}),r.headers=be.concat(p,w);const k=[];let B=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(r)===!1||(B=B&&q.synchronous,k.unshift(q.fulfilled,q.rejected))});const N=[];this.interceptors.response.forEach(function(q){N.push(q.fulfilled,q.rejected)});let P,M=0,K;if(!B){const I=[Tn.bind(this),void 0];for(I.unshift(...k),I.push(...N),K=I.length,P=Promise.resolve(r);M<K;)P=P.then(I[M++],I[M++]);return P}K=k.length;let ee=r;for(M=0;M<K;){const I=k[M++],q=k[M++];try{ee=I(ee)}catch(U){q.call(this,U);break}}try{P=Tn.call(this,ee)}catch(I){return Promise.reject(I)}for(M=0,K=N.length;M<K;)P=P.then(N[M++],N[M++]);return P}getUri(n){n=ke(this.defaults,n);const r=dn(n.baseURL,n.url,n.allowAbsoluteUrls);return nn(r,n.params,n.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(n){it.prototype[n]=function(r,i){return this.request(ke(i||{},{method:n,url:r,data:(i||{}).data}))}}),_.forEach(["post","put","patch"],function(n){function r(i){return function(w,p,k){return this.request(ke(k||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:w,data:p}))}}it.prototype[n]=r(),it.prototype[n+"Form"]=r(!0)});var ot=it;class Ot{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(w){r=w});const i=this;this.promise.then(o=>{if(!i._listeners)return;let w=i._listeners.length;for(;w-- >0;)i._listeners[w](o);i._listeners=null}),this.promise.then=o=>{let w;const p=new Promise(k=>{i.subscribe(k),w=k}).then(o);return p.cancel=function(){i.unsubscribe(w)},p},n(function(w,p,k){i.reason||(i.reason=new We(w,p,k),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=i=>{n.abort(i)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new Ot(function(o){n=o}),cancel:n}}}var Fa=Ot;function Ia(t){return function(r){return t.apply(null,r)}}function Na(t){return _.isObject(t)&&t.isAxiosError===!0}const kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach(([t,n])=>{kt[n]=t});var ja=kt;function An(t){const n=new ot(t),r=e(ot.prototype.request,n);return _.extend(r,ot.prototype,n,{allOwnKeys:!0}),_.extend(r,n,null,{allOwnKeys:!0}),r.create=function(o){return An(ke(t,o))},r}const Y=An(Tt);return Y.Axios=ot,Y.CanceledError=We,Y.CancelToken=Fa,Y.isCancel=cn,Y.VERSION=Rn,Y.toFormData=Qe,Y.AxiosError=$,Y.Cancel=Y.CanceledError,Y.all=function(n){return Promise.all(n)},Y.spread=Ia,Y.isAxiosError=Na,Y.mergeConfig=ke,Y.AxiosHeaders=be,Y.formToJSON=t=>sn(_.isHTMLForm(t)?new FormData(t):t),Y.getAdapter=_n.getAdapter,Y.HttpStatusCode=ja,Y.default=Y,Nt=Y,Nt}var dt={},Kn;function hs(){if(Kn)return dt;Kn=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.joinURL=e;function e(){for(var s=[],m=0;m<arguments.length;m++)s[m]=arguments[m];return s.reduce(function(b,C){return b.length===0?C:b.endsWith("/")&&C.startsWith("/")?b+C.substr(1):b.endsWith("/")||C.startsWith("/")?b+C:"".concat(b,"/").concat(C)},"")}return dt}var Vn;function ys(){if(Vn)return ce;Vn=1;var e=ce&&ce.__awaiter||function(h,d,a,l){function f(u){return u instanceof a?u:new a(function(D){D(u)})}return new(a||(a=Promise))(function(u,D){function T(j){try{O(l.next(j))}catch(F){D(F)}}function L(j){try{O(l.throw(j))}catch(F){D(F)}}function O(j){j.done?u(j.value):f(j.value).then(T,L)}O((l=l.apply(h,d||[])).next())})},s=ce&&ce.__generator||function(h,d){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},l,f,u,D=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return D.next=T(0),D.throw=T(1),D.return=T(2),typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function T(O){return function(j){return L([O,j])}}function L(O){if(l)throw new TypeError("Generator is already executing.");for(;D&&(D=0,O[0]&&(a=0)),a;)try{if(l=1,f&&(u=O[0]&2?f.return:O[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,O[1])).done)return u;switch(f=0,u&&(O=[O[0]&2,u.value]),O[0]){case 0:case 1:u=O;break;case 4:return a.label++,{value:O[1],done:!1};case 5:a.label++,f=O[1],O=[0];continue;case 7:O=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(O[0]===6||O[0]===2)){a=0;continue}if(O[0]===3&&(!u||O[1]>u[0]&&O[1]<u[3])){a.label=O[1];break}if(O[0]===6&&a.label<u[1]){a.label=u[1],u=O;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(O);break}u[2]&&a.ops.pop(),a.trys.pop();continue}O=d.call(h,a)}catch(j){O=[6,j],f=0}finally{l=u=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},m=ce&&ce.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ce,"__esModule",{value:!0}),ce.TransferServer=S,ce.openTransferServer=R,ce.locateTransferServer=x,ce.resolveAssets=g,ce.resolveTransferServerURL=y;var b=ht(),C=m(dr()),v=hs();function A(h){throw Error(h)}function E(h){return h.TRANSFER_SERVER_SEP0024||h.TRANSFER_SERVER||null}function S(h,d,a,l,f){return f===void 0&&(f={}),{get assets(){return a},get domain(){return h},get network(){return l},get url(){return d},get options(){return f},get:function(u,D){return e(this,void 0,void 0,function(){return s(this,function(T){return[2,C.default.get((0,v.joinURL)(d,u),D)]})})},post:function(u,D,T){return e(this,void 0,void 0,function(){return s(this,function(L){return[2,C.default.post((0,v.joinURL)(d,u),D,T)]})})}}}function R(h,d,a){return e(this,void 0,void 0,function(){var l,f,u;return s(this,function(D){switch(D.label){case 0:return[4,b.StellarToml.Resolver.resolve(h)];case 1:return l=D.sent(),f=E(l)||A("There seems to be no transfer server on ".concat(h,".")),u=g(l,h),[2,S(h,f,u,d,a)]}})})}function x(h,d){return e(this,void 0,void 0,function(){var a;return s(this,function(l){switch(l.label){case 0:return[4,b.StellarToml.Resolver.resolve(h,d)];case 1:return a=l.sent(),[2,E(a)]}})})}function g(h,d){if(d===void 0&&(d="?"),!h.CURRENCIES)throw Error("No CURRENCIES found in stellar.toml of domain ".concat(d,"."));return h.CURRENCIES.filter(function(a){return a.code}).map(function(a){return new b.Asset(a.code,a.issuer)})}function y(h,d){return e(this,void 0,void 0,function(){var a,l,f;return s(this,function(u){switch(u.label){case 0:if(d.isNative())throw Error("Native XLM asset does not have an issuer account.");return a=new b.Horizon.Server(h),[4,a.loadAccount(d.getIssuer())];case 1:return l=u.sent(),f=l.home_domain,f?[2,x(f)]:[2,null]}})})}return ce}var ae={},Hn;function ps(){if(Hn)return ae;Hn=1;var e=ae&&ae.__assign||function(){return e=Object.assign||function(a){for(var l,f=1,u=arguments.length;f<u;f++){l=arguments[f];for(var D in l)Object.prototype.hasOwnProperty.call(l,D)&&(a[D]=l[D])}return a},e.apply(this,arguments)},s=ae&&ae.__awaiter||function(a,l,f,u){function D(T){return T instanceof f?T:new f(function(L){L(T)})}return new(f||(f=Promise))(function(T,L){function O(W){try{F(u.next(W))}catch(ne){L(ne)}}function j(W){try{F(u.throw(W))}catch(ne){L(ne)}}function F(W){W.done?T(W.value):D(W.value).then(O,j)}F((u=u.apply(a,l||[])).next())})},m=ae&&ae.__generator||function(a,l){var f={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},u,D,T,L=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return L.next=O(0),L.throw=O(1),L.return=O(2),typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function O(F){return function(W){return j([F,W])}}function j(F){if(u)throw new TypeError("Generator is already executing.");for(;L&&(L=0,F[0]&&(f=0)),f;)try{if(u=1,D&&(T=F[0]&2?D.return:F[0]?D.throw||((T=D.return)&&T.call(D),0):D.next)&&!(T=T.call(D,F[1])).done)return T;switch(D=0,T&&(F=[F[0]&2,T.value]),F[0]){case 0:case 1:T=F;break;case 4:return f.label++,{value:F[1],done:!1};case 5:f.label++,D=F[1],F=[0];continue;case 7:F=f.ops.pop(),f.trys.pop();continue;default:if(T=f.trys,!(T=T.length>0&&T[T.length-1])&&(F[0]===6||F[0]===2)){f=0;continue}if(F[0]===3&&(!T||F[1]>T[0]&&F[1]<T[3])){f.label=F[1];break}if(F[0]===6&&f.label<T[1]){f.label=T[1],T=F;break}if(T&&f.label<T[2]){f.label=T[2],f.ops.push(F);break}T[2]&&f.ops.pop(),f.trys.pop();continue}F=l.call(a,f)}catch(W){F=[6,W],D=0}finally{u=T=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},b=ae&&ae.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ae,"__esModule",{value:!0}),ae.WithdrawalType=void 0,ae.Withdrawal=x,ae.createWithdrawalPayment=d;var C=ht(),v=b(ur()),A=fr(),E=Wt(),S=bt(),R;(function(a){a.bankAccount="bank_account",a.cash="cash",a.crypto="crypto",a.mobile="mobile",a.billPayment="bill_payment"})(R||(ae.WithdrawalType=R={}));function x(a,l,f){if(f===void 0&&(f={}),l.isNative())throw Error("Cannot withdraw lumens, but only assets issued by ".concat(a.domain,"."));var u={asset:l,fields:e(e({lang:a.options.lang,wallet_name:a.options.walletName,wallet_url:a.options.walletURL},f),{asset_code:l.getCode()}),interactive:function(D){return g(u,D)},legacy:function(D){return y(u,D)},transferServer:a};return u}function g(a,l){return s(this,void 0,void 0,function(){var f,u,D,T,L,O,j;return m(this,function(F){switch(F.label){case 0:f=a.fields,u=a.transferServer,D=new v.default,Object.keys(f).forEach(function(W){typeof f[W]<"u"&&D.append(W,f[W])}),T={"Content-Type":"multipart/form-data"},l&&(T.Authorization="Bearer ".concat(l)),L=function(W){return W===200||W===201||W===400||W===403},F.label=1;case 1:return F.trys.push([1,3,,4]),[4,h(a,function(){return u.post("/transactions/withdraw/interactive",D,{headers:T,validateStatus:L})})];case 2:return[2,F.sent()];case 3:if(O=F.sent(),j=O.response,j&&j.status===404)return[2,y(a,l)];if(j)throw(0,A.ResponseError)(j,a.transferServer);return[2,y(a,l)];case 4:return[2]}})})}function y(a,l){return s(this,void 0,void 0,function(){var f,u,D,T;return m(this,function(L){return f=a.fields,u=a.transferServer,D={},l&&(D.Authorization="Bearer ".concat(l)),T=function(O){return O===200||O===201||O===400||O===403},[2,h(a,function(){return u.get("/withdraw",{headers:D,params:f,validateStatus:T})})]})})}function h(a,l){return s(this,void 0,void 0,function(){var f,u;return m(this,function(D){switch(D.label){case 0:return f=a.transferServer,[4,l()];case 1:if(u=D.sent(),(0,E.isKYCRequired)(u))return[2,(0,E.createKYCInstructions)(u,f.domain)];if(u.status===200)return[2,{data:u.data,type:S.TransferResultType.ok}];throw(0,A.ResponseError)(u,a.transferServer)}})})}function d(a,l,f,u,D){if(D===void 0&&(D={}),l.addOperation(C.Operation.payment({amount:u,asset:f,destination:a.data.account_id,source:D.sourceAccountID})),a.data.memo_type==="hash"&&a.data.memo)l.addMemo(C.Memo.hash(a.data.memo));else if(a.data.memo_type==="id"&&a.data.memo)l.addMemo(C.Memo.id(a.data.memo));else if(a.data.memo_type==="text"&&a.data.memo)l.addMemo(C.Memo.text(a.data.memo));else if(a.data.memo)throw Error("Anchor requires a memo on the withdrawal transaction, but did not specify a valid memo type.");return l.build()}return ae}var zn;function bs(){return zn||(zn=1,function(e){var s=Fe&&Fe.__createBinding||(Object.create?function(b,C,v,A){A===void 0&&(A=v);var E=Object.getOwnPropertyDescriptor(C,v);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[v]}}),Object.defineProperty(b,A,E)}:function(b,C,v,A){A===void 0&&(A=v),b[A]=C[v]}),m=Fe&&Fe.__exportStar||function(b,C){for(var v in b)v!=="default"&&!Object.prototype.hasOwnProperty.call(C,v)&&s(C,b,v)};Object.defineProperty(e,"__esModule",{value:!0}),m(us(),e),m(fs(),e),m(ds(),e),m(Wt(),e),m(bt(),e),m(ms(),e),m(ys(),e),m(ps(),e)}(Fe)),Fe}var H=bs();const ws=e=>Array.from(new Set(e));function gs(e,s,m){return Promise.race([e,new Promise((b,C)=>{setTimeout(()=>C(Error(m)),s)})])}async function vs(e,s){const m=s?ue.Networks.TESTNET:ue.Networks.PUBLIC;try{return await gs(H.openTransferServer(e,m,{walletName:"Sunce",walletURL:"https://sunce.montelibero.org"}),8e3,`Transfer server discovery at ${e} timed out.`)}catch(b){console.error(`Treating ${e} as no transfer server available:`,b);return}}function Es(e,s,m={}){const b=e.map(E=>E.issuer).filter(E=>!!E),v=Ua(b,s).map((E,S)=>m[e[S].code]||E),A=ws(v).filter(E=>!!E);return Ma(A,E=>(In.get(E)||In.suspend(E,async()=>{try{const S=await vs(E,s);if(!S)return[];const R=await H.fetchTransferInfos(S);return R?[R]:[]}catch(S){return console.error(`Failed to fetch transfer infos for transfer server ${E}:`,S),[]}}))[0],{ignoreSingleErrors:!0})}const Ss=tr({root:{display:"block",position:"relative",height:"100%",overflow:"auto",width:"100%"},slide:{display:"block",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,overflow:"auto",transition:"opacity .3s",willChange:"opacity","&$active":{opacity:1}},active:{}});function _s(e){const s=Ss();return c.createElement("div",{className:`${s.root} ${e.className||""}`,style:e.style},e.children.map((m,b)=>c.createElement("div",{className:[s.slide,b===e.current?s.active:""].join(" "),key:b},m)))}function Ts(e){const s=[];for(let m=0;m<e.size;m++){let b;m===e.index?b=e.current:m===e.index-1?b=e.prev||null:m===e.index+1?b=e.next||null:b=null,s.push(c.createElement(c.Fragment,{key:m},b))}return c.createElement(_s,{className:e.className,current:e.index,style:e.style},s)}const Rs=c.memo(Ts),Z={navigateBack:()=>({type:"navigate-back"}),selectType:(e,s,m)=>({type:"select-type",asset:e,method:s,transferServer:m}),selectXLMDeposit:()=>({type:"select-xlm-deposit"}),captureWithdrawalInput:e=>({type:"capture-fields",formValues:e}),conductAuth:(e,s,m,b)=>({type:"conduct-auth",authChallenge:b,deposit:e,webauth:m,withdrawal:s}),setAuthToken:e=>({type:"set-auth-token",authToken:e}),setDidRedirectToKYC:()=>({type:"did-redirect-to-kyc"}),setTransferTransaction:e=>({type:"set-transfer-transaction",transaction:e}),conductKYC:(e,s,m,b)=>({type:"conduct-kyc",authToken:b,deposit:e,response:m,withdrawal:s}),promptForTxDetails:(e,s,m,b)=>({type:"prompt-for-tx-details",deposit:e,response:m,transfer:b,withdrawal:s}),completed:e=>({type:"completed",amount:e}),kycDenied:e=>({type:"kyc-denied",response:e})},xs={step:"initial",formValues:{}};function As(e,s){switch(s.type){case"navigate-back":return e.step==="enter-values"?{...e,step:"initial"}:e.step==="xlm-deposit"?{step:"initial",formValues:{}}:"deposit"in e&&e.deposit?{step:"enter-values",asset:e.deposit.asset,method:e.deposit.fields.type,formValues:e.deposit.fields,transferServer:e.deposit.transferServer}:"withdrawal"in e&&e.withdrawal?{step:"enter-values",asset:e.withdrawal.asset,method:e.withdrawal.fields.type,formValues:e.withdrawal.fields,transferServer:e.withdrawal.transferServer}:e;case"select-type":return{...e,step:"enter-values",asset:s.asset,method:s.method,transferServer:s.transferServer};case"select-xlm-deposit":return{step:"xlm-deposit"};case"capture-fields":return{step:"enter-values",asset:e.asset,formValues:s.formValues||e.formValues,method:e.method,transferServer:e.transferServer};case"conduct-auth":return{step:"auth-pending",authChallenge:s.authChallenge,deposit:s.deposit,webauth:s.webauth,withdrawal:s.withdrawal};case"set-auth-token":return{...e,authToken:s.authToken};case"conduct-kyc":return{step:"kyc-pending",authToken:s.authToken,deposit:s.deposit,response:s.response,withdrawal:s.withdrawal};case"did-redirect-to-kyc":return{...e,didRedirect:!0};case"set-transfer-transaction":return{...e,transfer:s.transaction};case"prompt-for-tx-details":return{step:"enter-tx-details",deposit:s.deposit,response:s.response,transfer:s.transfer,withdrawal:s.withdrawal};case"completed":return{step:"completed",amount:s.amount,deposit:e.deposit,response:e.response,withdrawal:e.withdrawal};case"kyc-denied":return{step:"kyc-denied",deposit:e.deposit,response:s.response,withdrawal:e.withdrawal};default:throw te("UnexpectedActionError",`Unexpected action: ${s.type}`,{action:s.type})}}var Ne={},he={},je={},Yn;function mr(){if(Yn)return je;Yn=1;var e=je&&je.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(je,"__esModule",{value:!0}),je.debug=void 0;var s=e(qa());return je.debug=(0,s.default)("sep-10"),je}var Jn;function Cs(){if(Jn)return he;Jn=1;var e=he&&he.__awaiter||function(g,y,h,d){function a(l){return l instanceof h?l:new h(function(f){f(l)})}return new(h||(h=Promise))(function(l,f){function u(L){try{T(d.next(L))}catch(O){f(O)}}function D(L){try{T(d.throw(L))}catch(O){f(O)}}function T(L){L.done?l(L.value):a(L.value).then(u,D)}T((d=d.apply(g,y||[])).next())})},s=he&&he.__generator||function(g,y){var h={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},d,a,l,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=u(0),f.throw=u(1),f.return=u(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(T){return function(L){return D([T,L])}}function D(T){if(d)throw new TypeError("Generator is already executing.");for(;f&&(f=0,T[0]&&(h=0)),h;)try{if(d=1,a&&(l=T[0]&2?a.return:T[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,T[1])).done)return l;switch(a=0,l&&(T=[T[0]&2,l.value]),T[0]){case 0:case 1:l=T;break;case 4:return h.label++,{value:T[1],done:!1};case 5:h.label++,a=T[1],T=[0];continue;case 7:T=h.ops.pop(),h.trys.pop();continue;default:if(l=h.trys,!(l=l.length>0&&l[l.length-1])&&(T[0]===6||T[0]===2)){h=0;continue}if(T[0]===3&&(!l||T[1]>l[0]&&T[1]<l[3])){h.label=T[1];break}if(T[0]===6&&h.label<l[1]){h.label=l[1],l=T;break}if(l&&h.label<l[2]){h.label=l[2],h.ops.push(T);break}l[2]&&h.ops.pop(),h.trys.pop();continue}T=y.call(g,h)}catch(L){T=[6,L],a=0}finally{d=l=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},m=he&&he.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(he,"__esModule",{value:!0}),he.fetchChallenge=S,he.postResponse=R,he.authenticate=x;var b=ht(),C=m(dr()),v=mr();function A(g,y,h){(0,v.debug)("Checking challenge transaction...",{localPublicKey:h,serviceSigningKey:y});var d=y?b.Keypair.fromPublicKey(y):null;if(y&&g.source!==y)throw Error("Challenge source account does not match the remote signing account: ".concat(g.source));if(String(g.sequence)!=="0")throw Error("Challenge sequence number must be zero.");var a=1e4;if(!g.timeBounds)throw Error("Challenge transaction has no time bounds set.");if(Number.parseInt(g.timeBounds.minTime,10)*1e3>Date.now()+a)throw Error("Challenge transaction lower time bound is in the future.");if(Number.parseInt(g.timeBounds.maxTime,10)*1e3<Date.now()-a)throw Error("Challenge transaction upper time bound is in the past.");if(g.operations.length===0)throw Error("Challenge transaction carries no operations.");var l=E(g);if(l.length!==64)throw Error("Challenge nonce must be 64 bytes long.");if(d&&!g.signatures.some(function(f){return f.hint().equals(d.signatureHint())}))throw Error("Challenge not signed by service's signing key.")}function E(g){var y=g.operations.filter(function(h){return h.type==="manageData"})[0];if(!y||!y.value)throw Error("Challange does not contain a manage_data operation");return y.value}function S(g,y,h,d){return e(this,void 0,void 0,function(){var a,l,f;return s(this,function(u){switch(u.label){case 0:(0,v.debug)("Fetching web auth challenge from ".concat(g,"...")),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,C.default)(g,{params:{account:h}})];case 2:return a=u.sent(),[3,4];case 3:throw l=u.sent(),(0,v.debug)("Fetching web auth challenge from ".concat(g," failed:"),l),Error("Cannot fetch web auth challenge: ".concat(l.message));case 4:return(0,v.debug)("Fetched web auth challenge:",a.data),f=new b.Transaction(a.data.transaction,d),A(f,y,h),[2,f]}})})}function R(g,y){return e(this,void 0,void 0,function(){var h,d,a,l,f;return s(this,function(u){switch(u.label){case 0:h={transaction:y.toEnvelope().toXDR().toString("base64")},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,C.default)(g,{method:"POST",headers:{"Content-Type":"application/json"},data:h})];case 2:return d=u.sent(),[3,4];case 3:throw a=u.sent(),(0,v.debug)("Authentication at ".concat(g," failed:"),a),Object.assign(Error("Web authentication failed: ".concat(a.message)),{response:a.response});case 4:if(!d.data||typeof d.data.token!="string")throw l=!((f=d.data)===null||f===void 0)&&f.error?d.data.error:"No token sent.",Error("Web authentication failed: ".concat(l));return[2,d.data.token]}})})}function x(g,y,h,d){return e(this,void 0,void 0,function(){var a,l;return s(this,function(f){switch(f.label){case 0:return[4,S(g,y,h.publicKey(),d)];case 1:return a=f.sent(),a.sign(h),[4,R(g,a)];case 2:return l=f.sent(),[2,l]}})})}return he}var _e={},Gn;function Os(){if(Gn)return _e;Gn=1;var e=_e&&_e.__awaiter||function(E,S,R,x){function g(y){return y instanceof R?y:new R(function(h){h(y)})}return new(R||(R=Promise))(function(y,h){function d(f){try{l(x.next(f))}catch(u){h(u)}}function a(f){try{l(x.throw(f))}catch(u){h(u)}}function l(f){f.done?y(f.value):g(f.value).then(d,a)}l((x=x.apply(E,S||[])).next())})},s=_e&&_e.__generator||function(E,S){var R={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},x,g,y,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=d(0),h.throw=d(1),h.return=d(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function d(l){return function(f){return a([l,f])}}function a(l){if(x)throw new TypeError("Generator is already executing.");for(;h&&(h=0,l[0]&&(R=0)),R;)try{if(x=1,g&&(y=l[0]&2?g.return:l[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,l[1])).done)return y;switch(g=0,y&&(l=[l[0]&2,y.value]),l[0]){case 0:case 1:y=l;break;case 4:return R.label++,{value:l[1],done:!1};case 5:R.label++,g=l[1],l=[0];continue;case 7:l=R.ops.pop(),R.trys.pop();continue;default:if(y=R.trys,!(y=y.length>0&&y[y.length-1])&&(l[0]===6||l[0]===2)){R=0;continue}if(l[0]===3&&(!y||l[1]>y[0]&&l[1]<y[3])){R.label=l[1];break}if(l[0]===6&&R.label<y[1]){R.label=y[1],y=l;break}if(y&&R.label<y[2]){R.label=y[2],R.ops.push(l);break}y[2]&&R.ops.pop(),R.trys.pop();continue}l=S.call(E,R)}catch(f){l=[6,f],g=0}finally{x=y=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(_e,"__esModule",{value:!0}),_e.getServiceSigningKey=C,_e.getWebAuthEndpointURL=v,_e.fetchWebAuthData=A;var m=ht(),b=mr();function C(E){return E.SIGNING_KEY||null}function v(E){return E.WEB_AUTH_ENDPOINT||null}function A(E,S){return e(this,void 0,void 0,function(){var R,x,g,y,h;return s(this,function(d){switch(d.label){case 0:return[4,E.loadAccount(S)];case 1:return R=d.sent(),x=R.home_domain,x?[4,m.StellarToml.Resolver.resolve(x)]:((0,b.debug)("Web auth endpoint cannot be located. Issuing account has no home_domain: ".concat(S)),[2,null]);case 2:return g=d.sent(),y=v(g),h=C(g),!y||!h?[2,null]:[2,{domain:x,endpointURL:y,signingKey:h}]}})})}return _e}var Xn;function ks(){return Xn||(Xn=1,function(e){var s=Ne&&Ne.__createBinding||(Object.create?function(b,C,v,A){A===void 0&&(A=v);var E=Object.getOwnPropertyDescriptor(C,v);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[v]}}),Object.defineProperty(b,A,E)}:function(b,C,v,A){A===void 0&&(A=v),b[A]=C[v]}),m=Ne&&Ne.__exportStar||function(b,C){for(var v in b)v!=="default"&&!Object.prototype.hasOwnProperty.call(C,v)&&s(C,b,v)};Object.defineProperty(e,"__esModule",{value:!0}),m(Cs(),e),m(Os(),e)}(Ne)),Ne}var Zn=ks();function Ds(e){const s=c.useRef(null),m=C=>{s.current||(s.current=setInterval(async()=>{try{await C()}catch(v){Ce(v)}},e))},b=()=>{s.current&&(clearInterval(s.current),s.current=null)};return c.useEffect(()=>()=>b(),[]),{isActive:()=>s.current!==null,start:m,stop:b}}function Ps(e){const{memo:s,memo_type:m}=e;if(!s||!m)return null;switch(m){case"hash":const b=er.from(s,"base64");return ue.Memo.hash(b.toString("hex"));case"id":return ue.Memo.id(s);case"text":return ue.Memo.text(s);default:return null}}function hr(e){return e==null?e:Number.parseFloat(e)}const Fs=6e3,Is={current:xs,prevs:[]};function Ns(e,s){const m=As(e.current,s),b=s.type!=="navigate-back";return m.step!==e.current.step&&b?{prevs:[...e.prevs,e.current],current:m,next:void 0}:m.step!==e.current.step&&!b?{prevs:e.prevs.slice(0,-1),next:e.current,current:m}:{...e,current:m}}function yr(e,s){const m=nr(),b=c.useContext($a),C=$t(),[v,A]=c.useReducer(Ns,Is),E=async(T,L,O)=>{A(Z.selectType(L,O||"",T))},S=async T=>{const L=Wa.get(T.domain),O=L&&L[0]?L[1]:await m.fetchStellarToml(T.domain),j=Zn.getWebAuthEndpointURL(O);if(!j)return[void 0,void 0];const F={domain:T.domain,endpointURL:j,signingKey:Zn.getServiceSigningKey(O)||null};F.signingKey&&b.store(F.signingKey,F.domain);const W=C.getCachedAuthToken(F.endpointURL,e.publicKey);return[F,W]},R=async(T,L,O)=>{const j=await Za(L,e,O),F=await C.postResponse(T.endpointURL,j,e.testnet);return A(Z.setAuthToken(F)),F},x=async T=>{A(Z.captureWithdrawalInput(T.formValues));const O=(await H.fetchTransferInfos(T.transferServer)).assets.find(ne=>ne.asset.equals(T.asset)),j=O&&O.withdraw;if(!j||!j.enabled)throw te("AssetNotWithdrawableError",`Asset ${T.asset.code} seems to not be withdrawable via ${T.transferServer.domain}`,{asset:T.asset.code,domain:T.transferServer.domain});const[F,W]=await S(T.transferServer);return W&&A(Z.setAuthToken(W)),[F,W]},g=()=>A(Z.setDidRedirectToKYC()),y=T=>A(Z.completed(T));let h=0;const d=async(T,L,O)=>{if(window.navigator.onLine!==!1)try{const{transaction:j}=await H.fetchTransaction(T,L,"transfer",O);return h=0,A(Z.setTransferTransaction(j)),j}catch(j){h++,h<=3&&Ce(j)}},{isActive:a,start:l,stop:f}=Ds(Fs);return{dispatch:A,machineState:v,transfer:{afterSuccessfulExecution:y,didRedirectToKYC:g,initiateWebAuth:S,isKYCPollingActive:a,navigateBack:()=>{a()&&f(),["completed","initial","kyc-denied"].indexOf(v.current.step)>-1?s():A(Z.navigateBack())},performWebAuth:R,pollKYCStatus:d,startKYCPolling:l,stopKYCPolling:f,submitTransferFieldValues:x,submitTransferSelection:E}}}function js(e,s){const m={...s.formValues,type:s.method};return H.Deposit(s.transferServer,s.asset,e.accountID,m)}function Ls(e,s){const m=$t(),{dispatch:b,machineState:C,transfer:v}=yr(e,s),A=()=>{b(Z.selectXLMDeposit())},E=async(y,h,d)=>{const a=await y.interactive(h);if(a.type===H.TransferResultType.ok)b(Z.promptForTxDetails(y,void 0,a,d)),v.stopKYCPolling();else if(a.type===H.TransferResultType.kyc&&a.subtype===H.KYCResponseType.interactive){const l=a.data.id||a.data.identifier;v.isKYCPollingActive()||(v.startKYCPolling(()=>x(y,l,h)),b(Z.conductKYC(y,void 0,a,"authToken"in C.current?C.current.authToken:void 0)),x(y,l,h))}else throw te("UnexpectedResponseTypeError",`Unexpected response type: ${a.type} / ${a.data.type}`,{type:a.type,dataType:a.data.type});return a},S=async(y,h,d,a,l)=>{const f=await v.performWebAuth(d,a,l);return await E(y,f),f},R=async y=>{const d=(await H.fetchTransferInfos(y.transferServer)).assets.find(u=>u.asset.equals(y.asset));if(!d||!d.deposit||!d.deposit.enabled)throw te("AssetNotDepositableError",`Asset ${y.asset.code} seems to not be depositable via ${y.transferServer.domain}`,{asset:y.asset.code,domain:y.transferServer.domain});const a=js(e,y),[l,f]=await v.submitTransferFieldValues(y);if(!l)await E(a);else if(f)await E(a,f);else{const u=e.testnet?ue.Networks.TESTNET:ue.Networks.PUBLIC,D=await m.fetchChallenge(l.endpointURL,l.signingKey,e.publicKey,u);b(Z.conductAuth(a,void 0,l,D))}},x=async(y,h,d)=>{const a=await v.pollKYCStatus(y.transferServer,h,d);if(a&&a.status===H.TransferStatus.pending_user_transfer_start){const l={type:H.TransferResultType.ok,data:{how:"",eta:a.status_eta,fee_fixed:hr(a.amount_fee)}};b(Z.promptForTxDetails(y,void 0,l,a)),v.stopKYCPolling()}else if(a&&a.status==="completed"){const l=ye(a.amount_out);b(Z.completed(l)),v.stopKYCPolling()}};return{actions:{afterSuccessfulExecution:v.afterSuccessfulExecution,didRedirectToKYC:v.didRedirectToKYC,navigateBack:v.navigateBack,performWebAuth:S,selectXLMDeposit:A,submitTransferFieldValues:R,submitTransferSelection:v.submitTransferSelection},nextState:C.next,prevStates:C.prevs,state:C.current}}function Bs(e){const s={...e.formValues,type:e.method};return H.Withdrawal(e.transferServer,e.asset,s)}async function Us(e,s,m,b,C,v){const A=Ps(C.data);if(!C.data.account_id)throw te("MissingInfoError",`Cannot create transaction, because ${v.transferServer.domain} did not send all required information.`,{transferServer:v.transferServer.domain});const E=[ue.Operation.payment({amount:String(m),asset:v.asset,destination:C.data.account_id})];return Qa(E,{accountData:s,horizon:b,memo:A,walletAccount:e})}function Ms(e,s){const m=nr(),b=Ka(e.testnet),C=$t(),{dispatch:v,machineState:A,transfer:E}=yr(e,s),S=async(d,a,l)=>{const f=await d.interactive(a);if(f.type===H.TransferResultType.ok)v(Z.promptForTxDetails(void 0,d,f,l)),E.stopKYCPolling();else if(f.type===H.TransferResultType.kyc&&f.subtype===H.KYCResponseType.interactive){const u=f.data.id||f.data.identifier;E.isKYCPollingActive()||(E.startKYCPolling(()=>y(d,u,a)),v(Z.conductKYC(void 0,d,f,"authToken"in A.current?A.current.authToken:void 0)),y(d,u,a))}else throw te("UnexpectedResponseTypeError",`Unexpected response type: ${f.type} / ${f.data.type}`,{type:f.type,dataType:f.data.type});return f},R=async(d,a,l,f,u)=>{const D=await E.performWebAuth(l,f,u);return await S(a,D),D},x=async d=>{const l=(await H.fetchTransferInfos(d.transferServer)).assets.find(L=>L.asset.equals(d.asset)),f=l&&l.withdraw;if(!f||!f.enabled)throw te("AssetNotWithdrawableError",`Asset ${d.asset.code} seems to not be withdrawable via ${d.transferServer.domain}`,{asset:d.asset.code,domain:d.transferServer.domain});const u=Bs(d),[D,T]=await E.submitTransferFieldValues(d);if(!D)await S(u);else if(T)await S(u,T);else{const L=e.testnet?ue.Networks.TESTNET:ue.Networks.PUBLIC,O=await C.fetchChallenge(D.endpointURL,D.signingKey,e.publicKey,L);v(Z.conductAuth(void 0,u,D,O))}},g=async(d,a,l)=>{const f=await m.fetchAccountData(b,e.accountID),u=b[0];if(!f)throw te("FetchAccountDataError",`Cannot fetch account data of ${e.accountID} from ${u}`,{account:e.accountID,horizon:u});return Us(e,f,l,new ue.Horizon.Server(u),a,d)},y=async(d,a,l)=>{const f=await E.pollKYCStatus(d.transferServer,a,l);if(f&&f.status===H.TransferStatus.pending_user_transfer_start){const u={type:H.TransferResultType.ok,data:{account_id:f.withdraw_anchor_account,memo_type:f.withdraw_memo_type,memo:f.withdraw_memo,eta:f.status_eta,fee_fixed:hr(f.amount_fee),extra_info:f.to?{message:f.to}:void 0}};v(Z.promptForTxDetails(void 0,d,u,f)),E.stopKYCPolling()}};return{actions:{afterSuccessfulExecution:E.afterSuccessfulExecution,didRedirectToKYC:E.didRedirectToKYC,navigateBack:E.navigateBack,performWebAuth:R,prepareWithdrawalTransaction:g,submitTransferFieldValues:x,submitTransferSelection:E.submitTransferSelection},nextState:A.next,prevStates:A.prevs,state:A.current}}const $e=c.createContext({});function qs(e){const{children:s,...m}=e;return c.createElement($e.Provider,{value:m},s)}function $s(e){const s=Va(),{t:m}=J();return c.createElement(rr,{margin:e.margin,textAlign:"center"},c.createElement(le,null,m("transfer-service.no-withdrawable-assets.body.no-withdrawable-assets")),c.createElement(qe,{desktop:"inline",target:e.actionsRef.element},c.createElement(Ue,null,c.createElement(Me,{onClick:()=>s.history.push(es(e.account.id)),type:"primary"},m("transfer-service.no-withdrawable-assets.action.add-asset")))))}const Ws=c.memo($s);function Ks(e){const s=ar();return s?c.createElement(se,null,e.children[0]):c.createElement(Ha,{alignItems:"stretch",height:"100%"},c.createElement(se,{grow:!0,minWidth:300,maxWidth:400,padding:s?0:"4vh 0",overflowY:"auto",shrink:0,width:"50%"},c.createElement(c.Suspense,{fallback:c.createElement(sr,null)},e.children[0])),c.createElement(se,{grow:!0,margin:"0 0 0 5%",padding:"4vh 1vw 4vh 5%",shrink:!0,style:{borderLeft:"1px solid rgba(0, 0, 0, 0.25)"}},e.children[1]))}function z(e){return c.createElement(le,{color:"textSecondary",style:{marginBottom:16},variant:"body2"},e.children)}function pe(e){return c.createElement(c.Fragment,null,c.createElement(le,{color:"textSecondary",style:{marginTop:16,marginBottom:16},variant:"h6"},e.headline),e.children)}function Vs(e){const{transferServer:s}=e.state.deposit,{t:m}=J();return c.createElement(se,{grow:!0},c.createElement(se,{alignItems:"center",margin:"24px 0",textAlign:"center"},c.createElement(le,{variant:"h5"},m("transfer-service.deposit-success.body.deposit-pending")),c.createElement(le,{style:{margin:"16px 0"},variant:"body2"},c.createElement(le,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.deposit-success.body.info.1",`${s.domain} is waiting for your deposit.`,{domain:s.domain})),c.createElement(le,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.deposit-success.body.info.2"))),c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,null,c.createElement(Me,{onClick:e.onClose,type:"primary"},m("transfer-service.deposit-success.action.close"))))))}const Hs=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.deposit-success.sidebar.headline")},c.createElement(z,null,e("transfer-service.deposit-success.sidebar.info")))},pr=Object.assign(c.memo(Vs),{Sidebar:Hs});function zs(e){const{account:s}=c.useContext($e);return c.createElement(se,{alignItems:"center",textAlign:"center"},c.createElement(cs,{account:s,onCloseDialog:e.onCloseDialog}))}const Ys=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.purchase-lumens.sidebar.headline")},c.createElement(z,null,e("transfer-service.purchase-lumens.sidebar.info.1")),c.createElement(z,null,e("transfer-service.purchase-lumens.sidebar.info.2")))},br=Object.assign(c.memo(zs),{Sidebar:Ys}),Ve=c.createContext({});function Js(e){const{children:s,...m}=e;return c.createElement(Ve.Provider,{value:m},s)}const Gs=()=>{};function Xs(e){const{actions:s,state:m}=e.type==="deposit"?c.useContext($e):c.useContext(Ve),[b,C]=c.useState(),[v,A]=yt({throwOnError:!0}),E=c.useCallback(S=>A(async()=>{if(m.step!=="auth-pending")throw te("UnexpectedStateError",`Encountered unexpected state: ${m.step}`,{state:m.step});try{return await s.performWebAuth(m.deposit,m.withdrawal,m.webauth,e.authChallenge,S.password)}catch(R){if(za(R))C(R);else throw R}}),[s.performWebAuth,A,e.authChallenge,m]);return e.authChallenge?c.createElement(se,{alignItems:"stretch",margin:"0 auto",maxWidth:500,width:"100%"},c.createElement(ts,{account:e.account,actionsRef:e.dialogActionsRef,loading:v.type==="pending",passwordError:b,onClose:s.navigateBack,onConfirm:m.step==="auth-pending"?E:Gs,transaction:e.authChallenge})):null}const Zs=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.authentication.sidebar.headline")},c.createElement(z,null,e("transfer-service.authentication.sidebar.info.1")),c.createElement(z,null,e("transfer-service.authentication.sidebar.info.2")))},wr=Object.assign(c.memo(Xs),{Sidebar:Zs});function Qs(e){const{response:s}=e.state,{transferServer:m}=e.state.deposit||e.state.withdrawal;throw te("KycDeniedError",`${m.domain} has rejected the information about your person that you supplied. See ${s.more_info_url} for more details.`,{domain:m.domain,url:s.more_info_url||""})}const ei=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.kyc-denied.sidebar.headline")},c.createElement(z,null,e("transfer-service.kyc-denied.sidebar.info")))},gr=Object.assign(c.memo(Qs),{Sidebar:ei}),ti=e=>["bic","iban","sepa","swift"].indexOf(e)>-1,ni=(e,s)=>e.lt(s)?e:s,vr=e=>ti(e)?e.toUpperCase():e,Er=e=>e[0].toUpperCase()+e.slice(1);function ri(e,s,m){const b=s&&s.gt(0)?s:null,C=m?ni(e,m):e;return b&&C&&b.gt(C)?`Not possible - Minimum ${Be(b)}`:b&&C?`${Be(b)} - ${Be(C)}`:b?`Min. ${Be(b)}`:C?`Max. ${Be(C)}`:""}function Kt(e){return(e===e.toLowerCase()||e===e.toUpperCase())&&(e=e.replace(/\. ([a-z])/g,(s,m)=>`. ${m.toUpperCase()}`),e=e.replace(/\b([A-Za-z]+)\b/g,s=>vr(s))),Er(e)}function Ut(e){return e<0||e>365*24*60*60?"<illegal value>":e<90?`${Math.round(e)} seconds`:e<90*60?`${Math.round(e/60)} minutes`:e<48*60*60?`${Math.round(e/60/60)} hours`:`${Math.round(e/24/60/60)} days`}function Mt(e){return e.replace(/[-_]/g," ").split(" ").map((s,m)=>m===0?Er(s):s).map(s=>vr(s)).join(" ")}function Le(e){return c.createElement(le,{style:{margin:"8px 0"},variant:"body2"},e.children)}function ai(e){const{t:s}=J();return c.createElement(se,{grow:!0},c.createElement(se,{alignItems:"center",margin:"16px auto",textAlign:"center"},!e.transaction||e.transaction.status===H.TransferStatus.incomplete?e.didRedirectAlready?c.createElement(c.Fragment,null,c.createElement(Le,null,s("transfer-service.transaction-status.incomplete.already-redirected.info.1",`${e.domain} is checking your personal information. Please try again later.`,{domain:e.domain})," "),e.transaction&&e.transaction.status_eta?c.createElement(Le,null,s("transfer-service.transaction-status.incomplete.already-redirected.info.2",`Estimated time to completion: ${Ut(e.transaction.status_eta)}`,{eta:Ut(e.transaction.status_eta)})):null):c.createElement(Le,null,s("transfer-service.transaction-status.incomplete.not-redirected.info",`${e.domain} requires you to provide additional information.`,{domain:e.domain})):e.transaction.status===H.TransferStatus.error?c.createElement(c.Fragment,null,c.createElement(Le,null,"$",e.type==="deposit"?s("transfer-service.transaction-status.error.rejected.deposit"):s("transfer-service.transaction-status.error.rejected.withdrawal")," ","– ",e.transaction.message),c.createElement(Le,null,s("transfer-service.transaction-status.error.contact",`Please contact ${e.domain}.`,{domain:e.domain}))):e.transaction.status===H.TransferStatus.pending_user_transfer_start?c.createElement(Le,null,s("transfer-service.transaction-status.pending-user-transfer-start.info",`${e.domain} requires further information from you.`,{domain:e.domain})):e.transaction.more_info_url?c.createElement(Le,null,s("transfer-service.transaction-status.more-info-url.info"),c.createElement("br",null),c.createElement("a",{href:e.transaction.more_info_url,target:"_blank",rel:"noopener noreferrer"},e.transaction.more_info_url)):null))}const si=c.memo(ai);function ii(e){const{response:s}=e.state,{transferServer:m}=e.type==="deposit"?e.state.deposit:e.state.withdrawal,{actions:b}=e.type==="deposit"?c.useContext($e):c.useContext(Ve),{t:C}=J(),v=c.useMemo(()=>pt(),[]),A=E=>{E.preventDefault(),b.didRedirectToKYC(),s.data.type==="interactive_customer_info_needed"?(console.debug(`Opening anchor KYC page: ${s.data.url}`),ns(s.data.url)):Ce(te("OnlyInteractiveKycSupportedError","Only interactive KYCs are supported."))};return c.createElement("form",{id:v,noValidate:!0,onSubmit:A},c.createElement(se,{grow:!0},c.createElement(se,{alignItems:"center",margin:"24px auto",textAlign:"center"},c.createElement(le,{variant:"h5"},C("transfer-service.kyc-pending.body.additional-info-needed")),c.createElement(si,{domain:m.domain,transaction:e.state.transfer,type:e.type}),e.state.didRedirect?c.createElement(rr,{grow:!0,margin:"48px 0",textAlign:"center"},c.createElement(Ya,null)):null,c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,{desktopStyle:{justifyContent:"center",marginTop:16}},c.createElement(Me,{form:v,type:"submit"},e.state.didRedirect?C("transfer-service.kyc-pending.action.open-again"):C("transfer-service.kyc-pending.action.continue")))))))}const oi=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.kyc-pending.sidebar.headline")},c.createElement(z,null,e("transfer-service.kyc-pending.sidebar.info.1")),c.createElement(z,null,e("transfer-service.kyc-pending.sidebar.info.2")))},Sr=Object.assign(c.memo(ii),{Sidebar:oi});function ci(e){return c.createElement(se,null,e.children)}const Ze=c.memo(ci);function qt(e){const{description:s,choices:m,optional:b=!1}=e.descriptor,{t:C}=J(),v=Kt(s),A=Mt(e.name),E=b?C("transfer-service.form-builder.placeholder.optional",`(Optional) ${A}`,{name:A}):A;return m?c.createElement(Bt,{helperText:v,label:A,onChange:e.onChange,placeholder:E,select:!0,style:{flexGrow:1,...e.style},value:e.value},m.map((S,R)=>c.createElement(mt,{key:R,value:S},Mt(S)))):c.createElement(Bt,{helperText:v,label:A,onChange:e.onChange,placeholder:E,style:{flexGrow:1,...e.style},value:e.value||""})}function li(e){const s=Object.entries(e.fields).filter(([m,b])=>b&&typeof b=="object");return c.createElement(Ze,null,s.map(([m,b])=>c.createElement(qt,{key:m,descriptor:b,name:m,onChange:C=>e.onSetFormValue(m,C.target.value),style:e.fieldStyle,value:e.formValues[m]})))}const jt=e=>typeof e=="string"&&e.length>0;function ui(e,s){return Object.keys(e).reduce((m,b)=>{const C=e[b];return s(C,b)?{...m,[b]:C}:m},{})}function fi(e){return e&&e.length>=15&&e.match(/^[A-Z]{2}[0-9]{2}\s?[A-Z0-9]{4}\s?[A-Z0-9]{4}/)?e.replace(/\s+/g,""):e}function di(e,s){return s.reduce((m,b)=>b(m),e)}function mi(e,s){const m={...e};return s==="bank_account"&&(m.dest=di(m.dest,[fi])),m}const hi=c.memo(function(s){const{t:m}=J(),b=s.asset?s.asset.getCode():"";return!s.metadata||!s.metadata.min_amount&&!s.metadata.max_amount?null:c.createElement(Xe,{inputProps:{style:{color:lr.palette.text.secondary}},label:m("transfer-service.transfer-details.body.min-max-amount.label"),style:{marginTop:24},value:[s.metadata.min_amount?m("transfer-service.transfer-details.body.min-max-amount.min-amount",`Min. ${s.metadata.min_amount} ${b}`.trim(),{amount:s.metadata.min_amount,assetCode:b}):null,s.metadata.max_amount?m("transfer-service.transfer-details.body.min-max-amount.max-amount",`Max. ${s.metadata.max_amount} ${b}`.trim(),{amount:s.metadata.max_amount,assetCode:b}):null].filter(C=>!!C).join(" / ")})}),yi=e=>e.filter(s=>s!==""),pi=c.memo(function(s){const{t:m}=J();if(!s.metadata)return null;const b=yi([typeof s.metadata.fee_fixed=="number"?`${s.metadata.fee_fixed} ${s.asset&&s.asset.getCode()}`:"",typeof s.metadata.fee_percent=="number"?`${s.metadata.fee_percent}%`:""]).join(" + ")||"unknown";return c.createElement(Xe,{helperText:m("transfer-service.transfer-details.body.fee.helper-text",`As charged by ${s.domain}`,{domain:s.domain}),inputProps:{style:{color:lr.palette.text.secondary}},label:s.type==="deposit"?m("transfer-service.transfer-details.body.fee.label.deposit"):m("transfer-service.transfer-details.body.fee.label.withdrawal"),style:{marginTop:24},value:s.metadata.fee_fixed===0&&s.metadata.fee_percent===0?`${s.metadata.fee_fixed} ${s.asset&&s.asset.getCode()}`:b})});function bi(e){var Te;const{account:s,actions:m}=e.type==="deposit"?c.useContext($e):c.useContext(Ve),b=ir(s.publicKey,s.testnet),C=or(b.balances,e.state.asset),v=C?ye(C.balance):ye(0),A=c.useMemo(()=>pt(),[]),[E,S]=yt({throwOnError:!0}),{t:R}=J(),x=e.assetTransferInfos.find(V=>V.asset.equals(e.state.asset)),g=cr(e.state.transferServer.domain),[y,h]=c.useState(e.state.formValues||{}),d=(V,re)=>h(fe=>({...fe,[V]:re})),a=c.useCallback(V=>{V.preventDefault(),S(m.submitTransferFieldValues({...e.state,formValues:{...e.state.formValues,...mi(y,e.state.method),account:s.accountID}}).catch(re=>{var fe;(fe=re.message)!=null&&fe.includes("Cannot fetch web auth challenge")?Ce(te("FetchWebAuthChallengeError","Cannot fetch web auth challenge")):Ce(re)}))},[s.accountID,m,y,S,e.state]),l=e.type==="deposit"?x&&x.deposit?x.deposit:null:x&&x.withdraw&&x.withdraw.types?x.withdraw.types[e.state.method]:null,f=!!(g&&g.TRANSFER_SERVER_SEP0024),u=l&&l.fields&&!f?l.fields:{},D=["account","asset_code","type"],T=u.email||u.email_address,L=Object.keys(u).filter(V=>u[V]&&typeof u[V]=="object").some(V=>!u[V].optional&&!y[V]&&D.indexOf(V)===-1),O=u.amount?u.amount.optional:!0,j=T?T.optional:!0,F=(O||jt(y.amount))&&/^([0-9]+(\.[0-9]+)?)?$/.test(y.amount||""),W=e.type==="deposit"||!x||!((Te=x.withdraw)!=null&&Te.min_amount)||ye(x.withdraw.min_amount).lte(v),ne=(j===!0||jt(y.email)||jt(y.email_address))&&/^([^@]+@[^@]+\.[^@]+)?$/.test(y.email||y.email_address||""),He=L||!F||!ne||!W;return c.createElement("form",{id:A,noValidate:!0,onSubmit:a},c.createElement(se,null,c.createElement(Ze,null,u.dest?c.createElement(qt,{name:R("transfer-service.transfer-details.body.destination.name"),descriptor:u.dest||{},onChange:V=>d("dest",V.target.value),style:{marginTop:24},value:y.dest||""}):null,u.dest_extra?c.createElement(qt,{name:u.dest_extra.description?Kt(u.dest_extra.description):R("transfer-service.transfer-details.body.dest_extra.name"),descriptor:u.dest_extra,onChange:V=>d("dest_extra",V.target.value),style:{marginTop:24},value:y.dest_extra||""}):null),c.createElement(li,{fields:ui(u,(V,re)=>[...D,"amount","dest","dest_extra"].indexOf(re)===-1),fieldStyle:{marginTop:24},formValues:y,onSetFormValue:d}),c.createElement(Ze,null,c.createElement(hi,{asset:e.state.asset,metadata:x&&x.withdraw}),!W&&c.createElement(le,{color:"error",variant:"caption"},R("transfer-service.transfer-details.body.min-max-amount.not-enough-funds")),c.createElement(pi,{asset:e.state.asset,domain:x?x.transferServer.domain:"",metadata:x&&(e.type==="deposit"?x.deposit:x.withdraw),type:e.type})),c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,null,c.createElement(Me,{disabled:He,form:A,loading:E&&E.type==="pending",onClick:()=>{},type:"submit"},R("transfer-service.transfer-details.action.proceed"))))))}const wi=e=>{const{t:s}=J();return e.type==="deposit"?c.createElement(pe,{headline:s("transfer-service.transfer-details.sidebar.deposit.headline")},c.createElement(z,null,s("transfer-service.transfer-details.sidebar.deposit.info.1")),c.createElement(z,null,s("transfer-service.transfer-details.sidebar.deposit.info.2"))):c.createElement(pe,{headline:s("transfer-service.transfer-details.sidebar.withdrawal.headline")},c.createElement(z,null,s("transfer-service.transfer-details.sidebar.withdrawal.info.1")),c.createElement(z,null,s("transfer-service.transfer-details.sidebar.withdrawal.info.2")))},_r=Object.assign(c.memo(bi),{Sidebar:wi}),gi=tr({select:{fontSize:18,fontWeight:400}});function vi(e){const{account:s,actions:m}=e.type==="deposit"?c.useContext($e):c.useContext(Ve),b=c.useMemo(()=>pt(),[]),C=gi(),v=Ja(),[A,E]=yt({throwOnError:!0}),{t:S}=J(),R=j=>j?e.assetTransferInfos.find(F=>F.asset.equals(j)):void 0,x=j=>{const F=R(j);return F&&F.withdraw&&F.withdraw.types?Object.keys(F.withdraw.types):[]},g=e.state.asset||(e.type==="deposit"?ue.Asset.native():e.transferableAssets[0])||null,y=e.state.method||(x(g).length===1?x(g)[0]:null),[h,d]=c.useState({asset:g,methodID:y}),a=j=>F=>{d(W=>({...W,[j]:F.target.value}))},l=h.asset?x(h.asset):[],f=e.type==="withdrawal"&&l.length>0,u=!h.asset||!h.methodID&&f,D=e.trustedAssets.filter(j=>!e.transferableAssets.some(F=>F.equals(j))),T=R(h.asset),L=c.useCallback(j=>{const F=e.assetTransferInfos.find(ne=>ne.asset.equals(j)),W=F&&(e.type==="deposit"?F.deposit:F.withdraw);W&&"types"in W&&W.types&&Object.keys(W.types).length===1?d({asset:j,methodID:Object.keys(W.types)[0]}):d(ne=>({...ne,asset:j}))},[e.assetTransferInfos,e.type]),O=c.useCallback(j=>{if(j.preventDefault(),e.type==="deposit"&&h.asset&&h.asset.isNative())return m.selectXLMDeposit();if(!h.asset)return Ce(te("InvariantViolationError","Invariant violation: Form submission without selected asset",{message:"Form submission without selected asset"}));if(!T)return Ce(te("InvariantViolationError","Invariant violation: Form submission without asset transfer information",{message:" Form submission without asset transfer information"}));E(m.submitTransferSelection(T.transferServer,h.asset,h.methodID))},[m,T,h.asset,h.methodID,E,e.type]);return c.createElement("form",{id:b,noValidate:!0,onSubmit:O},c.createElement(Ze,null,c.createElement(rs,{assets:e.trustedAssets,disabledAssets:D,label:v?S("transfer-service.initial.body.asset-selector.label.short"):e.type==="deposit"?S("transfer-service.initial.body.asset-selector.label.deposit"):S("transfer-service.initial.body.asset-selector.label.withdrawal"),margin:"normal",onChange:L,showXLM:e.type==="deposit",testnet:s.testnet,value:h.asset||void 0,accountId:s.accountID},e.transferableAssets.length===0?c.createElement(mt,{disabled:!0,value:""},S("transfer-service.initial.body.asset-selector.no-assets")):null),c.createElement(as,{in:f},c.createElement(Bt,{fullWidth:!0,label:e.type==="deposit"?S("transfer-service.initial.body.method-selector.label.deposit"):S("transfer-service.initial.body.method-selector.label.withdrawal"),margin:"normal",onChange:a("methodID"),select:!0,SelectProps:{classes:{select:C.select}},value:h.methodID||""},c.createElement(mt,{disabled:!0,value:""},h.asset?S("transfer-service.initial.body.method-selector.info-item.asset"):S("transfer-service.initial.body.method-selector.info-item.no-asset")),l.map(j=>c.createElement(mt,{key:j,value:j},Mt(j)))))),c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,null,c.createElement(Me,{disabled:u,form:b,loading:A.type==="pending",onClick:()=>{},type:"submit"},S("transfer-service.initial.action.proceed")))))}const Ei=e=>{const{t:s}=J();return e.type==="deposit"?c.createElement(pe,{headline:s("transfer-service.initial.sidebar.deposit.headline")},c.createElement(z,null,s("transfer-service.initial.sidebar.deposit.info.1")),c.createElement(z,null,s("transfer-service.initial.sidebar.deposit.info.2"))):c.createElement(pe,{headline:s("transfer-service.initial.sidebar.withdrawal.headline")},c.createElement(z,null,s("transfer-service.initial.sidebar.withdrawal.info.1")),c.createElement(z,null,s("transfer-service.initial.sidebar.withdrawal.info.2")))},Tr=Object.assign(c.memo(vi),{Sidebar:Ei});function Si(e){const{transferServer:s}=e.state.withdrawal,{t:m}=J();return c.createElement(se,{grow:!0},c.createElement(se,{alignItems:"center",margin:"24px 0",textAlign:"center"},c.createElement(le,{variant:"h5"},m("transfer-service.withdrawal-success.body.withdrawal-in-progress")),c.createElement(le,{style:{margin:"16px 0"},variant:"body2"},c.createElement(le,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.withdrawal-success.body.info.1",`${s.domain} is conducting the withdrawal.`,{domain:s.domain})),c.createElement(le,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.withdrawal-success.body.info.2"))),c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,null,c.createElement(Me,{onClick:e.onClose,type:"primary"},m("transfer-service.withdrawal-success.action.close"))))))}const _i=()=>{const{t:e}=J();return c.createElement(pe,{headline:e("transfer-service.withdrawal-success.sidebar.headline")},c.createElement(z,null,e("transfer-service.withdrawal-success.sidebar.info")))},Rr=Object.assign(c.memo(Si),{Sidebar:_i}),Qn=e=>e==null;function Ti(e){var V;const{sendTransaction:s}=e,{account:m,actions:b}=e.type==="deposit"?c.useContext($e):c.useContext(Ve),{asset:C}=e.state.deposit||e.state.withdrawal,{t:v}=J(),A=c.useMemo(()=>pt(),[]),E=ir(m.accountID,m.testnet),S=e.state.transfer?e.state.transfer.amount_in:"",[R,x]=c.useState(S||""),[g,y]=yt({throwOnError:!0}),h=or(E.balances,C),d=h?ye(h.balance):ye(0),a=e.state.response.data,l=a.min_amount?ye(a.min_amount):void 0,f=a.max_amount?ye(a.max_amount):void 0,u=R.match(/^[0-9]+(\.[0-9]+)?$/)?ye(R):ye(0),D=a.eta?Ut(a.eta):v("transfer-service.transaction-details.body.eta.not-available"),T=l&&u.lt(l)||f&&u.gt(f),L=e.type==="withdrawal"?!u.gt(0)||u.gt(d)||T:!1,O=cr((V=e.state.withdrawal)==null?void 0:V.transferServer.domain),j=!!(O&&O.TRANSFER_SERVER_SEP0024),F=ye(a.fee_fixed||0).add(ye(a.fee_percent||0).div(100).mul(u)),W=F.round(2).eq(F)?2:void 0,ne=Qn(a.fee_fixed)&&Qn(a.fee_percent),He=c.useCallback(re=>{re.preventDefault(),e.type==="deposit"?b.afterSuccessfulExecution(u):y((async()=>{try{const fe=await b.prepareWithdrawalTransaction(e.state.withdrawal,e.state.response,u);await s(fe),b.afterSuccessfulExecution(u)}catch(fe){Ce(fe)}})())},[b,u,y,e.state,e.type,s]),Te=a.extra_info&&typeof a.extra_info=="string"?{message:a.extra_info}:a.extra_info||{};return c.createElement("form",{id:A,noValidate:!0,onSubmit:He},c.createElement(Ze,{wrap:!0},e.type==="deposit"&&e.state.response.data.how?c.createElement(Xe,{label:v("transfer-service.transaction-details.body.deposit-instructions.label"),multiline:!0,value:e.state.response.data.how}):null,e.type==="deposit"?null:c.createElement(Ft,{assetCode:C.getCode(),disabled:j||l&&l.gt(d),error:u.gt(d)||l&&l.gt(d),label:v("transfer-service.transaction-details.body.amount.label.withdrawal"),helperText:u.gt(d)&&v("transfer-service.transaction-details.body.amount.error.amount-greater-than-balance"),margin:"normal",onChange:re=>x(re.target.value),placeholder:ri(d,l,f),style:{marginTop:24},value:R}),c.createElement(Ft,{assetCode:C.getCode(),disabled:!0,label:v("transfer-service.transaction-details.body.fees.label"),margin:"normal",readOnly:!0,style:{marginTop:24},value:ne?v("transfer-service.transaction-details.body.fees.value.unknown"):`- ${Be(F,{maximumDecimals:W})}`}),c.createElement(Ft,{assetCode:C.getCode(),disabled:!0,label:v("transfer-service.transaction-details.body.amount-to-receive.label"),readOnly:!0,style:{marginTop:24},value:u.minus(F).lte(0)?"-":Be(u.minus(F))}),c.createElement(Xe,{label:v("transfer-service.transaction-details.body.eta.label"),style:{marginTop:24},value:D}),Object.keys(Te).map((re,fe)=>c.createElement(Xe,{key:fe,label:Object.keys(Te).length===1?v("transfer-service.transaction-details.body.information.label"):Kt(re),style:{marginTop:24},value:Te[re]})),c.createElement(qe,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},c.createElement(Ue,null,c.createElement(Me,{disabled:L,form:A,icon:e.type==="deposit"?null:c.createElement(ss,null),loading:g.type==="pending",onClick:()=>{},type:"submit"},e.type==="deposit"?v("transfer-service.transaction-details.action.done"):v("transfer-service.transaction-details.action.withdraw"))))))}const Ri=e=>{const{t:s}=J();return e.type==="deposit"?c.createElement(pe,{headline:s("transfer-service.transaction-details.sidebar.deposit.headline")},c.createElement(z,null,s("transfer-service.transaction-details.sidebar.deposit.info.1")),c.createElement(z,null,s("transfer-service.transaction-details.sidebar.deposit.info.2"))):c.createElement(pe,{headline:s("transfer-service.transaction-details.sidebar.withdrawal.headline")},c.createElement(z,null,s("transfer-service.transaction-details.sidebar.withdrawal.info.1")),c.createElement(z,null,s("transfer-service.transaction-details.sidebar.withdrawal.info.2")))},xr=Object.assign(c.memo(Ti),{Sidebar:Ri}),xi=c.memo(function(s){const{assetTransferInfos:m,state:b,trustedAssets:C,transferableAssets:v}=s;if(b.step==="initial")return c.createElement(Tr,{assetTransferInfos:m,dialogActionsRef:s.dialogActionsRef,state:b,trustedAssets:C,type:s.type,transferableAssets:v});if(b.step==="enter-values")return c.createElement(_r,{active:s.active||!1,assetTransferInfos:m,dialogActionsRef:s.dialogActionsRef,state:b,type:s.type});if(b.step==="xlm-deposit")return c.createElement(br,{onCloseDialog:s.onClose});if(b.step==="auth-pending")return c.createElement(wr,{account:s.account,assetTransferInfos:m,authChallenge:"authChallenge"in b?b.authChallenge:null,dialogActionsRef:s.dialogActionsRef,state:b,type:s.type});if(b.step==="kyc-pending")return c.createElement(Sr,{dialogActionsRef:s.dialogActionsRef,state:b,type:s.type});if(b.step==="kyc-denied")return c.createElement(gr,{state:b});if(b.step==="enter-tx-details")return c.createElement(xr,{dialogActionsRef:s.dialogActionsRef,sendTransaction:s.sendTransaction,state:b,type:s.type});if(b.step==="completed")return s.type==="deposit"?c.createElement(pr,{dialogActionsRef:s.dialogActionsRef,onClose:s.onClose,state:b}):c.createElement(Rr,{dialogActionsRef:s.dialogActionsRef,onClose:s.onClose,state:b});throw te("UnexpectedStateError",`Encountered unexpected state: ${b.step}`,{state:b.step})}),Lt=c.memo(function(s){const{state:m,type:b}=s;if(m.step==="initial")return c.createElement(Tr.Sidebar,{type:b});if(m.step==="enter-values")return c.createElement(_r.Sidebar,{type:b});if(m.step==="xlm-deposit")return c.createElement(br.Sidebar,null);if(m.step==="auth-pending")return c.createElement(wr.Sidebar,null);if(m.step==="kyc-pending")return c.createElement(Sr.Sidebar,null);if(m.step==="kyc-denied")return c.createElement(gr.Sidebar,null);if(m.step==="enter-tx-details")return c.createElement(xr.Sidebar,{type:b});if(m.step==="completed")return b==="deposit"?c.createElement(pr.Sidebar,null):c.createElement(Rr.Sidebar,null);throw te("UnexpectedStateError",`Encountered unexpected state: ${m.step}`,{state:m.step})}),Ai={minWidth:150};function Ci(e,s){return e.reduce((m,b)=>[...m,...s(b)],[])}const Oi=os(xi,c.createElement(sr,null));function ki(e){const s=Ga(),m=ar(),{actions:b,nextState:C,prevStates:v,state:A}=e.type==="deposit"?Ls(e.account,e.onClose):Ms(e.account,e.onClose),E=v.length>0?v[v.length-1]:void 0,S=c.useMemo(()=>Xa(e.accountData.balances)||[ue.Asset.native()],[e.accountData.balances]),R={},x=Es(S,e.account.testnet,R),g=c.useMemo(()=>Ci(x,a=>a?a.assets:[]),[x]),y=c.useMemo(()=>g.filter(a=>e.type==="deposit"?a.deposit&&a.deposit.enabled:a.withdraw&&a.withdraw.enabled).map(a=>a.asset).filter(a=>S.some(l=>l.equals(a))).concat(e.type==="deposit"?[ue.Asset.native()]:[]),[g,e.type,S]),h={...e,assetTransferInfos:g,transferableAssets:y,trustedAssets:S},d=e.type==="deposit"?qs:Js;return c.createElement(d,{account:e.account,actions:b,state:A},c.createElement(ls,{account:e.account,dialogActionsRef:s,onNavigateBack:b.navigateBack,type:e.type},c.createElement(Ks,null,y.length===0?c.createElement(Ws,{account:e.account,actionsRef:s,margin:"32px 0 0"}):c.createElement(is,{current:v.length},[...v,A,C].filter(a=>!!a).map((a,l)=>c.createElement(Oi,{key:l,...h,active:a===A,dialogActionsRef:a===A?s:void 0,state:a}))),c.createElement(Rs,{current:c.createElement(Lt,{state:A,type:e.type}),index:v.length,next:C?c.createElement(Lt,{state:C,type:e.type}):null,prev:E?c.createElement(Lt,{state:E,type:e.type}):null,size:v.length+2,style:m?void 0:Ai}))))}const Ui=c.memo(ki);export{Ui as default};
//# sourceMappingURL=TransferDialog-Bd7x4DqX.js.map
