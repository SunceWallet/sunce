import{R as e,$ as v,bW as H,bx as Y,a0 as R,a1 as T,aX as q,a6 as S,aM as p,a2 as V,Y as w,au as X,aZ as Z,a$ as j,ap as h,bv as K,Z as N,H as L,ax as D,ai as g,bX as U,bY as J,a9 as Q,b9 as ee,b1 as te,aa as ae,E as ne,al as se,aw as u,bZ as le,bw as ce,br as ie}from"./app-C14RL-BS.js";import{T as k,D as oe,a as re,c as M,b as ue,t as de,C as me,S as B,A as be,d as ge,e as C,f as O,g as ye,o as _}from"./app-stage2-BWyv1-yl.js";import{S as Ee}from"./SwapHoriz-C40WUqwS.js";import{V as he}from"./VisibilityIconButton-BirQZXyV.js";const Te=e.memo(function(n){const{t:a}=v(),[c,o]=e.useState(!1),l=async()=>{try{o(!0);const s=[S.Operation.changeTrust({asset:n.asset,limit:"0",withMuxing:!0})],d=await M(s,{accountData:n.accountData,horizon:n.horizon,walletAccount:n.account});o(!1),await n.sendTransaction(d),n.onRemoved()}catch(s){o(!1),p(s)}},i=n.accountData.balances.find(s=>s.asset_code===n.asset.getCode()&&s.asset_issuer===n.asset.getIssuer()),r=i&&parseFloat(i.balance)>0;return e.createElement(e.Fragment,null,e.createElement(H,null,a("account.remove-trustline.title")),e.createElement(Y,null,e.createElement(oe,null,r?e.createElement(e.Fragment,null,a("account.remove-trustline.text.warning")):e.createElement(re,{i18nKey:"account.remove-trustline.text.info"},"You are about to remove ",e.createElement("b",null,{asset:n.asset.code}),' from account "',{accountName:n.account.name},'".')),e.createElement(R,{preventMobileActionsBox:!0},e.createElement(T,{onClick:n.onClose,style:{maxWidth:"none"}},a("account.remove-trustline.action.cancel")),r?null:e.createElement(T,{autoFocus:!0,disabled:r,loading:c,icon:e.createElement(q,null),onClick:l,style:{maxWidth:"none"},type:"primary"},a("account.remove-trustline.action.remove")))))});function ve(t){return e.createElement(k,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:n,sendTransaction:a})=>e.createElement(Te,{...t,accountData:t.accountData,horizon:n,sendTransaction:a}))}const fe=e.memo(ve),De={marginTop:8};function Ce(t){const{account:n,asset:a}=t,[c,o]=e.useState(!1),[l,i]=e.useState(!1),r=V(),{t:s}=v(),d=w(n.accountID,n.testnet),I=d.balances.find(b=>b.asset_type!=="native"&&b.asset_issuer===a.issuer&&b.asset_code===a.code),y=async(b={})=>{const E=[S.Operation.changeTrust({asset:a,limit:b.limit,withMuxing:!0})];return M(E,{accountData:d,horizon:t.horizon,walletAccount:t.account})},x=e.useCallback(()=>{setTimeout(()=>r.history.push(ue(t.account.id)),1300)},[t.account,r.history]),G=async b=>{try{i(!0);const E=await b();i(!1),await t.sendTransaction(E),A(),x()}catch(E){i(!1),p(E)}},P=()=>G(()=>y()),A=e.useCallback(()=>o(!1),[]),$=e.useCallback(()=>o(!0),[]),z=e.useCallback(()=>r.history.push(de(t.account.id,void 0,X(a))),[a,t.account.id,r.history]);return e.createElement(e.Fragment,null,e.createElement(R,{desktopStyle:De,smallDialog:!0},I?e.createElement(e.Fragment,null,e.createElement(T,{icon:e.createElement(me,null),onClick:$,type:"secondary"},s("account.add-asset.action.remove")),e.createElement(T,{icon:e.createElement(Ee,null),onClick:z,type:"primary"},s("account.add-asset.action.trade"))):e.createElement(T,{loading:l,onClick:P,type:"primary"},s("account.add-asset.action.add-asset"))),e.createElement(Z,{open:c,onClose:A,TransitionComponent:j},e.createElement(fe,{account:t.account,accountData:d,asset:a,onClose:A,onRemoved:x})))}function Oe(t){return e.createElement(k,{account:t.account},({horizon:n,sendTransaction:a})=>e.createElement(Ce,{...t,horizon:n,sendTransaction:a}))}const Ie=e.memo(Oe),F=N({root:{padding:0},mainListItemText:{flexShrink:5},mainListItemTextIndent:{marginLeft:24,[g.down(600)]:{marginLeft:12}},mainListItemTextPrimaryTypography:{fontSize:18,fontWeight:300,overflow:"hidden",textOverflow:"ellipsis",[g.down(400)]:{fontSize:16,lineHeight:"20px"}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",[g.down(400)]:{fontSize:14},[g.down(350)]:{fontSize:12}},balanceListItem:{marginLeft:8,textAlign:"right"}});function m(t){const{variant:n="deduction"}=t,a=F();return t.hide?null:e.createElement(L,{className:a.root,style:t.style},e.createElement(D,{classes:{root:`${a.mainListItemText} ${t.indent?a.mainListItemTextIndent:""}`,primary:a.mainListItemTextPrimaryTypography,secondary:a.mainListItemTextSecondaryTypography},primary:t.primary,secondary:t.secondary}),e.createElement(D,{className:a.balanceListItem,primaryTypographyProps:{style:{fontSize:"150%"}}},n==="deduction"?"-":n==="gross"?"":"="," ",e.createElement(B,{assetCode:"",balance:t.amount})))}const Ae=e.memo(function(n){const a=F();return e.createElement(L,{className:a.root,style:{borderBottom:"none"}},e.createElement(D,{classes:{root:a.mainListItemText,primary:a.mainListItemTextPrimaryTypography,secondary:a.mainListItemTextSecondaryTypography},primary:n.left}),e.createElement(D,{className:a.balanceListItem,primaryTypographyProps:{style:{fontSize:"120%",fontWeight:300}},style:{marginTop:0,marginBottom:0}},n.right))});function Ne(t){const{t:n}=v(),a=t.accountData.balances.find(y=>y.asset_type==="native"),c=t.accountData.balances.filter(y=>y.asset_type!=="native"),o=t.baseReserve*Object.keys(t.accountData.data_attr).length,l=t.baseReserve*t.accountData.signers.length,i=t.baseReserve*c.length,r=a?h(a.selling_liabilities):h(0),s=h(t.accountData.subentry_count*t.baseReserve).minus(t.baseReserve*(t.accountData.signers.length-1)).minus(o).minus(i),d=a?h(a.balance):h(0),I=d.minus(t.baseReserve).minus(o).minus(s).minus(l).minus(i).minus(r);return e.createElement(K,{style:{padding:0}},e.createElement(Ae,{right:n("account.balance-details.spendable-balances.headline")}),e.createElement(m,{amount:d.toFixed(4),primary:n("account.balance-details.spendable-balances.total-balance.primary"),secondary:n("account.balance-details.spendable-balances.total-balance.secondary"),style:t.style,variant:"gross"}),e.createElement(m,{amount:t.baseReserve.toFixed(1),indent:!0,primary:n("account.balance-details.spendable-balances.base-reserve.primary"),secondary:n("account.balance-details.spendable-balances.base-reserve.secondary"),style:t.style}),e.createElement(m,{amount:l.toFixed(1),indent:!0,primary:n("account.balance-details.spendable-balances.signers-reserve.primary"),secondary:t.accountData.signers.length===1?n("account.balance-details.spendable-balances.signers-reserve.secondary.single-key"):n("account.balance-details.spendable-balances.signers-reserve.secondary.multiple-keys"),style:t.style}),e.createElement(m,{amount:i.toFixed(1),hide:i===0,indent:!0,primary:n("account.balance-details.spendable-balances.trustline-reserve.primary"),secondary:n("account.balance-details.spendable-balances.trustline-reserve.secondary"),style:t.style}),e.createElement(m,{amount:s.toFixed(1),hide:s.cmp(0)===0,indent:!0,primary:n("account.balance-details.spendable-balances.open-orders-reserve.primary"),secondary:n("account.balance-details.spendable-balances.open-orders-reserve.secondary"),style:t.style}),e.createElement(m,{amount:o.toFixed(1),hide:o===0,indent:!0,primary:n("account.balance-details.spendable-balances.data-reserve.primary"),secondary:n("account.balance-details.spendable-balances.data-reserve.secondary"),style:t.style}),e.createElement(m,{amount:r.toString(),hide:r.eq(0),indent:!0,primary:n("account.balance-details.spendable-balances.selling-liabilities.primary"),secondary:n("account.balance-details.spendable-balances.selling-liabilities.secondary"),style:t.style}),e.createElement(m,{amount:I.toString(),primary:n("account.balance-details.spendable-balances.spendable-balance.primary"),secondary:n("account.balance-details.spendable-balances.spendable-balance.secondary"),style:t.style,variant:"total"}))}const xe=e.memo(Ne),f=t=>t[0].toUpperCase()+t.substr(1),W=N({card:{backgroundColor:"#fbfbfb",borderRadius:8,margin:"12px -8px",overflowY:"auto"},cardContent:{position:"relative",padding:"8px 16px !important"},cardTitle:{fontSize:20,fontWeight:400,marginBottom:8},cardLogo:{position:"absolute",top:8,right:8,width:72,height:72,backgroundColor:"white",boxShadow:"0 0 2px 2px rgba(0, 0, 0, 0.2)"},cardLogoImage:{width:"100%",height:"100%"}}),_e=e.memo(function(n){const a=w(n.account.accountID,n.account.testnet),c=W(),{t:o}=v();return e.createElement(e.Fragment,null,e.createElement(C,{className:c.card},e.createElement(O,{className:c.cardContent},e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:o("account.asset-details.lumen.description.label"),multiline:!0,value:o("account.asset-details.lumen.description.text")}))),e.createElement(C,{className:c.card},e.createElement(O,{className:c.cardContent},e.createElement(xe,{account:n.account,accountData:a,baseReserve:le}))))}),Re=e.memo(function({account:n,asset:a,metadata:c}){const o=U(a.issuer,n.testnet),l=ce(o.home_domain),i=W(),r=ie(),{t:s}=v(),d=e.useCallback(()=>r.copyToClipboard(a.getIssuer()),[a,r]);return e.createElement(e.Fragment,null,e.createElement(C,{className:i.card},e.createElement(O,{className:i.cardContent},c&&c.desc?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.description.label"),margin:"dense",multiline:!0,value:c.desc}):null,e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.issuing-account.label"),margin:"dense",onClick:d,value:a.getIssuer(),inputProps:{style:{cursor:"pointer",textOverflow:"ellipsis"}}}),e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.account-flags.label"),margin:"dense",multiline:!0,value:f([o.flags.auth_required?`• ${s("account.asset-details.general.account-flags.auth-required")}`:`• ${s("account.asset-details.general.account-flags.auth-not-required")}`,o.flags.auth_revocable?`• ${s("account.asset-details.general.account-flags.auth-revocable")}`:`• ${s("account.asset-details.general.account-flags.auth-not-revocable")}`,o.flags.auth_immutable?`• ${s("account.asset-details.general.account-flags.auth-immutable")}`:`• ${s("account.asset-details.general.account-flags.auth-mutable")}`].join(`
`))}),c&&c.conditions?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.conditions.label"),margin:"dense",multiline:!0,value:c.conditions}):null,c&&c.anchor_asset_type?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.anchor-asset.label"),margin:"dense",multiline:!0,value:c.anchor_asset?`${f(c.anchor_asset)} (${f(c.anchor_asset_type)})`:f(c.anchor_asset_type)}):null,c&&c.redemption_instructions?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.redemption-instructions.label"),margin:"dense",multiline:!0,value:c.redemption_instructions}):null)),l&&l.DOCUMENTATION?e.createElement(C,{className:i.card},e.createElement(O,{className:i.cardContent},l.DOCUMENTATION.ORG_LOGO?e.createElement(ye,{className:i.cardLogo},e.createElement("img",{alt:"Organization logo",className:i.cardLogoImage,src:l.DOCUMENTATION.ORG_LOGO})):null,l.DOCUMENTATION.ORG_NAME?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.name.label"),margin:"dense",value:l.DOCUMENTATION.ORG_NAME}):null,l.DOCUMENTATION.ORG_DBA?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.dba.label"),margin:"dense",value:l.DOCUMENTATION.ORG_DBA}):null,l.DOCUMENTATION.ORG_URL?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.website.label"),margin:"dense",onClick:()=>_(l.DOCUMENTATION.ORG_URL),value:l.DOCUMENTATION.ORG_URL,inputProps:{style:{cursor:"pointer",textDecoration:"underline"}}}):null,l.DOCUMENTATION.ORG_DESCRIPTION?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.description.label"),margin:"dense",multiline:!0,value:l.DOCUMENTATION.ORG_DESCRIPTION}):null,l.DOCUMENTATION.ORG_PHYSICAL_ADDRESS?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.address.label"),margin:"dense",multiline:!0,value:l.DOCUMENTATION.ORG_PHYSICAL_ADDRESS,inputProps:{style:{whiteSpace:"pre"}}}):null,l.DOCUMENTATION.ORG_OFFICIAL_EMAIL?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.email.label"),margin:"dense",multiline:!0,onClick:()=>_("mailto:"+l.DOCUMENTATION.ORG_OFFICIAL_EMAIL),value:l.DOCUMENTATION.ORG_OFFICIAL_EMAIL,inputProps:{style:{cursor:"pointer",textDecoration:"underline"}}}):null,l.DOCUMENTATION.ORG_PHONE_NUMBER?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.phone-number.label"),margin:"dense",multiline:!0,value:l.DOCUMENTATION.ORG_PHONE_NUMBER}):null)):null)}),Se=N({logo:{position:"absolute",top:4,right:-4,width:96,height:96,boxShadow:"0 0 8px 2px rgba(0, 0, 0, 0.2)",fontSize:24,[g.down(600)]:{width:64,height:64,fontSize:18}},domain:{marginTop:-4,marginLeft:47,marginBottom:16,[g.down(600)]:{marginLeft:39}}});function ke(t){const n=U(t.account.accountID,t.account.testnet),a=e.useMemo(()=>J(t.assetID),[t.assetID]),c=Se(),o=Q(),l=n.balances.find(a.isNative()?s=>s.asset_type==="native":s=>s.asset_type!=="native"&&s.asset_issuer===a.issuer&&s.asset_code===a.code),i=ee(a,t.account.testnet),r=e.useMemo(()=>a.isNative()?null:e.createElement(Ie,{account:t.account,asset:a}),[t.account,a]);return e.createElement(te,{excessWidth:8,top:e.createElement(e.Fragment,null,e.createElement(ae,{nowrap:!0,onBack:t.onClose,style:{position:"relative",zIndex:1},title:a.isNative()?"Stellar Lumens (XLM)":e.createElement(e.Fragment,null,i&&i.name?`${i.name} (${a.getCode()})`:a.getCode(),e.createElement(he,{accountId:t.account.accountID,asset:a})),titleStyle:{maxWidth:o?"calc(100% - 75px)":"calc(100% - 100px)",textShadow:"0 0 5px white, 0 0 5px white, 0 0 5px white"}}),e.createElement(ne,{className:c.domain,variant:"subtitle1"},l?e.createElement(B,{assetCode:a.getCode(),balance:l.balance}):a.isNative()?"stellar.org":e.createElement(be,{publicKey:a.getIssuer(),testnet:t.account.testnet})),e.createElement(ge,{asset:a,className:c.logo,testnet:t.account.testnet})),actions:r,actionsPosition:"bottom",fitToShrink:!0},e.createElement(se,{margin:"0 4px",padding:`0 0 ${o?68:0}px`,shrink:0},a.isNative()?e.createElement(_e,{account:t.account}):e.createElement(Re,{account:t.account,asset:a,metadata:i})))}export{ke as default};
//# sourceMappingURL=AssetDetailsDialog-DxgtbUp5.js.map
