parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MED6":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("react")),t=e(require("./utils/createSvgIcon")),u=(0,t.default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");exports.default=u;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","react":"n8MK","./utils/createSvgIcon":"Atth"}],"zZip":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("react")),t=e(require("./utils/createSvgIcon")),l=(0,t.default)(r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");exports.default=l;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","react":"n8MK","./utils/createSvgIcon":"Atth"}],"nlgo":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("react")),t=e(require("./utils/createSvgIcon")),u=(0,t.default)(r.default.createElement("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"VpnKey");exports.default=u;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","react":"n8MK","./utils/createSvgIcon":"Atth"}],"zXIu":[function(require,module,exports) {
"use strict";var e;function t(t){var s=t.signers.map(e=>e.weight),h=Math.max(...s),r=Math.min(...s),o=t.thresholds.low_threshold===t.thresholds.med_threshold&&t.thresholds.med_threshold===t.thresholds.high_threshold,i=Math.max(t.thresholds.low_threshold,t.thresholds.med_threshold,t.thresholds.high_threshold);return{preset:t.signers.length<=1?{type:e.Type.SingleSignature}:r>=i?{type:e.Type.OneOutOfN}:r===h&&o?{requiredKeyWeight:Math.ceil(i/r),type:e.Type.MOutOfN}:{thresholds:t.thresholds,type:e.Type.Custom},signersToAdd:[],signersToRemove:[]}}function s(e){return"requiredKeyWeight"in e?e.requiredKeyWeight:"thresholds"in e?Math.max(e.thresholds.low_threshold,e.thresholds.med_threshold,e.thresholds.high_threshold):void 0}function h(t){return t.type===e.Type.MOutOfN||t.type===e.Type.Custom}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultisigPresets=void 0,exports.getSignatureThreshold=s,exports.initializeEditorState=t,exports.requiresSignatureThreshold=h,function(e){!function(e){e.Custom="Custom",e.OneOutOfN="OneOutOfN",e.MOutOfN="MOutOfN",e.SingleSignature="SingleSignature"}(e.Type||(e.Type={}))}(e||(exports.MultisigPresets=e={}));
},{}],"Ob4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useSignersEditor=m;var t=u(require("react")),e=require("stellar-sdk"),r=require("~App/contexts/notifications"),n=require("~App/contexts/settings"),i=require("~Generic/hooks/stellar-subscriptions"),o=require("~Generic/lib/transaction"),a=require("../lib/editor");function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(l){return void r(l)}u.done?e(s):Promise.resolve(s).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,u,"next",t)}function u(t){s(o,n,i,a,u,"throw",t)}a(void 0)})}}function c(t,e){return g(t)||p(t,e)||d(t,e)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}function g(t){if(Array.isArray(t))return t}function y(t,r,n){var i=[...n.signersToRemove.map(r=>r.key===t.account_id?e.Operation.setOptions({masterWeight:0,withMuxing:!0}):e.Operation.setOptions({signer:{ed25519PublicKey:r.key,weight:0}})),...n.signersToAdd.map(t=>e.Operation.setOptions({signer:{ed25519PublicKey:t.key,weight:t.weight},withMuxing:!0}))];return t.data_attr["config.multisig.coordinator"]||i.push(e.Operation.manageData({name:"config.multisig.coordinator",value:r.multiSignatureCoordinator,withMuxing:!0})),n.weightThreshold!==t.thresholds.low_threshold&&n.weightThreshold!==t.thresholds.med_threshold&&n.weightThreshold!==t.thresholds.high_threshold&&i.push(e.Operation.setOptions({lowThreshold:n.weightThreshold,medThreshold:n.weightThreshold,highThreshold:n.weightThreshold,withMuxing:!0})),i}function m(e){var u=(0,i.useLiveAccountData)(e.account.accountID,e.account.testnet),s=t.default.useContext(n.SettingsContext),h=c(t.default.useState(!1),2),d=h[0],f=h[1],p=c(t.default.useState(),2),g=p[0],m=p[1],v=t.default.useMemo(()=>(0,a.initializeEditorState)(u),[u]),w=g||v,b=t.default.useCallback(t=>{m("function"==typeof t?e=>t(e||v):t)},[m,v]);return{applyUpdate:function(){var t=l(function*(t){try{f(!0);var n=y(u,s,t),i=yield(0,o.createTransaction)(n,{accountData:u,horizon:e.horizon,walletAccount:e.account}),a=e.sendTransaction(i);f(!1),yield a}catch(l){(0,r.trackError)(l),f(!1)}});return function(e){return t.apply(this,arguments)}}(),editorState:w,setEditorState:b,txCreationPending:d}}
},{"react":"n8MK","stellar-sdk":"n9dh","~App/contexts/notifications":"bqF5","~App/contexts/settings":"a27z","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/lib/transaction":"abl7","../lib/editor":"zXIu"}],"dRfh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Step=exports.MultisigEditorProvider=exports.MultisigEditorContext=void 0;var t,e=i(require("react")),r=require("../hooks/useSignersEditor"),n=require("../lib/editor");function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return c(t)||l(t,e)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,s,u=[],a=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);a=!0);}catch(t){l=!0,i=t}finally{try{if(!a&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return u}}function c(t){if(Array.isArray(t))return t}!function(t){t[t.Presets=0]="Presets",t[t.Signers=1]="Signers"}(t||(exports.Step=t={}));var d=exports.MultisigEditorContext=e.default.createContext({accountID:"",applyUpdate(){throw Error("MultisigEditorContext has not yet been initialized")},currentStep:t.Presets,editorState:{preset:{type:n.MultisigPresets.Type.SingleSignature},signersToAdd:[],signersToRemove:[]},setEditorState(){throw Error("MultisigEditorContext has not yet been initialized")},switchToStep(){throw Error("MultisigEditorContext has not yet been initialized")},testnet:!1,txCreationPending:!1}),f=exports.MultisigEditorProvider=e.default.memo(function(n){var i=o(e.default.useState(t.Presets),2),s=i[0],u=i[1],a=(0,r.useSignersEditor)(n),l=Object.assign(Object.assign({},a),{accountID:n.account.accountID,currentStep:s,switchToStep:u,testnet:n.account.testnet});return e.default.createElement(d.Provider,{value:l},n.children)});
},{"react":"n8MK","../hooks/useSignersEditor":"Ob4q","../lib/editor":"zXIu"}],"O2sZ":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("react")),t=e(require("./utils/createSvgIcon")),u=(0,t.default)(r.default.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");exports.default=u;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","react":"n8MK","./utils/createSvgIcon":"Atth"}],"Fvm1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("react")),t=require("react-i18next"),r=f(require("@material-ui/core/IconButton")),l=f(require("@material-ui/core/ListItem")),a=f(require("@material-ui/core/ListItemIcon")),i=f(require("@material-ui/core/ListItemText")),u=f(require("@material-ui/core/TextField")),n=f(require("@material-ui/icons/Check")),o=f(require("@material-ui/icons/Close")),s=f(require("@material-ui/icons/PersonAdd")),c=require("~Generic/hooks/userinterface"),d=require("~Layout/components/Box"),m=f(require("~App/theme"));function f(e){return e&&e.__esModule?e:{default:e}}function p(f){var p=(0,c.useIsMobile)(),g=(0,c.useIsSmallMobile)(),y=(0,t.useTranslation)().t;return e.default.createElement(l.default,{style:f.style},e.default.createElement(a.default,null,e.default.createElement(s.default,{style:{fontSize:"2rem"}})),e.default.createElement(i.default,null,e.default.createElement(d.HorizontalLayout,null,e.default.createElement(u.default,{autoFocus:!0,error:!!f.errors.publicKey,label:f.errors.publicKey?f.errors.publicKey.message:y("account-settings.manage-signers.signers-editor.new-signer.label"),placeholder:y(p?"account-settings.manage-signers.signers-editor.new-signer.placeholder.short":"account-settings.manage-signers.signers-editor.new-signer.placeholder.long"),onChange:e=>f.onUpdate({publicKey:e.target.value.trim()}),style:{flexGrow:1},InputProps:g?{style:{fontSize:"0.8rem"}}:void 0,value:f.values.publicKey}))),e.default.createElement(a.default,{style:{marginLeft:8,minWidth:0}},e.default.createElement(r.default,{color:"primary",onClick:f.onSubmit,style:{borderColor:m.default.palette.primary.main,borderStyle:"solid",borderWidth:1.5,padding:8}},e.default.createElement(n.default,null))),e.default.createElement(a.default,{style:{minWidth:0}},e.default.createElement(r.default,{onClick:f.onCancel},e.default.createElement(o.default,null))))}var g=exports.default=p;
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/IconButton":"e0Nd","@material-ui/core/ListItem":"vro7","@material-ui/core/ListItemIcon":"lJBu","@material-ui/core/ListItemText":"FcKO","@material-ui/core/TextField":"JZs9","@material-ui/icons/Check":"FMA7","@material-ui/icons/Close":"HRsB","@material-ui/icons/PersonAdd":"qbhQ","~Generic/hooks/userinterface":"rVD3","~Layout/components/Box":"YhZi","~App/theme":"j28y"}],"d8O7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("react")),t=s(require("@material-ui/core/TextField")),r=require("../lib/editor"),i=require("./MultisigEditorContext");function s(e){return e&&e.__esModule?e:{default:e}}function a(s){var a=e.default.useContext(i.MultisigEditorContext),n=a.editorState,u=a.setEditorState,o=n.preset,d=String((0,r.getSignatureThreshold)(o)),l=e.default.useCallback(e=>{e.persist(),u(t=>{var r=Number.parseInt(e.target.value,10);if("requiredKeyWeight"in t.preset)return Object.assign(Object.assign({},t),{preset:Object.assign(Object.assign({},t.preset),{requiredKeyWeight:r})});if("thresholds"in t.preset)return Object.assign(Object.assign({},t),{preset:Object.assign(Object.assign({},t.preset),{thresholds:{high_threshold:r,med_threshold:r,low_threshold:r}})});throw Error('Cannot update thresholds for multi-sig preset of type "'.concat(t.preset.type,'"'))})},[u]);return e.default.createElement(t.default,{inputProps:{min:1,style:{maxWidth:32,padding:"16px 14px",textAlign:"center"}},inputRef:s.inputRef,onChange:l,type:"number",value:d,variant:"outlined"})}var n=exports.default=e.default.memo(a);
},{"react":"n8MK","@material-ui/core/TextField":"JZs9","../lib/editor":"zXIu","./MultisigEditorContext":"dRfh"}],"TKJ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=k(require("react")),t=require("react-i18next"),r=k(require("@material-ui/core/IconButton")),n=k(require("@material-ui/core/Divider")),i=k(require("@material-ui/core/List")),a=k(require("@material-ui/core/ListItem")),l=k(require("@material-ui/core/ListItemIcon")),u=k(require("@material-ui/core/ListItemSecondaryAction")),s=k(require("@material-ui/core/ListItemText")),o=k(require("@material-ui/icons/Add")),c=k(require("@material-ui/icons/Person")),d=k(require("@material-ui/icons/RemoveCircle")),f=require("~App/contexts/accounts"),g=require("~App/contexts/notifications"),m=k(require("~Generic/components/ButtonListItem")),y=require("~Generic/components/PublicKey"),p=require("~Generic/hooks/stellar"),b=require("~Generic/hooks/userinterface"),h=require("~Generic/lib/stellar-address"),v=require("../lib/editor"),E=require("./MultisigEditorContext"),q=k(require("./NewSignerForm")),w=k(require("./ThresholdInput"));function k(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r,n,i,a,l){try{var u=e[a](l),s=u.value}catch(o){return void r(o)}u.done?t(s):Promise.resolve(s).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var a=e.apply(t,r);function l(e){x(a,n,i,l,u,"next",e)}function u(e){x(a,n,i,l,u,"throw",e)}l(void 0)})}}function S(e,t){return T(e)||O(e,t)||j(e,t)||K()}function K(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,l,u=[],s=!0,o=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){o=!0,i=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(o)throw i}}return u}}function T(e){if(Array.isArray(e))return e}function C(){var e=(0,t.useTranslation)().t;return function(t,r){var n={};return(0,h.isPublicKey)(t.publicKey)||(0,h.isStellarAddress)(t.publicKey)?r.find(e=>e.key===t.publicKey)&&(n.publicKey=new Error(e("account-settings.manage-signers.signers-editor.validation.existing-signer"))):n.publicKey=new Error(e("account-settings.manage-signers.signers-editor.validation.invalid-stellar-address")),t.weight.match(/^[0-9]+$/)||(n.weight=new Error(e("account-settings.manage-signers.signers-editor.validation.integer-required"))),n}}var R={background:"white",boxShadow:"0 8px 12px 0 rgba(0, 0, 0, 0.1)"};function L(h){var k=e.default.useContext(f.AccountsContext).accounts,x=e.default.useContext(E.MultisigEditorContext),K=x.editorState,j=x.setEditorState,I=x.testnet,O=(0,p.useFederationLookup)().lookupFederationRecord,T=(0,b.useIsMobile)(),L=C(),P=e.default.createRef(),_=(0,t.useTranslation)().t,G=K.preset,M=S(e.default.useState(!1),2),F=M[0],B=M[1],U=S(e.default.useState({}),2),$=U[0],z=U[1],D=S(e.default.useState({publicKey:"",weight:"1"}),2),N=D[0],W=D[1],H=e.default.useCallback(()=>B(!0),[B]),J=function(){var e=A(function*(){var e;try{var t=N.publicKey.indexOf("*")>-1?yield O(N.publicKey):null,r=t?t.account_id:N.publicKey,n=L(N,h.signers);if(Object.keys(n).length>0)return z(n);(e=>j(t=>Object.assign(Object.assign({},t),{signersToAdd:[...t.signersToAdd,e]})))({key:r,type:"ed25519_public_key",weight:parseInt(N.weight,10)}),B(!1),z({}),W({publicKey:"",weight:"1"}),null===(e=P.current)||void 0===e||e.focus()}catch(i){(0,g.trackError)(i)}});return function(){return e.apply(this,arguments)}}();return e.default.createElement(i.default,{disablePadding:T},F?e.default.createElement(q.default,{errors:$,onCancel:()=>B(!1),onSubmit:J,onUpdate:e=>{W(t=>Object.assign(Object.assign({},t),e))},style:R,values:N}):e.default.createElement(m.default,{gutterBottom:!0,onClick:H},e.default.createElement(o.default,null),"  ",_("account-settings.manage-signers.action.add-signer")),h.signers.map(t=>e.default.createElement(a.default,{key:t.key,style:R},e.default.createElement(l.default,null,e.default.createElement(c.default,{style:{fontSize:"2rem"}})),e.default.createElement(s.default,{primary:e.default.createElement(y.Address,{address:t.key,testnet:h.testnet,variant:"full"}),secondary:e.default.createElement(e.default.Fragment,null,h.showKeyWeights?e.default.createElement("span",{style:{marginRight:24}},_("account-settings.manage-signers.signers-editor.list.item.weight"),": ",t.weight):null,k.some(e=>e.publicKey===t.key&&e.testnet===I)?e.default.createElement("span",null,_("account-settings.manage-signers.signers-editor.list.item.local-key")):null)}),e.default.createElement(u.default,null,e.default.createElement(r.default,{"aria-label":"Remove",disabled:1===h.signers.length,onClick:()=>(e=>{var t;j(t=>Object.assign(Object.assign({},t),{signersToAdd:t.signersToAdd.filter(t=>t.key!==e.key),signersToRemove:[...t.signersToRemove,e]})),null===(t=P.current)||void 0===t||t.focus()})(t)},e.default.createElement(d.default,null))))),(0,v.requiresSignatureThreshold)(G)?e.default.createElement(e.default.Fragment,null,e.default.createElement(a.default,{style:R},e.default.createElement(l.default,null,e.default.createElement("div",null)),e.default.createElement(s.default,{primary:_("account-settings.manage-signers.signers-editor.threshold.primary"),secondary:_("account-settings.manage-signers.signers-editor.threshold.secondary"),style:{flexGrow:0,marginRight:32}}),e.default.createElement(s.default,null,e.default.createElement(w.default,{inputRef:P}))),e.default.createElement(n.default,null)):null)}var P=exports.default=L;
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/IconButton":"e0Nd","@material-ui/core/Divider":"pRXd","@material-ui/core/List":"HMJ1","@material-ui/core/ListItem":"vro7","@material-ui/core/ListItemIcon":"lJBu","@material-ui/core/ListItemSecondaryAction":"CiZX","@material-ui/core/ListItemText":"FcKO","@material-ui/icons/Add":"NKXr","@material-ui/icons/Person":"O2sZ","@material-ui/icons/RemoveCircle":"PY4V","~App/contexts/accounts":"zZfI","~App/contexts/notifications":"bqF5","~Generic/components/ButtonListItem":"aP5r","~Generic/components/PublicKey":"ANfc","~Generic/hooks/stellar":"tg2C","~Generic/hooks/userinterface":"rVD3","~Generic/lib/stellar-address":"yUAx","../lib/editor":"zXIu","./MultisigEditorContext":"dRfh","./NewSignerForm":"Fvm1","./ThresholdInput":"d8O7"}],"Kwsn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@material-ui/core/List")),t=c(require("@material-ui/core/ListItem")),r=c(require("@material-ui/core/ListItemIcon")),a=c(require("@material-ui/core/ListItemText")),l=c(require("@material-ui/core/Radio")),u=c(require("@material-ui/core/RadioGroup")),i=c(require("react")),n=require("react-i18next"),s=require("~Generic/components/PublicKey");function c(e){return e&&e.__esModule?e:{default:e}}function d(c){var d,o=(0,n.useTranslation)().t;return i.default.createElement(u.default,{value:(null===(d=c.selected)||void 0===d?void 0:d.key)||""},i.default.createElement(e.default,null,c.signers.map(e=>i.default.createElement(t.default,{button:!0,key:e.key,onClick:()=>c.onSelect(e)},i.default.createElement(r.default,null,i.default.createElement(l.default,{edge:"start",value:e.key})),i.default.createElement(a.default,{primary:i.default.createElement(s.Address,{address:e.key,variant:"full",testnet:c.testnet}),secondary:c.accounts.some(t=>t.publicKey===e.key&&t.testnet===c.testnet)?i.default.createElement("span",null,o("account-settings.manage-signers.signers-editor.list.item.local-key")):null})))))}var o=exports.default=i.default.memo(d);
},{"@material-ui/core/List":"HMJ1","@material-ui/core/ListItem":"vro7","@material-ui/core/ListItemIcon":"lJBu","@material-ui/core/ListItemText":"FcKO","@material-ui/core/Radio":"BG1G","@material-ui/core/RadioGroup":"k1RN","react":"n8MK","react-i18next":"LuhD","~Generic/components/PublicKey":"ANfc"}],"OVNf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@material-ui/core/Typography")),t=p(require("@material-ui/icons/Check")),r=p(require("react")),n=require("react-i18next"),i=require("~App/contexts/accounts"),a=require("~Generic/components/DialogActions"),s=p(require("~Generic/components/Portal")),o=require("~Generic/hooks/stellar-subscriptions"),u=require("~Generic/hooks/userinterface"),l=require("~Layout/components/Box"),c=require("../lib/editor"),g=require("./MultisigEditorContext"),d=p(require("./SignersEditor")),f=p(require("./SignerSelector"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return x(e)||v(e,t)||b(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,s,o=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function x(e){if(Array.isArray(e))return e}var O=r.default.memo(function(t){var i=(0,n.useTranslation)().t,a="",s="";return t.preset.type===c.MultisigPresets.Type.SingleSignature?a=i("account-settings.manage-signers.preset-description.single-signature"):t.preset.type===c.MultisigPresets.Type.OneOutOfN?a=i("account-settings.manage-signers.preset-description.one-out-of-n"):t.preset.type===c.MultisigPresets.Type.MOutOfN&&(a=i("account-settings.manage-signers.preset-description.m-out-of-n",{count:t.preset.requiredKeyWeight||0})),t.preset.type===c.MultisigPresets.Type.SingleSignature||(t.preset.type===c.MultisigPresets.Type.OneOutOfN?s=i("account-settings.manage-signers.preset-description-extra.one-out-of-n"):t.preset.type===c.MultisigPresets.Type.MOutOfN&&(s=i("account-settings.manage-signers.preset-description-extra.m-out-of-n"))),r.default.createElement(r.default.Fragment,null,r.default.createElement(e.default,{align:"center",color:"textSecondary",gutterBottom:!0},a),s?r.default.createElement(e.default,{align:"center",color:"textSecondary"},s):null)});function E(e){var p,y=m(r.default.useState(),2),b=y[0],S=y[1],v=(0,n.useTranslation)().t,x=r.default.useContext(i.AccountsContext).accounts,E=r.default.useContext(g.MultisigEditorContext),h=E.accountID,q=E.editorState,M=E.setEditorState,A=E.testnet,T=(0,o.useLiveAccountData)(h,A),j=(0,u.useIsMobile)(),C=q.preset.type===c.MultisigPresets.Type.SingleSignature&&T.signers.length>1,P=r.default.useCallback(e=>{S(e),M(t=>Object.assign(Object.assign({},t),{signersToAdd:[],signersToRemove:T.signers.filter(t=>t.key!==e.key)}))},[T,M]),k=e.disabled||C&&!b;return r.default.createElement(l.VerticalLayout,null,C?r.default.createElement(f.default,{accounts:x,onSelect:P,selected:b,signers:T.signers,testnet:A}):r.default.createElement(d.default,Object.assign({},e)),r.default.createElement(l.Box,{margin:"32px 0 0"},r.default.createElement(O,{preset:q.preset})),r.default.createElement(s.default,{target:null===(p=e.actionsRef)||void 0===p?void 0:p.element},r.default.createElement(a.DialogActionsBox,{desktopStyle:{margin:0}},r.default.createElement(a.ActionButton,{disabled:k,icon:r.default.createElement(t.default,null),onClick:e.onSubmit,type:"submit"},v(j?"account-settings.manage-signers.action.apply.short":"account-settings.manage-signers.action.apply.long")))))}var h=exports.default=r.default.memo(E);
},{"@material-ui/core/Typography":"pi2F","@material-ui/icons/Check":"FMA7","react":"n8MK","react-i18next":"LuhD","~App/contexts/accounts":"zZfI","~Generic/components/DialogActions":"wklB","~Generic/components/Portal":"eTJ5","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Layout/components/Box":"YhZi","../lib/editor":"zXIu","./MultisigEditorContext":"dRfh","./SignersEditor":"TKJ5","./SignerSelector":"Kwsn"}],"QuYG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("react")),t=require("react-i18next"),r=y(require("@material-ui/core/List")),n=y(require("@material-ui/core/ListItemText")),i=y(require("@material-ui/core/Radio")),a=y(require("@material-ui/core/RadioGroup")),s=y(require("@material-ui/core/Typography")),o=y(require("@material-ui/icons/KeyboardArrowRight")),u=y(require("~AccountSettings/components/AccountSettingsItem")),l=require("~Generic/components/DialogActions"),c=y(require("~Generic/components/Portal")),g=require("~Generic/hooks/stellar-subscriptions"),d=require("~Layout/components/Box"),m=require("../lib/editor"),p=require("./MultisigEditorContext");function y(e){return e&&e.__esModule?e:{default:e}}var f=e.default.memo(function(t){return e.default.createElement(u.default,{icon:e.default.createElement(i.default,{checked:t.selected,color:"primary",onChange:t.onChange}),onClick:t.onChange},e.default.createElement(n.default,{primary:t.primary,secondary:t.secondary}))});function h(n){var i,u=e.default.useContext(p.MultisigEditorContext),y=u.accountID,h=u.editorState,E=u.setEditorState,q=u.testnet,M=(0,t.useTranslation)().t,O=(0,g.useLiveAccountData)(y,q),C=Math.min(...O.signers.map(e=>e.weight)),S=h.preset.type!==m.MultisigPresets.Type.SingleSignature||O.signers.length>1,v=e=>E(t=>Object.assign(Object.assign({},t),{preset:e}));return e.default.createElement(d.VerticalLayout,null,e.default.createElement(s.default,{gutterBottom:!0,style:{marginLeft:8,marginRight:8},variant:"h6"},M("account-settings.manage-signers.preset-selector.title")),e.default.createElement(a.default,null,e.default.createElement(r.default,{style:n.style},e.default.createElement(f,{onChange:()=>v({type:m.MultisigPresets.Type.SingleSignature}),primary:M("account-settings.manage-signers.preset-selector.options.single-signature.primary"),selected:h.preset.type===m.MultisigPresets.Type.SingleSignature,secondary:M("account-settings.manage-signers.preset-selector.options.single-signature.secondary")}),e.default.createElement(f,{onChange:()=>v({requiredKeyWeight:O.thresholds.high_threshold||C,type:m.MultisigPresets.Type.MOutOfN}),primary:M("account-settings.manage-signers.preset-selector.options.m-out-of-n.primary"),selected:h.preset.type===m.MultisigPresets.Type.MOutOfN,secondary:M("account-settings.manage-signers.preset-selector.options.m-out-of-n.secondary")}),e.default.createElement(f,{onChange:()=>v({type:m.MultisigPresets.Type.OneOutOfN}),primary:M("account-settings.manage-signers.preset-selector.options.one-out-of-n.primary"),selected:h.preset.type===m.MultisigPresets.Type.OneOutOfN,secondary:M("account-settings.manage-signers.preset-selector.options.one-out-of-n.secondary")}))),e.default.createElement(c.default,{target:null===(i=n.actionsRef)||void 0===i?void 0:i.element},e.default.createElement(l.DialogActionsBox,{desktopStyle:{margin:0}},e.default.createElement(l.ActionButton,{disabled:!S,icon:e.default.createElement(o.default,null),onClick:n.onProceed,type:"submit"},M("account-settings.manage-signers.action.proceed")))))}var E=exports.default=e.default.memo(h);
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/List":"HMJ1","@material-ui/core/ListItemText":"FcKO","@material-ui/core/Radio":"BG1G","@material-ui/core/RadioGroup":"k1RN","@material-ui/core/Typography":"pi2F","@material-ui/icons/KeyboardArrowRight":"dRkY","~AccountSettings/components/AccountSettingsItem":"OsYW","~Generic/components/DialogActions":"wklB","~Generic/components/Portal":"eTJ5","~Generic/hooks/stellar-subscriptions":"aNYm","~Layout/components/Box":"YhZi","../lib/editor":"zXIu","./MultisigEditorContext":"dRfh"}],"aKx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("react")),t=require("~App/contexts/notifications"),r=g(require("~App/routes")),o=require("~Generic/hooks/stellar-subscriptions"),n=require("~Generic/hooks/userinterface"),s=require("~Generic/lib/errors"),i=require("~Generic/lib/routes"),u=y(require("~Layout/components/Carousel")),a=y(require("~Layout/components/DialogBody")),l=require("~ManageSigners/lib/editor"),c=y(require("~Transaction/components/TransactionSender")),d=y(require("./DetailsEditor")),h=require("./MultisigEditorContext"),f=y(require("./PresetSelector"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=n?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(o,s,i):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r,o,n,s,i){try{var u=e[s](i),a=u.value}catch(l){return void r(l)}u.done?t(a):Promise.resolve(a).then(o,n)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var s=e.apply(t,r);function i(e){m(s,o,n,i,u,"next",e)}function u(e){m(s,o,n,i,u,"throw",e)}i(void 0)})}}function O(e,t,r){var o=t.map(e=>e.key),n=r.map(e=>e.key),s=[...e.signers.filter(e=>-1===o.indexOf(e.key)).filter(e=>-1===n.indexOf(e.key)),...t];return[...s.filter(t=>t.key!==e.id).reverse(),...s.filter(t=>t.key===e.id)]}function T(e,t){return e.type===l.MultisigPresets.Type.SingleSignature?0:e.type===l.MultisigPresets.Type.OneOutOfN?Math.min(...t.map(e=>e.weight)):e.type===l.MultisigPresets.Type.MOutOfN?e.requiredKeyWeight:e.thresholds.high_threshold}function S(e,t){var r=e.reduce((e,t)=>e+t.weight,0);if(t<0||t<1&&e.length>1)throw(0,s.CustomError)("MultiSigConfigThresholdTooLowError","Signature threshold too low.");if(t>r)throw(0,s.CustomError)("MultiSigConfigThresholdLockError","Signature threshold too high. You would lock your account.")}function M(s){var l=e.default.useContext(h.MultisigEditorContext),c=l.accountID,p=l.applyUpdate,g=l.currentStep,y=l.editorState,m=l.setEditorState,M=l.switchToStep,w=l.testnet,b=(0,o.useLiveAccountData)(c,w),E=(0,n.useDialogActions)(),q=(0,n.useRouter)(),_=e.default.useRef(y),k=O(b,y.signersToAdd,y.signersToRemove),P=k.every(e=>1===e.weight),C=e.default.useCallback(()=>{q.history.push(r.manageAccountSignersDetails(s.account.id)),M(h.Step.Signers)},[s.account.id,q.history,M]),A=e.default.useCallback(()=>{m(e=>Object.assign(Object.assign({},e),{signersToRemove:[],signersToAdd:[]})),M(h.Step.Presets)},[M,m]);e.default.useEffect(()=>{(0,i.matchesRoute)(q.location.pathname,r.manageAccountSigners(s.account.id),!0)&&A()},[q.location.pathname,s.account.id,A]);var j=function(){var e=v(function*(){try{var e=T(y.preset,k);S(k,e),yield p({signersToAdd:y.signersToAdd,signersToRemove:y.signersToRemove,weightThreshold:e}),_.current=y,m(e=>Object.assign(Object.assign({},e),{signersToAdd:[],signersToRemove:[]}))}catch(r){(0,t.trackError)(r)}});return function(){return e.apply(this,arguments)}}(),R=e.default.useMemo(()=>{var e=_.current,t="Custom"===y.preset.type&&"Custom"===e.preset.type?y.preset.thresholds.high_threshold===e.preset.thresholds.high_threshold&&y.preset.thresholds.med_threshold===e.preset.thresholds.med_threshold&&y.preset.thresholds.low_threshold===e.preset.thresholds.low_threshold:"MOutOfN"===y.preset.type&&"MOutOfN"===e.preset.type?y.preset.requiredKeyWeight===e.preset.requiredKeyWeight:y.preset.type===e.preset.type;return("Custom"===y.preset.type||"MOutOfN"===y.preset.type)&&b.signers.length+y.signersToAdd.length<2||0===y.signersToAdd.length&&0===y.signersToRemove.length&&t},[b,y]);return e.default.createElement(a.default,{actions:E},e.default.createElement(u.default,{current:g===h.Step.Signers?1:0},e.default.createElement(f.default,{actionsRef:g===h.Step.Presets?E:void 0,onProceed:C,style:{marginBottom:24}}),e.default.createElement(d.default,{actionsRef:g===h.Step.Signers?E:void 0,disabled:R,onSubmit:j,signers:k,showKeyWeights:!P,testnet:w})))}function w(t){return e.default.createElement(c.default,{account:t.account},r=>{var o=r.horizon,n=r.sendTransaction;return e.default.createElement(h.MultisigEditorProvider,{account:t.account,horizon:o,sendTransaction:n},e.default.createElement(M,{account:t.account,onCancel:t.onClose}))})}var b=exports.default=e.default.memo(w);
},{"react":"n8MK","~App/contexts/notifications":"bqF5","~App/routes":"kQ9N","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Generic/lib/errors":"U9Sl","~Generic/lib/routes":"uNGg","~Layout/components/Carousel":"L9yD","~Layout/components/DialogBody":"krjO","~ManageSigners/lib/editor":"zXIu","~Transaction/components/TransactionSender":"bNi5","./DetailsEditor":"OVNf","./MultisigEditorContext":"dRfh","./PresetSelector":"QuYG"}],"PF0Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("react")),t=r(require("@material-ui/core/SvgIcon"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function u(r){return e.createElement(t.default,Object.assign({transform:"rotate(90)",viewBox:"0 0 24 20"},r),e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e.createElement("path",{d:"M17 20.41L18.41 19 15 15.59 13.59 17 17 20.41zM7.5 8H11v5.59L5.59 19 7 20.41l6-6V8h3.5L12 3.5 7.5 8z"})))}var a=exports.default=u;
},{"react":"n8MK","@material-ui/core/SvgIcon":"R8TJ"}],"ZxM0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("react")),t=require("react-i18next"),n=require("stellar-sdk"),o=v(require("@material-ui/core/DialogContent")),a=v(require("@material-ui/core/DialogContentText")),c=v(require("@material-ui/core/Switch")),r=v(require("@material-ui/core/Typography")),l=v(require("@material-ui/icons/Delete")),i=v(require("@material-ui/icons/Warning")),u=v(require("~Account/components/AccountSelectionList")),s=require("~App/contexts/accounts"),d=require("~Generic/lib/transaction"),f=require("~Generic/hooks/stellar-subscriptions"),m=require("~Generic/hooks/userinterface"),g=require("~Generic/components/DialogActions"),p=v(require("~Generic/components/MainTitle")),y=v(require("~Icons/components/Merge")),b=v(require("~Layout/components/DialogBody")),C=require("~Layout/components/Box"),h=v(require("~Transaction/components/TransactionSender"));function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,o,a,c,r){try{var l=e[c](r),i=l.value}catch(u){return void n(u)}l.done?t(i):Promise.resolve(i).then(o,a)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var c=e.apply(t,n);function r(e){E(c,o,a,r,l,"next",e)}function l(e){E(c,o,a,r,l,"throw",e)}r(void 0)})}}function A(e,t){return S(e)||B(e,t)||D(e,t)||q()}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function B(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,c,r,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(o=c.call(n)).done)&&(l.push(o.value),l.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(u)throw a}}return l}}function S(e){if(Array.isArray(e))return e}var T={color:"red"},w=e.default.memo(function(n){var o=(0,t.useTranslation)().t;return e.default.createElement(g.ConfirmDialog,{cancelButton:e.default.createElement(g.ActionButton,{onClick:n.onCancel},o("account-settings.account-deletion.action.cancel")),confirmButton:e.default.createElement(g.ActionButton,{onClick:n.onConfirm,type:"primary"},o("account-settings.account-deletion.action.confirm")),open:n.open,onClose:n.onClose,title:o("account-settings.account-deletion.confirm.title")},o("account-settings.account-deletion.confirm.text.delete"),n.merging?" ".concat(o("account-settings.account-deletion.confirm.text.merge"),". "):". ",o("account-settings.account-deletion.confirm.text.confirm"))}),I=e.default.memo(function(n){var o=(0,t.useTranslation)().t;return e.default.createElement(g.ConfirmDialog,{cancelButton:null,confirmButton:e.default.createElement(g.ActionButton,{onClick:n.onClose,type:"primary"},o("account-settings.account-deletion.warning-dialog.close.label")),onClose:n.onClose,open:n.open,title:n.title},n.warning)});function M(h){var v=(0,f.useLiveAccountData)(h.account.accountID,h.account.testnet),E=h.horizon,q=e.default.useContext(s.AccountsContext).accounts,D=A(e.default.useState(!1),2),k=D[0],B=D[1],S=A(e.default.useState(!1),2),M=S[0],j=S[1],O=A(e.default.useState(null),2),L=O[0],z=O[1],G=A(e.default.useState(),2),_=G[0],K=G[1],F=(0,t.useTranslation)().t,P=(0,m.useIsMobile)(),N=(0,m.useIsSmallMobile)(),W=e.default.useCallback(()=>j(!1),[j]),H=e.default.useCallback(()=>B(e=>!e),[]),U=e.default.useCallback(()=>{K(e=>e?Object.assign(Object.assign({},e),{open:!1}):void 0)},[K]),$=function(){var e=x(function*(){if(L){var e=yield(0,d.createTransaction)([n.Operation.accountMerge({source:h.account.accountID,destination:L.publicKey,withMuxing:!0})],{accountData:v,horizon:E,walletAccount:h.account});yield h.sendTransaction(e)}});return function(){return e.apply(this,arguments)}}(),J=e.default.useCallback(()=>{k&&v.subentry_count>0?K({open:!0,text:F("account-settings.account-deletion.warnings.cannot-merge.text"),title:F("account-settings.account-deletion.warnings.cannot-merge.title")}):j(!0)},[v,k,j,K,F]),Q=e.default.useMemo(()=>v.balances.length>0?e.default.createElement(e.default.Fragment,null,e.default.createElement(C.HorizontalLayout,{alignItems:"center",style:{marginTop:24,marginLeft:-12,marginBottom:8}},e.default.createElement(c.default,{color:"primary",checked:k,onChange:H}),e.default.createElement(r.default,{onClick:H,variant:"h6",style:{display:"flex",alignItems:"center",height:48,cursor:"pointer",fontSize:P?16:20,marginLeft:8}},F("account-settings.account-deletion.remaining-funds.text"))),e.default.createElement(u.default,{disabled:!k,accounts:q.filter(e=>e.accountID!==h.account.accountID&&e.publicKey!==h.account.publicKey&&e.testnet===h.account.testnet),testnet:h.account.testnet,onChange:z})):null,[v.balances.length,k,H,P,F,q,h.account.accountID,h.account.publicKey,h.account.testnet]);return e.default.createElement(b.default,{background:e.default.createElement(i.default,{style:{fontSize:160}}),noMaxWidth:!0,preventNotchSpacing:!0,top:e.default.createElement(p.default,{hideBackButton:!0,title:e.default.createElement("span",{style:T},F("account-settings.account-deletion.title")),titleColor:"inherit",onBack:h.onClose,style:{marginTop:0,marginLeft:0}}),actions:e.default.createElement(g.DialogActionsBox,null,k?e.default.createElement(g.ActionButton,{autoFocus:!0,disabled:!L,icon:e.default.createElement(y.default,null),onClick:J,type:"primary"},F(N?"account-settings.account-deletion.action.merge.short":"account-settings.account-deletion.action.merge.long")):e.default.createElement(g.ActionButton,{autoFocus:!0,icon:e.default.createElement(l.default,null),onClick:J,type:"primary"},F("account-settings.account-deletion.action.delete")))},e.default.createElement(o.default,{style:{padding:0}},e.default.createElement(a.default,{style:{marginTop:8}},F("account-settings.account-deletion.text.1",{accountName:h.account.name})),e.default.createElement(a.default,{style:{display:v.balances.length>0?void 0:"none",marginTop:16}},F("account-settings.account-deletion.text.2")),Q,e.default.createElement(w,{merging:k,onCancel:W,onClose:W,onConfirm:()=>{j(!1),k?$():h.onDelete()},open:M}),e.default.createElement(I,{onClose:U,open:Boolean(null==_?void 0:_.open),title:(null==_?void 0:_.title)||"",warning:null==_?void 0:_.text})))}function j(t){var n=e.default.useContext(s.AccountsContext).deleteAccount,o=()=>{n(t.account.id),t.onClose(),t.onDeleted()};return e.default.createElement(h.default,{account:t.account,onSubmissionCompleted:o},n=>e.default.createElement(M,Object.assign({},t,n,{onDelete:o})))}var O=exports.default=j;
},{"react":"n8MK","react-i18next":"LuhD","stellar-sdk":"n9dh","@material-ui/core/DialogContent":"lTXJ","@material-ui/core/DialogContentText":"Gmh9","@material-ui/core/Switch":"GFmN","@material-ui/core/Typography":"pi2F","@material-ui/icons/Delete":"zZip","@material-ui/icons/Warning":"MrXR","~Account/components/AccountSelectionList":"yjiP","~App/contexts/accounts":"zZfI","~Generic/lib/transaction":"abl7","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Generic/components/DialogActions":"wklB","~Generic/components/MainTitle":"hwFi","~Icons/components/Merge":"PF0Y","~Layout/components/DialogBody":"krjO","~Layout/components/Box":"YhZi","~Transaction/components/TransactionSender":"bNi5"}],"U0Uu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=P(require("react")),t=require("react-i18next"),r=P(require("@material-ui/core/DialogActions")),s=P(require("@material-ui/core/FormControlLabel")),a=P(require("@material-ui/core/InputAdornment")),o=P(require("@material-ui/core/Switch")),n=P(require("@material-ui/icons/LockOutlined")),i=P(require("@material-ui/icons/LockOpenOutlined")),l=require("~App/contexts/accounts"),c=require("~App/contexts/notifications"),d=require("~Generic/hooks/userinterface"),u=require("~Generic/lib/errors"),p=require("~Generic/components/DialogActions"),w=P(require("~Generic/components/MainTitle")),m=P(require("~Generic/components/PasswordField")),f=require("~Layout/components/Box"),g=P(require("~Layout/components/DialogBody"));function P(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return E(e)||y(e,t)||h(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function y(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,a,o,n,i=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(s=o.call(r)).done)&&(i.push(s.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw a}}return i}}function E(e){if(Array.isArray(e))return e}var q=e.default.createElement(a.default,{position:"start"},e.default.createElement(n.default,{color:"disabled"})),A=e.default.createElement(a.default,{position:"start"},e.default.createElement(i.default,{color:"disabled"}));function C(){var e=(0,t.useTranslation)().t;return function(t,r){var s={};return t.prevPassword||"initial"===r||(s.prevPassword=new Error(e("account-settings.set-password.validation.previous-password-missing"))),"remove"!==r&&(t.nextPassword||(s.nextPassword=new Error(e("account-settings.set-password.validation.next-password-missing"))),t.nextPasswordRepeat||(s.nextPasswordRepeat=new Error(e("account-settings.set-password.validation.next-password-repeat-missing"))),t.nextPasswordRepeat&&t.nextPassword!==t.nextPasswordRepeat&&(s.nextPasswordRepeat=new Error(e("account-settings.set-password.validation.passwords-no-match")))),{errors:s,success:0===Object.keys(s).length}}}function R(r){var a=(0,d.useIsMobile)(),i=(0,t.useTranslation)().t;return e.default.createElement(p.DialogActionsBox,{smallDialog:!0},r.isPasswordProtected?a?e.default.createElement(p.ActionButton,{onClick:r.onToggleRemovePassword,type:"secondary"},r.removePassword?i("account-settings.set-password.action.change-password.long"):i("account-settings.set-password.action.remove-password.long")):e.default.createElement(s.default,{control:e.default.createElement(o.default,{checked:r.removePassword,color:"primary",onChange:r.onToggleRemovePassword}),label:i("account-settings.set-password.action.remove-password.long")}):null,e.default.createElement(p.ActionButton,{icon:e.default.createElement(n.default,null),onClick:r.onSubmit,type:"primary"},a?r.removePassword?i("account-settings.set-password.action.remove-password.long"):i("account-settings.set-password.action.change-password.short"):r.removePassword?i("account-settings.set-password.action.remove-password.long"):i("account-settings.set-password.action.change-password.long")))}function B(s){var a=e.default.useContext(l.AccountsContext),o=e.default.useContext(c.NotificationsContext),n=o.showError,i=o.showNotification,d=v(e.default.useState({}),2),p=d[0],P=d[1],x=v(e.default.useState({nextPassword:"",nextPasswordRepeat:"",prevPassword:""}),2),h=x[0],b=x[1],y=v(e.default.useState(!1),2),E=y[0],B=y[1],S=C(),k=(0,t.useTranslation)().t,O=(e,t)=>{b(Object.assign(Object.assign({},h),{[e]:t}))};return e.default.createElement(g.default,{noMaxWidth:!0,preventNotchSpacing:!0,top:e.default.createElement(w.default,{hideBackButton:!0,onBack:()=>{s.onClose(),b({nextPassword:"",nextPasswordRepeat:"",prevPassword:""})},title:s.account.requiresPassword?k("account-settings.set-password.title.change-password"):k("account-settings.set-password.title.set-password")}),actions:e.default.createElement(r.default,{style:{margin:"32px 0 0"}},e.default.createElement(R,{isPasswordProtected:s.account.requiresPassword,onSubmit:E?()=>{var e=S(h,"remove");P(e.errors),e.success&&a.removePassword(s.account.id,h.prevPassword).then(()=>{i("success",k("account-settings.set-password.notification.password-removed")),s.onClose()}).catch(e=>{(0,u.isWrongPasswordError)(e)?P({prevPassword:e}):n(e)})}:()=>{var e=s.account,t=e.id,r=e.requiresPassword,o=h.nextPassword,l=h.prevPassword,c=S(h,r?"change":"initial");P(c.errors),c.success&&a.changePassword(t,l,o).then(()=>{i("success",k(r?"account-settings.set-password.notification.password-changed":"account-settings.set-password.notification.password-set")),s.onClose()}).catch(e=>{(0,u.isWrongPasswordError)(e)?P({prevPassword:e}):n(e)})},onToggleRemovePassword:()=>B(!E),removePassword:E}))},e.default.createElement(f.HorizontalLayout,{alignSelf:"center",justifyContent:"space-evenly",margin:"24px 0 0",width:"calc(100% + 16px)",wrap:"wrap"},e.default.createElement(f.Box,{basis:"400px",grow:0,hidden:!s.account.requiresPassword,margin:"0 16px",shrink:!0},e.default.createElement(m.default,{autoFocus:s.account.requiresPassword&&!0,error:Boolean(p.prevPassword),label:p.prevPassword?(0,u.renderFormFieldError)(p.prevPassword,k):k("account-settings.set-password.textfield.prev-password.label"),fullWidth:!0,margin:"normal",value:h.prevPassword,onChange:e=>O("prevPassword",e.target.value),InputProps:{startAdornment:A}})),e.default.createElement(f.Box,{basis:"400px",grow:0,hidden:E,margin:"0 16px",shrink:!0},e.default.createElement(m.default,{autoFocus:!s.account.requiresPassword&&!0,error:Boolean(p.nextPassword),label:p.nextPassword?(0,u.renderFormFieldError)(p.nextPassword,k):k("account-settings.set-password.textfield.next-password.label"),fullWidth:!0,margin:"normal",value:h.nextPassword,onChange:e=>O("nextPassword",e.target.value),InputProps:{startAdornment:q}}),e.default.createElement(m.default,{error:Boolean(p.nextPasswordRepeat),label:p.nextPasswordRepeat?(0,u.renderFormFieldError)(p.nextPasswordRepeat,k):k("account-settings.set-password.textfield.next-password-repeat.label"),fullWidth:!0,margin:"normal",value:h.nextPasswordRepeat,onChange:e=>O("nextPasswordRepeat",e.target.value),InputProps:{startAdornment:q}}))))}var S=exports.default=e.default.memo(B);
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/DialogActions":"dDut","@material-ui/core/FormControlLabel":"SR7c","@material-ui/core/InputAdornment":"lydx","@material-ui/core/Switch":"GFmN","@material-ui/icons/LockOutlined":"s6Bm","@material-ui/icons/LockOpenOutlined":"xgsl","~App/contexts/accounts":"zZfI","~App/contexts/notifications":"bqF5","~Generic/hooks/userinterface":"rVD3","~Generic/lib/errors":"U9Sl","~Generic/components/DialogActions":"wklB","~Generic/components/MainTitle":"hwFi","~Generic/components/PasswordField":"MH1m","~Layout/components/Box":"YhZi","~Layout/components/DialogBody":"krjO"}],"d4Uj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=q(require("react")),t=require("react-i18next"),n=q(require("@material-ui/core/List")),a=q(require("@material-ui/core/ListItemText")),c=q(require("@material-ui/icons/RemoveRedEye")),r=q(require("@material-ui/icons/Delete")),o=q(require("@material-ui/icons/Group")),u=q(require("@material-ui/icons/VpnKey")),s=require("~App/contexts/settings"),i=v(require("~App/routes")),l=require("~Generic/components/PublicKey"),d=require("~Generic/hooks/stellar-subscriptions"),f=require("~Generic/hooks/userinterface"),g=require("~Generic/lib/routes"),m=q(require("~Layout/components/Carousel")),p=q(require("~ManageSigners/components/ManageSignersDialog")),y=q(require("./AccountDeletionDialog")),h=q(require("./AccountSettingsItem")),x=q(require("./ChangePasswordDialog")),E=q(require("./ExportKeyDialog"));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=c?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}function q(e){return e&&e.__esModule?e:{default:e}}function b(t){var n=(0,f.useRouter)(),a=(0,g.matchesRoute)(n.location.pathname,i.changeAccountPassword("*")),c=(0,g.matchesRoute)(n.location.pathname,i.deleteAccount("*")),r=(0,g.matchesRoute)(n.location.pathname,i.exportSecretKey("*")),o=(0,g.matchesRoute)(n.location.pathname,i.manageAccountSigners("*")),u=e.default.useMemo(()=>({accountSettings:()=>n.history.push(i.accountSettings(t.account.id)),allAccounts:()=>n.history.push(i.allAccounts())}),[n.history,t.account]);return e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:{display:a?void 0:"none",height:"100%"}},e.default.createElement(x.default,{account:t.account,onClose:u.accountSettings})),e.default.createElement("div",{style:{display:c?void 0:"none",height:"100%"}},e.default.createElement(y.default,{account:t.account,onClose:u.accountSettings,onDeleted:u.allAccounts})),e.default.createElement("div",{style:{display:r?void 0:"none",height:"100%"}},e.default.createElement(E.default,{account:t.account,onClose:u.accountSettings,variant:"export"})),e.default.createElement("div",{style:{display:o?void 0:"none",height:"100%"}},e.default.createElement(p.default,{account:t.account,onClose:u.accountSettings})))}function k(n){var c=(0,d.useLiveAccountData)(n.account.accountID,n.account.testnet),r=(0,f.useIsMobile)(),u=(0,t.useTranslation)().t,s=Boolean(!c.balances.length||!c.signers.some(e=>e.key===n.account.publicKey)),i=n.account.cosignerOf?e.default.createElement(e.default.Fragment,null,u("account-settings.settings.multi-sig.text.secondary.cosigner-of")," ",e.default.createElement(l.Address,{address:n.account.cosignerOf,testnet:n.account.testnet})):u(r?"account-settings.settings.multi-sig.text.secondary.short":"account-settings.settings.multi-sig.text.secondary.long");return e.default.createElement(h.default,{caret:"right",disabled:s,icon:e.default.createElement(o.default,{style:{fontSize:"100%"}}),onClick:n.onClick},e.default.createElement(a.default,{primary:u("account-settings.settings.multi-sig.text.primary"),secondary:i,style:n.listItemTextStyle}))}function A(n){(0,d.useLiveAccountData)(n.account.publicKey,n.account.testnet);var c=(0,t.useTranslation)().t;return e.default.createElement(h.default,{caret:"right",icon:e.default.createElement(r.default,{style:{fontSize:"100%"}}),onClick:n.onClick},e.default.createElement(a.default,{primary:c("account-settings.settings.delete-account.text.primary"),style:n.listItemTextStyle}))}function w(r){var o=(0,f.useIsMobile)(),l=(0,f.useRouter)(),d=(0,t.useTranslation)().t,p=e.default.useContext(s.SettingsContext),y=e.default.useMemo(()=>({changePassword:()=>l.history.push(i.changeAccountPassword(r.account.id)),deleteAccount:()=>l.history.push(i.deleteAccount(r.account.id)),exportSecretKey:()=>l.history.push(i.exportSecretKey(r.account.id)),manageSigners:()=>l.history.push(i.manageAccountSigners(r.account.id))}),[l.history,r.account]),x=(0,g.matchesRoute)(l.location.pathname,i.accountSettings(r.account.id),!0),E=e.default.useMemo(()=>({paddingRight:o?0:void 0}),[o]);return e.default.createElement(m.default,{current:x?0:1},e.default.createElement(n.default,{style:{padding:o?0:"24px 16px"}},e.default.createElement(h.default,{caret:"right",icon:e.default.createElement(u.default,{style:{fontSize:"100%"}}),onClick:y.changePassword},e.default.createElement(a.default,{primary:r.account.requiresPassword?d("account-settings.settings.set-password.text.primary.account-protected"):d("account-settings.settings.set-password.text.primary.account-not-protected"),secondary:r.account.requiresPassword?d("account-settings.settings.set-password.text.secondary.account-protected"):d("account-settings.settings.set-password.text.secondary.account-not-protected"),style:E})),p.multiSignature?e.default.createElement(e.default.Suspense,{fallback:null},e.default.createElement(k,Object.assign({},r,{listItemTextStyle:E,onClick:y.manageSigners}))):null,e.default.createElement(h.default,{caret:"right",icon:e.default.createElement(c.default,{style:{fontSize:"100%"}}),onClick:y.exportSecretKey},e.default.createElement(a.default,{primary:d("account-settings.settings.export-secret-key.text.primary"),secondary:d("account-settings.settings.export-secret-key.text.secondary"),style:E})),e.default.createElement(e.default.Suspense,{fallback:null},e.default.createElement(A,Object.assign({},r,{listItemTextStyle:E,onClick:y.deleteAccount})))),e.default.createElement(b,{account:r.account}))}var C=exports.default=e.default.memo(w);
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/List":"HMJ1","@material-ui/core/ListItemText":"FcKO","@material-ui/icons/RemoveRedEye":"MED6","@material-ui/icons/Delete":"zZip","@material-ui/icons/Group":"E6XM","@material-ui/icons/VpnKey":"nlgo","~App/contexts/settings":"a27z","~App/routes":"kQ9N","~Generic/components/PublicKey":"ANfc","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Generic/lib/routes":"uNGg","~Layout/components/Carousel":"L9yD","~ManageSigners/components/ManageSignersDialog":"aKx6","./AccountDeletionDialog":"ZxM0","./AccountSettingsItem":"OsYW","./ChangePasswordDialog":"U0Uu","./ExportKeyDialog":"gF6z"}]},{},[], null)