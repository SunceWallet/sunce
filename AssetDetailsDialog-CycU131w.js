import{R as e,$ as f,bZ as Y,bz as V,a0 as R,a1 as g,aX as Z,a6 as p,aM as L,a2 as j,Y as w,au as _,aZ as K,a$ as X,ap as T,bx as J,Z as N,H as U,ax as D,ai as y,b_ as k,bq as Q,a9 as ee,b9 as te,b1 as ae,aa as ne,E as se,ag as le,al as ce,aw as u,b$ as ie,by as oe,bs as re}from"./app-DK6EvuNN.js";import{T as M,D as ue,a as de,c as B,b as me,t as be,d as ge,C as ye,S as Ee,e as F,A as he,f as Te,g as C,h as O,i as fe,o as S}from"./app-stage2-CH2XB3cm.js";import{S as ve}from"./SwapHoriz-BGw00zTj.js";import{V as De}from"./VisibilityIconButton-n9NhEle-.js";const Ce=e.memo(function(n){const{t:a}=f(),[l,o]=e.useState(!1),c=async()=>{try{o(!0);const s=[p.Operation.changeTrust({asset:n.asset,limit:"0",withMuxing:!0})],d=await B(s,{accountData:n.accountData,horizon:n.horizon,walletAccount:n.account});o(!1),await n.sendTransaction(d),n.onRemoved()}catch(s){o(!1),L(s)}},i=n.accountData.balances.find(s=>s.asset_code===n.asset.getCode()&&s.asset_issuer===n.asset.getIssuer()),r=i&&parseFloat(i.balance)>0;return e.createElement(e.Fragment,null,e.createElement(Y,null,a("account.remove-trustline.title")),e.createElement(V,null,e.createElement(ue,null,r?e.createElement(e.Fragment,null,a("account.remove-trustline.text.warning")):e.createElement(de,{i18nKey:"account.remove-trustline.text.info"},"You are about to remove ",e.createElement("b",null,{asset:n.asset.code}),' from account "',{accountName:n.account.name},'".')),e.createElement(R,{preventMobileActionsBox:!0},e.createElement(g,{onClick:n.onClose,style:{maxWidth:"none"}},a("account.remove-trustline.action.cancel")),r?null:e.createElement(g,{autoFocus:!0,disabled:r,loading:l,icon:e.createElement(Z,null),onClick:c,style:{maxWidth:"none"},type:"primary"},a("account.remove-trustline.action.remove")))))});function Oe(t){return e.createElement(M,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:n,sendTransaction:a})=>e.createElement(Ce,{...t,accountData:t.accountData,horizon:n,sendTransaction:a}))}const Ie=e.memo(Oe),Ae={marginTop:8};function Ne(t){const{account:n,asset:a}=t,[l,o]=e.useState(!1),[c,i]=e.useState(!1),r=j(),{t:s}=f(),d=w(n.accountID,n.testnet),I=d.balances.find(b=>b.asset_type!=="native"&&b.asset_issuer===a.issuer&&b.asset_code===a.code),E=async(b={})=>{const h=[p.Operation.changeTrust({asset:a,limit:b.limit})];return B(h,{accountData:d,horizon:t.horizon,walletAccount:t.account})},x=e.useCallback(()=>{setTimeout(()=>r.history.push(me(t.account.id)),1300)},[t.account,r.history]),G=async b=>{try{i(!0);const h=await b();i(!1),await t.sendTransaction(h),A(),x()}catch(h){i(!1),L(h)}},$=()=>G(()=>E()),A=e.useCallback(()=>o(!1),[]),z=e.useCallback(()=>o(!0),[]),H=e.useCallback(()=>r.history.push(be(t.account.id,void 0,_(a))),[a,t.account.id,r.history]),q=e.useCallback(()=>r.history.push(ge(t.account.id,_(a))),[a,t.account.id,r.history]);return e.createElement(e.Fragment,null,e.createElement(R,{desktopStyle:Ae,smallDialog:!0},I?e.createElement(e.Fragment,null,e.createElement(g,{icon:e.createElement(ye,null),onClick:z,type:"secondary"},s("account.add-asset.action.remove")),e.createElement(g,{icon:e.createElement(ve,null),onClick:H,type:"primary"},s("account.add-asset.action.trade")),e.createElement(g,{icon:e.createElement(Ee,null),onClick:q,type:"primary"},s("account.action.send"))):e.createElement(g,{loading:c,onClick:$,type:"primary"},s("account.add-asset.action.add-asset"))),e.createElement(K,{open:l,onClose:A,TransitionComponent:X},e.createElement(Ie,{account:t.account,accountData:d,asset:a,onClose:A,onRemoved:x})))}function xe(t){return e.createElement(M,{account:t.account},({horizon:n,sendTransaction:a})=>e.createElement(Ne,{...t,horizon:n,sendTransaction:a}))}const _e=e.memo(xe),P=N({root:{padding:0},mainListItemText:{flexShrink:5},mainListItemTextIndent:{marginLeft:24,[y.down(600)]:{marginLeft:12}},mainListItemTextPrimaryTypography:{fontSize:18,fontWeight:300,overflow:"hidden",textOverflow:"ellipsis",[y.down(400)]:{fontSize:16,lineHeight:"20px"}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",[y.down(400)]:{fontSize:14},[y.down(350)]:{fontSize:12}},balanceListItem:{marginLeft:8,textAlign:"right"}});function m(t){const{variant:n="deduction"}=t,a=P();return t.hide?null:e.createElement(U,{className:a.root,style:t.style},e.createElement(D,{classes:{root:`${a.mainListItemText} ${t.indent?a.mainListItemTextIndent:""}`,primary:a.mainListItemTextPrimaryTypography,secondary:a.mainListItemTextSecondaryTypography},primary:t.primary,secondary:t.secondary}),e.createElement(D,{className:a.balanceListItem,primaryTypographyProps:{style:{fontSize:"150%"}}},n==="deduction"?"-":n==="gross"?"":"="," ",e.createElement(F,{assetCode:"",balance:t.amount})))}const Se=e.memo(function(n){const a=P();return e.createElement(U,{className:a.root,style:{borderBottom:"none"}},e.createElement(D,{classes:{root:a.mainListItemText,primary:a.mainListItemTextPrimaryTypography,secondary:a.mainListItemTextSecondaryTypography},primary:n.left}),e.createElement(D,{className:a.balanceListItem,primaryTypographyProps:{style:{fontSize:"120%",fontWeight:300}},style:{marginTop:0,marginBottom:0}},n.right))});function Re(t){const{t:n}=f(),a=t.accountData.balances.find(E=>E.asset_type==="native"),l=t.accountData.balances.filter(E=>E.asset_type!=="native"),o=t.baseReserve*Object.keys(t.accountData.data_attr).length,c=t.baseReserve*t.accountData.signers.length,i=t.baseReserve*l.length,r=a?T(a.selling_liabilities):T(0),s=T(t.accountData.subentry_count*t.baseReserve).minus(t.baseReserve*(t.accountData.signers.length-1)).minus(o).minus(i),d=a?T(a.balance):T(0),I=d.minus(t.baseReserve).minus(o).minus(s).minus(c).minus(i).minus(r);return e.createElement(J,{style:{padding:0}},e.createElement(Se,{right:n("account.balance-details.spendable-balances.headline")}),e.createElement(m,{amount:d.toFixed(4),primary:n("account.balance-details.spendable-balances.total-balance.primary"),secondary:n("account.balance-details.spendable-balances.total-balance.secondary"),style:t.style,variant:"gross"}),e.createElement(m,{amount:t.baseReserve.toFixed(1),indent:!0,primary:n("account.balance-details.spendable-balances.base-reserve.primary"),secondary:n("account.balance-details.spendable-balances.base-reserve.secondary"),style:t.style}),e.createElement(m,{amount:c.toFixed(1),indent:!0,primary:n("account.balance-details.spendable-balances.signers-reserve.primary"),secondary:t.accountData.signers.length===1?n("account.balance-details.spendable-balances.signers-reserve.secondary.single-key"):n("account.balance-details.spendable-balances.signers-reserve.secondary.multiple-keys"),style:t.style}),e.createElement(m,{amount:i.toFixed(1),hide:i===0,indent:!0,primary:n("account.balance-details.spendable-balances.trustline-reserve.primary"),secondary:n("account.balance-details.spendable-balances.trustline-reserve.secondary"),style:t.style}),e.createElement(m,{amount:s.toFixed(1),hide:s.cmp(0)===0,indent:!0,primary:n("account.balance-details.spendable-balances.open-orders-reserve.primary"),secondary:n("account.balance-details.spendable-balances.open-orders-reserve.secondary"),style:t.style}),e.createElement(m,{amount:o.toFixed(1),hide:o===0,indent:!0,primary:n("account.balance-details.spendable-balances.data-reserve.primary"),secondary:n("account.balance-details.spendable-balances.data-reserve.secondary"),style:t.style}),e.createElement(m,{amount:r.toString(),hide:r.eq(0),indent:!0,primary:n("account.balance-details.spendable-balances.selling-liabilities.primary"),secondary:n("account.balance-details.spendable-balances.selling-liabilities.secondary"),style:t.style}),e.createElement(m,{amount:I.toString(),primary:n("account.balance-details.spendable-balances.spendable-balance.primary"),secondary:n("account.balance-details.spendable-balances.spendable-balance.secondary"),style:t.style,variant:"total"}))}const pe=e.memo(Re),v=t=>t[0].toUpperCase()+t.substr(1),W=N({card:{backgroundColor:"#fbfbfb",borderRadius:8,margin:"12px -8px",overflowY:"auto"},cardContent:{position:"relative",padding:"8px 16px !important"},cardTitle:{fontSize:20,fontWeight:400,marginBottom:8},cardLogo:{position:"absolute",top:8,right:8,width:72,height:72,backgroundColor:"white",boxShadow:"0 0 2px 2px rgba(0, 0, 0, 0.2)"},cardLogoImage:{width:"100%",height:"100%"}}),Le=e.memo(function(n){const a=w(n.account.accountID,n.account.testnet),l=W(),{t:o}=f();return e.createElement(e.Fragment,null,e.createElement(C,{className:l.card},e.createElement(O,{className:l.cardContent},e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:o("account.asset-details.lumen.description.label"),multiline:!0,value:o("account.asset-details.lumen.description.text")}))),e.createElement(C,{className:l.card},e.createElement(O,{className:l.cardContent},e.createElement(pe,{account:n.account,accountData:a,baseReserve:ie}))))}),we=e.memo(function({account:n,asset:a,metadata:l}){const o=k(a.issuer,n.testnet),c=oe(o.home_domain),i=W(),r=re(),{t:s}=f(),d=e.useCallback(()=>r.copyToClipboard(a.getIssuer()),[a,r]);return e.createElement(e.Fragment,null,e.createElement(C,{className:i.card},e.createElement(O,{className:i.cardContent},l&&l.desc?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.description.label"),margin:"dense",multiline:!0,value:l.desc}):null,e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.issuing-account.label"),margin:"dense",onClick:d,value:a.getIssuer(),inputProps:{style:{cursor:"pointer",textOverflow:"ellipsis"}}}),e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.account-flags.label"),margin:"dense",multiline:!0,value:v([o.flags.auth_required?`• ${s("account.asset-details.general.account-flags.auth-required")}`:`• ${s("account.asset-details.general.account-flags.auth-not-required")}`,o.flags.auth_revocable?`• ${s("account.asset-details.general.account-flags.auth-revocable")}`:`• ${s("account.asset-details.general.account-flags.auth-not-revocable")}`,o.flags.auth_immutable?`• ${s("account.asset-details.general.account-flags.auth-immutable")}`:`• ${s("account.asset-details.general.account-flags.auth-mutable")}`].join(`
`))}),l&&l.conditions?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.conditions.label"),margin:"dense",multiline:!0,value:l.conditions}):null,l&&l.anchor_asset_type?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.anchor-asset.label"),margin:"dense",multiline:!0,value:l.anchor_asset?`${v(l.anchor_asset)} (${v(l.anchor_asset_type)})`:v(l.anchor_asset_type)}):null,l&&l.redemption_instructions?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.redemption-instructions.label"),margin:"dense",multiline:!0,value:l.redemption_instructions}):null)),c&&c.DOCUMENTATION?e.createElement(C,{className:i.card},e.createElement(O,{className:i.cardContent},c.DOCUMENTATION.ORG_LOGO?e.createElement(fe,{className:i.cardLogo},e.createElement("img",{alt:"Organization logo",className:i.cardLogoImage,src:c.DOCUMENTATION.ORG_LOGO})):null,c.DOCUMENTATION.ORG_NAME?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.name.label"),margin:"dense",value:c.DOCUMENTATION.ORG_NAME}):null,c.DOCUMENTATION.ORG_DBA?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.dba.label"),margin:"dense",value:c.DOCUMENTATION.ORG_DBA}):null,c.DOCUMENTATION.ORG_URL?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.website.label"),margin:"dense",onClick:()=>S(c.DOCUMENTATION.ORG_URL),value:c.DOCUMENTATION.ORG_URL,inputProps:{style:{cursor:"pointer",textDecoration:"underline"}}}):null,c.DOCUMENTATION.ORG_DESCRIPTION?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.description.label"),margin:"dense",multiline:!0,value:c.DOCUMENTATION.ORG_DESCRIPTION}):null,c.DOCUMENTATION.ORG_PHYSICAL_ADDRESS?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.address.label"),margin:"dense",multiline:!0,value:c.DOCUMENTATION.ORG_PHYSICAL_ADDRESS,inputProps:{style:{whiteSpace:"pre"}}}):null,c.DOCUMENTATION.ORG_OFFICIAL_EMAIL?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.email.label"),margin:"dense",multiline:!0,onClick:()=>S("mailto:"+c.DOCUMENTATION.ORG_OFFICIAL_EMAIL),value:c.DOCUMENTATION.ORG_OFFICIAL_EMAIL,inputProps:{style:{cursor:"pointer",textDecoration:"underline"}}}):null,c.DOCUMENTATION.ORG_PHONE_NUMBER?e.createElement(u,{disableUnderline:!0,fullWidth:!0,label:s("account.asset-details.general.organisation.phone-number.label"),margin:"dense",multiline:!0,value:c.DOCUMENTATION.ORG_PHONE_NUMBER}):null)):null)}),Ue=N({logo:{position:"absolute",top:4,right:-4,width:96,height:96,boxShadow:"0 0 8px 2px rgba(0, 0, 0, 0.2)",fontSize:24,[y.down(600)]:{width:64,height:64,fontSize:18}},domain:{marginTop:-4,marginLeft:47,marginBottom:16,[y.down(600)]:{marginLeft:39}},toolbar:{marginLeft:"-4px"}});function Pe(t){const n=k(t.account.accountID,t.account.testnet),a=e.useMemo(()=>Q(t.assetID),[t.assetID]),l=Ue(),o=ee(),c=n.balances.find(a.isNative()?s=>s.asset_type==="native":s=>s.asset_type!=="native"&&s.asset_issuer===a.issuer&&s.asset_code===a.code),i=te(a,t.account.testnet),r=e.useMemo(()=>a.isNative()?null:e.createElement(_e,{account:t.account,asset:a}),[t.account,a]);return e.createElement(ae,{excessWidth:8,top:e.createElement(e.Fragment,null,e.createElement(ne,{nowrap:!0,onBack:t.onClose,style:{position:"relative",zIndex:1},title:a.isNative()?"Stellar Lumens (XLM)":e.createElement(e.Fragment,null,i&&i.name?`${i.name} (${a.getCode()})`:a.getCode()),titleStyle:{maxWidth:o?"calc(100% - 75px)":"calc(100% - 100px)",textShadow:"0 0 5px white, 0 0 5px white, 0 0 5px white"}}),e.createElement(se,{className:l.domain,variant:"subtitle1"},c?e.createElement(e.Fragment,null,e.createElement(F,{assetCode:a.getCode(),balance:c.balance}),e.createElement(le,{className:l.toolbar},e.createElement(De,{accountId:t.account.accountID,asset:a}))):a.isNative()?"stellar.org":e.createElement(he,{publicKey:a.getIssuer(),testnet:t.account.testnet})),e.createElement(Te,{asset:a,className:l.logo,testnet:t.account.testnet})),actions:r,actionsPosition:"bottom",fitToShrink:!0},e.createElement(ce,{margin:"0 4px",padding:`0 0 ${o?68:0}px`,shrink:0},a.isNative()?e.createElement(Le,{account:t.account}):e.createElement(we,{account:t.account,asset:a,metadata:i})))}export{Pe as default};
//# sourceMappingURL=AssetDetailsDialog-CycU131w.js.map
