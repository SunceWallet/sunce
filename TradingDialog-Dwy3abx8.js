import{c4 as Ve,c5 as He,c6 as ze,c7 as Ge,i as ae,R as t,_ as ne,P as We,f as $,j as O,B as je,o as Xe,U as re,V as ie,W as oe,g as se,Y as Pe,b5 as Ce,aE as Ke,c8 as Ue,c9 as Qe,bw as Ye,aF as W,a9 as Be,H as Re,ax as J,ap as c,a8 as j,aM as Ie,$ as q,a1 as le,a6 as w,ac as we,ai as Je,bL as Ze,be as Z,bf as Me,bd as X,b_ as et,ae as Te,bA as tt,ad as ke,aS as at,bc as nt,ca as rt,av as it,a5 as de,al as me,bm as Y,bM as ot,aw as st,E as De,ag as ge,aQ as fe,a0 as Le,a2 as _e,b0 as lt,au as ye,ak as ct,b1 as ut,aa as dt,bu as mt,bp as gt}from"./app-Cqupz_ZG.js";import{v as ft,T as Fe,L as yt,a as be,e as z,c as ee,w as bt,x as K,F as M,M as he,y as pe,z as ht,P as Oe,b as pt,p as te,t as F,G as vt,H as xt,m as Et,I as At,J as St,K as Pt}from"./app-stage2-Bi418ode.js";import{R as Ct}from"./Remove-BhDNWXor.js";import{M as ve}from"./MainSelectionButton-CJKJy0Zy.js";function Bt(a){return Ve(a)||He(a)||ze(a)||Ge()}var Rt=function(e){var r={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],r),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],r)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}},It=t.forwardRef(function(e,r){var n=e.children,o=e.classes,i=e.className,d=e.defaultExpanded,f=d===void 0?!1:d,u=e.disabled,g=u===void 0?!1:u,l=e.expanded,y=e.onChange,s=e.square,b=s===void 0?!1:s,m=e.TransitionComponent,E=m===void 0?ft:m,p=e.TransitionProps,S=ne(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),P=t.useRef(l!=null),R=P.current,v=t.useState(f),C=v[0],x=v[1],h=R?l:C,T=function(U){R||x(!h),y&&y(U,!h)},k=t.Children.toArray(n),B=Bt(k),I=B[0],N=B.slice(1);return t.createElement(We,$({className:O(o.root,i,h&&o.expanded,g&&o.disabled,!b&&o.rounded),ref:r,square:b},S),t.cloneElement(I,{disabled:g,expanded:h,onChange:T}),t.createElement(E,$({in:h,timeout:"auto"},p),t.createElement("div",{"aria-labelledby":I.props.id,id:I.props["aria-controls"],role:"region"},N)))});const wt=ae(Rt,{name:"MuiExpansionPanel"})(It);var Mt={root:{display:"flex",padding:"8px 24px 24px"}},Tt=t.forwardRef(function(e,r){var n=e.classes,o=e.className,i=ne(e,["classes","className"]);return t.createElement("div",$({className:O(n.root,o),ref:r},i))});const kt=ae(Mt,{name:"MuiExpansionPanelDetails"})(Tt);var Dt=function(e){var r={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:8*6,transition:e.transitions.create(["min-height","background-color"],r),padding:"0 24px 0 24px","&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],r),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",r),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}},Lt=t.forwardRef(function(e,r){var n=e.children,o=e.classes,i=e.className,d=e.disabled,f=d===void 0?!1:d,u=e.expanded,g=e.expandIcon,l=e.IconButtonProps,y=e.onBlur,s=e.onChange,b=e.onClick,m=e.onFocusVisible,E=ne(e,["children","classes","className","disabled","expanded","expandIcon","IconButtonProps","onBlur","onChange","onClick","onFocusVisible"]),p=t.useState(!1),S=p[0],P=p[1],R=function(h){P(!0),m&&m(h)},v=function(h){P(!1),y&&y(h)},C=function(h){s&&s(h),b&&b(h)};return t.createElement(je,$({focusRipple:!1,disableRipple:!0,disabled:f,component:"div","aria-expanded":u,className:O(o.root,i,f&&o.disabled,u&&o.expanded,S&&o.focused),onFocusVisible:R,onBlur:v,onClick:C,ref:r},E),t.createElement("div",{className:O(o.content,u&&o.expanded)},n),g&&t.createElement(Xe,$({disabled:f,className:O(o.expandIcon,u&&o.expanded),edge:"end",component:"div",tabIndex:-1,"aria-hidden":!0},l),g))});const _t=ae(Dt,{name:"MuiExpansionPanelSummary"})(Lt);var D={},xe;function Ft(){if(xe)return D;xe=1;var a=re();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var e=a(ie()),r=a(oe()),n=(0,r.default)(e.default.createElement("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");return D.default=n,D}var Ot=Ft();const $t=se(Ot);var L={},Ee;function qt(){if(Ee)return L;Ee=1;var a=re();Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var e=a(ie()),r=a(oe()),n=(0,r.default)(e.default.createElement("path",{d:"M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"}),"BarChart");return L.default=n,L}var Nt=qt();const Vt=se(Nt);function Ht(a,e,r,n){const o=W(n.buying),i=W(n.selling);return i.isNative()?ee([w.Operation.manageBuyOffer({offerId:n.id,buyAmount:"0",buying:o,price:n.price,selling:i})],{accountData:r,horizon:a,walletAccount:e}):ee([w.Operation.manageSellOffer({offerId:n.id,amount:"0",buying:o,price:n.price,selling:i})],{accountData:r,horizon:a,walletAccount:e})}const zt=t.memo(function(e){const r=W(e.offer.buying),n=W(e.offer.selling),o=Be();return t.createElement(Re,{button:!!e.onCancel,onClick:e.onCancel,style:{minHeight:o?58:72,...e.style}},t.createElement(yt,{style:{marginRight:o?0:void 0}},t.createElement(Vt,null)),t.createElement(J,{primary:e.offer.seller===e.accountPublicKey&&!n.isNative()?t.createElement("span",{style:{fontWeight:"bold"}},t.createElement(be,{i18nKey:"account.transactions.offer-list.text.sell"},"Sell",t.createElement(z,{assetCode:n.getCode(),balance:e.offer.amount,inline:!0,style:{marginLeft:"0.35em",marginRight:"0.35em"}}),"for",t.createElement(z,{assetCode:r.getCode(),balance:String(c(e.offer.amount).mul(e.offer.price)),inline:!0,style:{marginLeft:"0.35em",marginRight:"0.35em"}}))):t.createElement("span",{style:{fontWeight:"bold"}},t.createElement(be,{i18nKey:"account.transactions.offer-list.text.buy"},"Buy",t.createElement(z,{assetCode:r.getCode(),balance:String(c(e.offer.amount).mul(e.offer.price)),inline:!0,style:{marginLeft:"0.35em",marginRight:"0.35em"}}),"for",t.createElement(z,{assetCode:n.getCode(),balance:e.offer.amount,inline:!0,style:{marginLeft:"0.35em",marginRight:"0.35em"}}))),primaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}},style:{paddingRight:o?0:void 0}}),t.createElement(J,{primaryTypographyProps:{align:"right"},style:{display:o?"none":void 0,flexShrink:0,paddingRight:0}},t.createElement(j,{alignItems:"center",inline:!0,style:{fontSize:"1.4rem"}},t.createElement("b",null,n.getCode())," ",t.createElement($t,{style:{fontSize:"150%"}})," ",t.createElement("b",null,r.getCode()))))}),Gt=t.memo(function(e){const{t:r}=q();return t.createElement(Re,{style:{borderBottom:"none",height:75}},t.createElement(J,{disableTypography:!0,style:{textAlign:"center"}},t.createElement(le,{onClick:e.onClick,loading:e.pending,style:{margin:"0 auto",paddingLeft:16,paddingRight:16},variant:"text"},r("account.transactions.transaction-list.load-more.label"))))});we({expansionPanel:{background:"transparent","&:before":{background:"transparent"}},expansionPanelSummary:{justifyContent:"flex-start",minHeight:"48px !important",padding:0},expansionPanelSummaryContent:{flexGrow:0,marginTop:"0 !important",marginBottom:"0 !important"},expansionPanelDetails:{display:"block",padding:0},listItem:{padding:"8px 24px",[Je.down(600)]:{paddingLeft:24,paddingRight:24}}});function Wt(a){const e=Pe(a.account.accountID,a.account.testnet),r=Ce(a.account.testnet),n=Ke(a.account.accountID,a.account.testnet),[o,i]=Ue(),d=Qe(a.account.accountID,a.account.testnet),f=t.useCallback(()=>i(d()),[d,i]),u=async g=>{try{const l=await Ht(r,a.account,e,g);await a.sendTransaction(l)}catch(l){Ie(l)}};return n.offers.length===0?null:t.createElement(Ye,{style:{background:"transparent"}},n.offers.map(g=>t.createElement(zt,{key:g.id,accountPublicKey:a.account.accountID,offer:g,onCancel:()=>u(g)})),n.olderOffersAvailable?t.createElement(Gt,{pending:o.type==="pending",onClick:f}):null)}function jt(a){return t.createElement(Fe,{account:a.account},({sendTransaction:e})=>t.createElement(Wt,{...a,sendTransaction:e}))}const Xt=t.forwardRef(function(e,r){const{t:n}=q();return t.createElement("div",{style:{margin:"48px 0 24px",padding:"0 8px"}},t.createElement(j,{ref:r,justifyContent:"space-evenly",wrap:"wrap"},t.createElement(ve,{label:n("trading.action-selection.buy.label"),description:n("trading.action-selection.buy.description"),gutterBottom:!0,onClick:e.onSelectBuy,Icon:Ze}),t.createElement(ve,{label:n("trading.action-selection.sell.label"),description:n("trading.action-selection.sell.description"),gutterBottom:!0,onClick:e.onSelectSell,Icon:Ct})),t.createElement(jt,{account:e.account,title:n("account.transactions.offer-list.title")}))}),Kt=t.memo(Xt);var _={},Ae;function Ut(){if(Ae)return _;Ae=1;var a=re();Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var e=a(ie()),r=a(oe()),n=(0,r.default)(e.default.createElement(e.default.Fragment,null,e.default.createElement("defs",null,e.default.createElement("path",{id:"a",d:"M0 0h24v24H0V0z"})),e.default.createElement("path",{d:"M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z"})),"Gavel");return _.default=n,_}var Qt=Ut();const Yt=se(Qt);function Jt(a,e){if(a.length===0||e.length===0)return{absoluteSpread:0,relativeSpread:0};const r=Number.parseFloat(a[0].price)-Number.parseFloat(e[0].price),n=r/Math.min(Number.parseFloat(a[0].price),Number.parseFloat(e[0].price));return{absoluteSpread:r,relativeSpread:n}}const Zt=a=>a.reduce((e,r)=>e.add(r),c(0));function ea(a,e,r=!1){const n=r?a.map(l=>({...l,amount:c(l.price).eq(0)?c(0).toFixed(7):c(l.amount).div(l.price).toFixed(7)})):a,o=t.useMemo(()=>{const l=[];let y=c(0);for(const s of n){if(y.gte(e))break;c(s.price).eq(0)||(l.push(s),y=y.add(s.amount))}return{offers:l,volume:y}},[n,e]),i=o.offers.map(l=>c(l.price)),d=i.length>0?i[i.length-1]:void 0,f=o.offers.slice(0,-1),u=o.offers[o.offers.length-1];return{estimatedReturn:Zt([...f.slice(0,-1).map(l=>c(l.amount).mul(l.price)),u?c(u.price).mul(c(u.amount).sub(o.volume.sub(e))):c(0)]),worstPriceOfBestMatches:d}}const G=(a,e)=>bt(a,{minimumSignificants:3,maximumSignificants:9,groupThousands:!1,...e});function Se(a,e){const r=X(a,e).minus(c(e.asset_type==="native"?et:c(0)));return r.cmp(c(0))<0?c(0):r}function ta(a){const{accountData:e,priceMode:r,primaryAction:n,tradePair:o}=a,{manualPrice:i,primaryAmountString:d,primaryAsset:f,secondaryAsset:u}=a.values,g=i&&K(i)?r==="secondary"?M(i):M(i).eq(0)?c(0):c(1).div(M(i)):c(0),l=d&&K(d)?M(d):c(0),y=f?Z(e.balances,f):void 0,s=u?Z(e.balances,u):void 0,{worstPriceOfBestMatches:b}=ea(n==="buy"?o.asks:o.bids,l.gt(0)?l:c(.01),n==="sell"),{relativeSpread:m}=Jt(o.asks,o.bids),E=b&&b.gt(0)?b:void 0,p=g.gt(0)?g:E||c(0),S=l.mul(p),P=p.eq(0)?c(0):c(1).div(p),R=G(r==="secondary"?p:P),v=Me(e),C=y?n==="sell"?Se(v,y):X(v,y):c(0),x=s?n==="buy"?Se(v,s):X(v,s):c(0),h=n==="buy"?x.gt(0)&&p.gt(0)?c(x).div(p):c(0):C.gt(0)?c(C):c(0);return{defaultPrice:R,effectivePrice:p,maxPrimaryAmount:h,minAccountBalance:v,primaryAmount:l,primaryBalance:y,relativeSpread:m,secondaryAmount:S,secondaryBalance:s,spendablePrimaryBalance:C,spendableSecondaryBalance:x}}const aa=t.forwardRef(function(e,r){var u,g;const n=!e.primaryAsset||!e.secondaryAsset,{t:o}=q(),i=e.priceDenotedIn==="primary"?(u=e.secondaryAsset)==null?void 0:u.getCode():(g=e.primaryAsset)==null?void 0:g.getCode(),d=i?o("trading.trading-price.label",{unit:i}):o("trading.trading-price.default-label"),f=t.createElement(Te,{position:"end"},t.createElement(tt,{disabled:n,disableUnderline:!0,onChange:l=>e.onSetPriceDenotedIn(l.target.value),style:{fontWeight:400},value:e.priceDenotedIn},t.createElement(he,{selected:e.priceDenotedIn==="secondary",value:"secondary"},e.secondaryAsset?e.secondaryAsset.getCode():""),t.createElement(he,{selected:e.priceDenotedIn==="primary",value:"primary"},e.primaryAsset?e.primaryAsset.getCode():"")));return t.createElement(ke,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal",min:"0.0000001"},InputProps:{endAdornment:f},inputRef:r,error:!!e.inputError,label:e.inputError||d,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.selectOnFocus?l=>l.target.select():void 0,style:e.style,value:e.defaultPrice?e.defaultPrice:e.manualPrice})}),na=t.memo(aa),ra=we({expansionPanel:{background:"transparent",margin:"8px 0 !important","&:before":{background:"transparent"}},expansionPanelSummary:{justifyContent:"flex-start",minHeight:"48px !important",padding:0},expansionPanelSummaryContent:{flexGrow:0,marginTop:"0 !important",marginBottom:"0 !important"},expansionPanelDetails:{justifyContent:"flex-start",paddingLeft:0,paddingRight:0,paddingTop:12}});function ia(a){var ue;const e=ra(),r=Be(),n=at("(max-height: 500px)"),o=r||n,{t:i}=q(),[d,f]=t.useState(!1),[u,g]=t.useState("secondary"),[l,y]=t.useState(!1),s=nt({defaultValues:{primaryAsset:a.initialPrimaryAsset,primaryAmountString:"",secondaryAsset:w.Asset.native(),manualPrice:"0"}}),b=a.sendTransaction,{primaryAsset:m,secondaryAsset:E,manualPrice:p}=s.watch(),S=t.useMemo(()=>(m==null?void 0:m.getIssuer())===a.accountData.account_id,[a.accountData,m]);t.useEffect(()=>{!m&&a.initialPrimaryAsset&&s.setValue("primaryAsset",a.initialPrimaryAsset)},[s,m,a.initialPrimaryAsset]);const P=Ce(a.account.testnet),R=rt(m||w.Asset.native(),E,a.account.testnet),v=t.useMemo(()=>a.trustlines.map(it),[a.trustlines]),C=ta({accountData:a.accountData,priceMode:u,primaryAction:a.primaryAction,tradePair:R,values:s.getValues()}),{maxPrimaryAmount:x,primaryBalance:h,defaultPrice:T,effectivePrice:k,primaryAmount:B,relativeSpread:I,secondaryAmount:N,secondaryBalance:V,spendablePrimaryBalance:U,spendableSecondaryBalance:$e}=C;s.formState.touched.primaryAmountString&&setTimeout(()=>s.triggerValidation("primaryAmountString"),0);const qe=()=>{s.setValue("primaryAmountString",x.toFixed(7))},ce=t.useCallback(()=>{const A=M(p).gt(0)?p:T;if(!(K(A)&&M(A).gt(0)))return d||f(!0),i("trading.validation.invalid-price")},[T,d,p,i]),Ne=t.useCallback(async()=>{try{y(!0);const A=ce();if(A){s.setError("manualPrice","invalid-amount",A);return}if(!m)throw de("InvariantViolationError","Invariant violation: Should not be able to submit form without having selected the primary asset.",{message:"Should not be able to submit form without having selected the primary asset."});if(X(Me(a.accountData),Z(a.accountData.balances,w.Asset.native())).minus(.5).cmp(0)<=0)throw de("LowReserveOrderError","Cannot place order because spendable XLM balance is too low.");const Q=await ee([a.primaryAction==="buy"?w.Operation.manageBuyOffer({buyAmount:B.toFixed(7),buying:m,offerId:0,price:k.toFixed(7),selling:E,withMuxing:!0}):w.Operation.manageSellOffer({amount:B.toFixed(7),buying:E,offerId:0,price:k.toFixed(7),selling:m,withMuxing:!0})],{accountData:a.accountData,horizon:P,walletAccount:a.account});await b(Q)}catch(A){Ie(A)}finally{y(!1)}},[s,k,P,m,a.account,a.accountData,a.primaryAction,B,E,b,ce]);return t.createElement(me,{alignItems:"stretch",alignSelf:o?void 0:"center",grow:1,minHeight:300,maxHeight:"100%",margin:r?void 0:"32px 0 0",padding:"16px 0",shrink:1,width:"100%"},t.createElement(me,{alignItems:"stretch",alignSelf:r?"stretch":"center",minWidth:r?"75%":450,maxWidth:r?"100%":500,padding:"0 2px",shrink:0,width:"100%"},t.createElement(j,{margin:"8px 0"},t.createElement(Y,{as:t.createElement(pe,{assets:v,inputError:s.errors.primaryAsset&&s.errors.primaryAsset.message,label:a.primaryAction==="buy"?i("trading.inputs.primary-asset-selector.label.buy"):i("trading.inputs.primary-asset-selector.label.sell"),minWidth:75,showXLM:!0,style:{flexGrow:1,marginRight:24,maxWidth:150,width:"25%"},testnet:a.account.testnet,value:m,accountId:a.accountData.account_id}),control:s.control,name:"primaryAsset",rules:{required:i("trading.validation.primary-asset-missing")}}),t.createElement(ke,{name:"primaryAmountString",inputRef:s.register({required:i("trading.validation.primary-amount-missing"),validate:A=>{const H=B.lt(0)||A.length>0&&B.eq(0);if(S)return!0;const Q=a.primaryAction==="sell"&&h&&B.gt(U)||a.primaryAction==="buy"&&V&&N.gt($e);return H?i("trading.validation.invalid-amount"):Q?i("trading.validation.not-enough-balance"):!0}}),error:!!s.errors.primaryAmountString,inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal",min:"0.0000001",max:x.toFixed(7),style:{height:27}},InputProps:{endAdornment:a.primaryAction==="buy"||S?void 0:t.createElement(Te,{position:"end"},t.createElement(ot,{disabled:!m||!h,onClick:qe,style:{boxShadow:"none",fontWeight:400}},i("trading.inputs.primary-amount.max-button.label")))},label:s.errors.primaryAmountString&&s.errors.primaryAmountString.message?s.errors.primaryAmountString.message:a.primaryAction==="buy"?i("trading.inputs.primary-amount.label.buy"):i("trading.inputs.primary-amount.label.sell"),placeholder:S?"":i("trading.inputs.primary-amount.placeholder",`Max. ${G(x)}`,{amount:G(x)}),required:!0,style:{flexGrow:1,flexShrink:1,width:"55%"}})),t.createElement(j,{margin:"8px 0 32px"},t.createElement(Y,{as:t.createElement(pe,{assets:v,label:a.primaryAction==="buy"?i("trading.inputs.secondary-asset-selector.label.buy"):i("trading.inputs.secondary-asset-selector.label.sell"),minWidth:75,showXLM:!0,style:{flexGrow:1,marginRight:24,maxWidth:150,width:"25%"},testnet:a.account.testnet,value:E,accountId:a.accountData.account_id}),control:s.control,name:"secondaryAsset",rules:{required:i("trading.validation.secondary-asset-missing")}}),t.createElement(st,{disableUnderline:!0,inputProps:{style:{height:27}},label:a.primaryAction==="buy"?i("trading.inputs.estimated-costs.label.buy"):i("trading.inputs.estimated-costs.label.sell"),placeholder:`Max. ${V?V.balance:"0"}`,style:{flexGrow:1,flexShrink:1,width:"55%"},inputMode:"decimal",type:"number",value:G(N,{groupThousands:!1})})),t.createElement(wt,{className:e.expansionPanel,elevation:0,expanded:d,onChange:()=>f(!d)},t.createElement(_t,{classes:{root:e.expansionPanelSummary,content:e.expansionPanelSummaryContent},expandIcon:t.createElement(ht,null)},t.createElement(De,{align:"center",style:{flexGrow:1}},i("trading.advanced.header"))),t.createElement(kt,{className:e.expansionPanelDetails},t.createElement(Y,{as:t.createElement(na,{defaultPrice:s.formState.touched.manualPrice?void 0:T,inputError:s.errors.manualPrice&&s.errors.manualPrice.message,onSetPriceDenotedIn:g,priceDenotedIn:u,primaryAsset:m,secondaryAsset:E,selectOnFocus:!0,style:{flexGrow:1,maxWidth:250,width:"55%"}}),control:s.control,name:"manualPrice",rules:{validate:A=>K(A)||i("trading.validation.invalid-price")},valueName:"manualPrice"}))),I>=.015?t.createElement(ge,{margin:"32px 0 0",padding:"8px 12px",style:{background:fe}},t.createElement("b",null,i("trading.warning.title")),t.createElement("br",null),i("trading.warning.message",`The spread between buying and selling price is about ${(I*100).toFixed(1)}%.`,{spread:(I*100).toFixed(1)})):null,S?t.createElement(ge,{margin:"32px 0 0",padding:"8px 12px",style:{background:fe}},i("trading.issuance",{asset:m==null?void 0:m.getCode()})):null,t.createElement(Oe,{target:(ue=a.dialogActionsRef)==null?void 0:ue.element},t.createElement(Le,{desktopStyle:{marginTop:32}},t.createElement(le,{loading:l,icon:t.createElement(Yt,null),onClick:s.handleSubmit(Ne),type:"primary"},i("trading.action.submit"))))))}const oa=t.memo(ia);function sa(a){if(te(a,F("*",void 0,"*"))){const e=Pt(a);if(e!=="buy"&&e!=="sell")return gt(e)}}function la(a){const e=Pe(a.account.accountID,a.account.testnet),r=lt(),n=_e(),[o,i]=t.useState(),{t:d}=q();t.useEffect(()=>{const b=sa(n.location.pathname);i(b)},[n.location.pathname]);const f=t.useMemo(()=>e.balances.filter(b=>b.asset_type!=="native"),[e.balances]),u=te(n.location.pathname,F("*","buy"))?"buy":te(n.location.pathname,F("*","sell"))?"sell":void 0,g=t.useCallback(()=>{n.history.push(F(a.account.id,void 0,o?ye(o):void 0))},[o,a.account,n.history]),l=t.useCallback(b=>{n.history.push(F(a.account.id,b,o?ye(o):void 0))},[o,a.account,n.history]),y=t.useMemo(()=>t.createElement(vt,{current:u?1:0},t.createElement("div",null,t.createElement(Kt,{onSelectBuy:()=>l("buy"),onSelectSell:()=>l("sell"),account:a.account})),t.createElement(t.Suspense,{fallback:t.createElement(ct,null)},t.createElement(oa,{account:a.account,accountData:e,dialogActionsRef:u?r:null,initialPrimaryAsset:o,primaryAction:u||"buy",sendTransaction:a.sendTransaction,trustlines:f}))),[e,r,o,u,a.account,a.sendTransaction,l,f]),s=t.useMemo(()=>t.createElement(xt,{margin:"32px 0 0",textAlign:"center"},t.createElement(De,null,d("trading.no-assets-info")),t.createElement(Oe,{target:r.element},t.createElement(Le,null,t.createElement(le,{autoFocus:!0,onClick:()=>n.history.push(Et(a.account.id)),type:"primary"},d("trading.action.add-asset"))))),[r,a.account,n,d]);return t.createElement(ut,{top:t.createElement(t.Fragment,null,t.createElement(dt,{title:t.createElement("span",null,d("trading.title"),a.account.testnet?t.createElement(At,{style:{marginLeft:8}}):null),onBack:u?g:a.onClose}),t.createElement(St,{account:a.account,compact:!0})),actions:u?r:null},t.createElement(mt,null,f.length>0?y:s))}function ga(a){const e=_e(),r=()=>e.history.push(pt(a.account.id));return t.createElement(Fe,{account:a.account,onSubmissionCompleted:r},n=>t.createElement(la,{...a,...n}))}export{ga as default};
//# sourceMappingURL=TradingDialog-Dwy3abx8.js.map
