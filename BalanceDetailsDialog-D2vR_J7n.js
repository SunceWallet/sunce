import{b_ as ze,b$ as ie,r as U,f as Pe,R as n,a6 as L,U as be,V as Ie,W as Te,g as Ce,Z as j,av as Ne,b9 as We,$ as O,H as V,ax as B,ai as D,o as Ee,aS as Fe,b1 as Y,aa as ee,ad as Z,a0 as Ue,a1 as oe,a2 as Ae,au as W,al as Ge,c0 as $e,bv as K,c1 as pe,bK as we,ak as H,aZ as Le,a$ as Ve,aM as Ke,c2 as le,Y as He,aE as Je,a9 as Ze,a_ as Xe,bd as qe,ap as Qe,bf as je}from"./app-C5_XvZVC.js";import{S as Ye,L as re,d as ce,B as et,A as Me,V as tt,h as nt,T as at,u as st,i as it,j as G,c as ot,k as lt,s as rt,m as ue,l as ct,n as X,E as ut,p as dt}from"./app-stage2-BbHUaDfD.js";var de=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function mt(t,e){return!!(t===e||de(t)&&de(e))}function ht(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!mt(t[s],e[s]))return!1;return!0}function q(t,e){e===void 0&&(e=ht);var s,i=[],c,g=!1;function v(){for(var d=[],r=0;r<arguments.length;r++)d[r]=arguments[r];return g&&s===this&&e(d,i)||(c=t.apply(this,d),g=!0,s=this,i=d),c}return v}var gt=typeof performance=="object"&&typeof performance.now=="function",me=gt?function(){return performance.now()}:function(){return Date.now()};function he(t){cancelAnimationFrame(t.id)}function ft(t,e){var s=me();function i(){me()-s>=e?t.call(null):c.id=requestAnimationFrame(i)}var c={id:requestAnimationFrame(i)};return c}var Q=-1;function ge(t){if(t===void 0&&(t=!1),Q===-1||t){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}var _=null;function fe(t){if(t===void 0&&(t=!1),_===null||t){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";var i=document.createElement("div"),c=i.style;return c.width="100px",c.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?_="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?_="negative":_="positive-ascending"),document.body.removeChild(e),_}return _}var vt=150,St=function(e,s){return e};function yt(t){var e,s=t.getItemOffset,i=t.getEstimatedTotalSize,c=t.getItemSize,g=t.getOffsetForIndexAndAlignment,v=t.getStartIndexForOffset,d=t.getStopIndexForStartIndex,r=t.initInstanceProps,E=t.shouldResetStyleCacheOnItemSizeChange,A=t.validateProps;return e=function(y){ze(M,y);function M(I){var a;return a=y.call(this,I)||this,a._instanceProps=r(a.props,ie(a)),a._outerRef=void 0,a._resetIsScrollingTimeoutId=null,a.state={instance:ie(a),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof a.props.initialScrollOffset=="number"?a.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},a._callOnItemsRendered=void 0,a._callOnItemsRendered=q(function(l,o,m,h){return a.props.onItemsRendered({overscanStartIndex:l,overscanStopIndex:o,visibleStartIndex:m,visibleStopIndex:h})}),a._callOnScroll=void 0,a._callOnScroll=q(function(l,o,m){return a.props.onScroll({scrollDirection:l,scrollOffset:o,scrollUpdateWasRequested:m})}),a._getItemStyle=void 0,a._getItemStyle=function(l){var o=a.props,m=o.direction,h=o.itemSize,S=o.layout,u=a._getItemStyleCache(E&&h,E&&S,E&&m),f;if(u.hasOwnProperty(l))f=u[l];else{var b=s(a.props,l,a._instanceProps),w=c(a.props,l,a._instanceProps),x=m==="horizontal"||S==="horizontal",T=m==="rtl",C=x?b:0;u[l]=f={position:"absolute",left:T?void 0:C,right:T?C:void 0,top:x?0:b,height:x?"100%":w,width:x?w:"100%"}}return f},a._getItemStyleCache=void 0,a._getItemStyleCache=q(function(l,o,m){return{}}),a._onScrollHorizontal=function(l){var o=l.currentTarget,m=o.clientWidth,h=o.scrollLeft,S=o.scrollWidth;a.setState(function(u){if(u.scrollOffset===h)return null;var f=a.props.direction,b=h;if(f==="rtl")switch(fe()){case"negative":b=-h;break;case"positive-descending":b=S-m-h;break}return b=Math.max(0,Math.min(b,S-m)),{isScrolling:!0,scrollDirection:u.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._onScrollVertical=function(l){var o=l.currentTarget,m=o.clientHeight,h=o.scrollHeight,S=o.scrollTop;a.setState(function(u){if(u.scrollOffset===S)return null;var f=Math.max(0,Math.min(S,h-m));return{isScrolling:!0,scrollDirection:u.scrollOffset<f?"forward":"backward",scrollOffset:f,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._outerRefSetter=function(l){var o=a.props.outerRef;a._outerRef=l,typeof o=="function"?o(l):o!=null&&typeof o=="object"&&o.hasOwnProperty("current")&&(o.current=l)},a._resetIsScrollingDebounced=function(){a._resetIsScrollingTimeoutId!==null&&he(a._resetIsScrollingTimeoutId),a._resetIsScrollingTimeoutId=ft(a._resetIsScrolling,vt)},a._resetIsScrolling=function(){a._resetIsScrollingTimeoutId=null,a.setState({isScrolling:!1},function(){a._getItemStyleCache(-1,null)})},a}M.getDerivedStateFromProps=function(a,l){return bt(a,l),A(a),null};var p=M.prototype;return p.scrollTo=function(a){a=Math.max(0,a),this.setState(function(l){return l.scrollOffset===a?null:{scrollDirection:l.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},p.scrollToItem=function(a,l){l===void 0&&(l="auto");var o=this.props,m=o.itemCount,h=o.layout,S=this.state.scrollOffset;a=Math.max(0,Math.min(a,m-1));var u=0;if(this._outerRef){var f=this._outerRef;h==="vertical"?u=f.scrollWidth>f.clientWidth?ge():0:u=f.scrollHeight>f.clientHeight?ge():0}this.scrollTo(g(this.props,a,l,S,this._instanceProps,u))},p.componentDidMount=function(){var a=this.props,l=a.direction,o=a.initialScrollOffset,m=a.layout;if(typeof o=="number"&&this._outerRef!=null){var h=this._outerRef;l==="horizontal"||m==="horizontal"?h.scrollLeft=o:h.scrollTop=o}this._callPropsCallbacks()},p.componentDidUpdate=function(){var a=this.props,l=a.direction,o=a.layout,m=this.state,h=m.scrollOffset,S=m.scrollUpdateWasRequested;if(S&&this._outerRef!=null){var u=this._outerRef;if(l==="horizontal"||o==="horizontal")if(l==="rtl")switch(fe()){case"negative":u.scrollLeft=-h;break;case"positive-ascending":u.scrollLeft=h;break;default:var f=u.clientWidth,b=u.scrollWidth;u.scrollLeft=b-f-h;break}else u.scrollLeft=h;else u.scrollTop=h}this._callPropsCallbacks()},p.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&he(this._resetIsScrollingTimeoutId)},p.render=function(){var a=this.props,l=a.children,o=a.className,m=a.direction,h=a.height,S=a.innerRef,u=a.innerElementType,f=a.innerTagName,b=a.itemCount,w=a.itemData,x=a.itemKey,T=x===void 0?St:x,C=a.layout,R=a.outerElementType,k=a.outerTagName,De=a.style,Re=a.useIsScrolling,_e=a.width,te=this.state.isScrolling,J=m==="horizontal"||C==="horizontal",Be=J?this._onScrollHorizontal:this._onScrollVertical,ne=this._getRangeToRender(),Oe=ne[0],ke=ne[1],ae=[];if(b>0)for(var z=Oe;z<=ke;z++)ae.push(U.createElement(l,{data:w,key:T(z,w),index:z,isScrolling:Re?te:void 0,style:this._getItemStyle(z)}));var se=i(this.props,this._instanceProps);return U.createElement(R||k||"div",{className:o,onScroll:Be,ref:this._outerRefSetter,style:Pe({position:"relative",height:h,width:_e,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:m},De)},U.createElement(u||f||"div",{children:ae,ref:S,style:{height:J?"100%":se,pointerEvents:te?"none":void 0,width:J?se:"100%"}}))},p._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var a=this.props.itemCount;if(a>0){var l=this._getRangeToRender(),o=l[0],m=l[1],h=l[2],S=l[3];this._callOnItemsRendered(o,m,h,S)}}if(typeof this.props.onScroll=="function"){var u=this.state,f=u.scrollDirection,b=u.scrollOffset,w=u.scrollUpdateWasRequested;this._callOnScroll(f,b,w)}},p._getRangeToRender=function(){var a=this.props,l=a.itemCount,o=a.overscanCount,m=this.state,h=m.isScrolling,S=m.scrollDirection,u=m.scrollOffset;if(l===0)return[0,0,0,0];var f=v(this.props,u,this._instanceProps),b=d(this.props,f,u,this._instanceProps),w=!h||S==="backward"?Math.max(1,o):1,x=!h||S==="forward"?Math.max(1,o):1;return[Math.max(0,f-w),Math.max(0,Math.min(l-1,b+x)),f,b]},M}(U.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var bt=function(e,s){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,s.instance},It=yt({getItemOffset:function(e,s){var i=e.itemSize;return s*i},getItemSize:function(e,s){var i=e.itemSize;return i},getEstimatedTotalSize:function(e){var s=e.itemCount,i=e.itemSize;return i*s},getOffsetForIndexAndAlignment:function(e,s,i,c,g,v){var d=e.direction,r=e.height,E=e.itemCount,A=e.itemSize,y=e.layout,M=e.width,p=d==="horizontal"||y==="horizontal",I=p?M:r,a=Math.max(0,E*A-I),l=Math.min(a,s*A),o=Math.max(0,s*A-I+A+v);switch(i==="smart"&&(c>=o-I&&c<=l+I?i="auto":i="center"),i){case"start":return l;case"end":return o;case"center":{var m=Math.round(o+(l-o)/2);return m<Math.ceil(I/2)?0:m>a+Math.floor(I/2)?a:m}case"auto":default:return c>=o&&c<=l?c:c<o?o:l}},getStartIndexForOffset:function(e,s){var i=e.itemCount,c=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(s/c)))},getStopIndexForStartIndex:function(e,s,i){var c=e.direction,g=e.height,v=e.itemCount,d=e.itemSize,r=e.layout,E=e.width,A=c==="horizontal"||r==="horizontal",y=s*d,M=A?E:g,p=Math.ceil((M+i-y)/d);return Math.max(0,Math.min(v-1,s+p-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Tt(t){if(!t.container)return null;const e=t.container.clientHeight,s=t.container.clientWidth;return n.createElement(It,{height:e,itemCount:t.itemCount,itemSize:t.itemSize,width:s},t.children)}const Ct=[new L.Asset("EURMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new L.Asset("MTLAP","GCNVDZIHGX473FEI7IXCUAEXUJ4BGCKEMHF36VYP5EMS7PX2QBLAMTLA"),new L.Asset("MTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new L.Asset("MTLRECT","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new L.Asset("BTCMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new L.Asset("SATSMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new L.Asset("USDM","GDHDC4GBNPMENZAOBB4NCQ25TGZPDRK6ZGWUGSI22TVFATOLRPSUUSDM"),new L.Asset("USDC","GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN")],Et=[new L.Asset("USD","GCKFBEIYV2U22IO2BJ4KVJOIP7XPWQGQFKKWXR6DOSJBV7STMAQSMTGG"),new L.Asset("SRT","GCDNJUBQSX7AJWLJACMJ7I4BC3Z47BQUTMHEICZLE6MU4KQBRYG5JY6B")];var P={},ve;function At(){if(ve)return P;ve=1;var t=be();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var e=t(Ie()),s=t(Te()),i=(0,s.default)(e.default.createElement(e.default.Fragment,null,e.default.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),e.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Star");return P.default=i,P}var pt=At();const wt=Ce(pt);var N={},Se;function Lt(){if(Se)return N;Se=1;var t=be();Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var e=t(Ie()),s=t(Te()),i=(0,s.default)(e.default.createElement("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");return N.default=i,N}var Mt=Lt();const xt=Ce(Mt),Dt=j({clickable:{},icon:{[D.down(350)]:{minWidth:48}},logo:{[D.down(350)]:{width:36,height:36}},logoHidden:{visibility:"hidden"},badge:{top:4,right:4,boxShadow:"0 0 3px 1px black"},mainListItemText:{flex:"1 1 auto",whiteSpace:"nowrap"},mainListItemTextPrimaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:15},[D.down(350)]:{fontSize:13}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:14},[D.down(350)]:{fontSize:12}},balanceListItemText:{flex:"1 0 auto",marginLeft:8,textAlign:"right"},balanceText:{fontSize:"140%",[D.down(350)]:{fontSize:"120%"}},actions:{flex:"0 0 auto",marginLeft:4,marginRight:-16,width:48},visibilityIcon:{color:"rgba(0, 0, 0, 0.54)","&.favorite":{color:"#FFD700"},"&.hidden":{color:"rgba(0, 0, 0, 0.38)"}},visibilityIconContainer:{marginRight:8,display:"flex",alignItems:"center"}});function Rt(t){const e=Dt(),s=`${t.className||""} ${t.onClick?e.clickable:""}`,i=n.useMemo(()=>Ne(t.balance),[t.balance]),c=We(i,t.testnet),{t:g}=O(),v=n.useMemo(()=>t.hideBalance?null:n.createElement(Ye,{assetCode:"",balance:t.balance.balance,showInfinity:t.isOwnAsset}),[t.balance.balance,t.hideBalance]),d=()=>{if(!t.isEditMode)return null;const A=`${e.visibilityIcon} ${t.visibilityMode||""}`;let y;switch(t.visibilityMode){case"favorite":y=n.createElement(wt,{className:A});break;case"hidden":y=n.createElement(tt,{className:A});break;default:y=n.createElement(xt,{className:A})}return n.createElement("div",{className:e.visibilityIconContainer},n.createElement(Ee,{size:"small",onClick:M=>{var p;M.stopPropagation(),(p=t.onToggleVisibility)==null||p.call(t)}},y))};if(t.balance.asset_type==="native")return n.createElement(V,{button:!!t.onClick,className:s,onClick:t.onClick,style:t.style},d(),n.createElement(re,{className:e.icon},n.createElement(ce,{asset:i,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,testnet:t.testnet})),n.createElement(B,{classes:{root:e.mainListItemText,primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:t.spendableBalance?g("account.balance-details.item.spendable-balance.primary"):"Stellar Lumens (XLM)",secondary:t.spendableBalance?void 0:"stellar.org"}),n.createElement(B,{classes:{root:e.balanceListItemText,primary:e.balanceText},primary:v}));const r=c&&c.name||t.balance.asset_code,E=r!==t.balance.asset_code?`${r} (${t.balance.asset_code})`:t.balance.asset_code;return n.createElement(V,{button:!!t.onClick,className:s,onClick:t.onClick,style:t.style},d(),n.createElement(re,{className:e.icon},n.createElement(et,{badgeContent:t.badgeCount,classes:{badge:e.badge},color:"primary"},n.createElement(ce,{asset:i,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,dark:!0,testnet:t.testnet}))),n.createElement(B,{className:e.mainListItemText,classes:{primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:E,secondary:n.createElement(Me,{publicKey:t.balance.asset_issuer,testnet:t.testnet})}),n.createElement(B,{className:e.balanceListItemText,primary:v,primaryTypographyProps:{className:e.balanceText}}))}const F=n.memo(Rt);function _t(t){const[e,s]=n.useState(""),[i,c]=n.useState(""),[g,v]=n.useState(""),d=Fe("(max-width:450px)"),{t:r}=O(),E=()=>t.createAddAssetTransaction(new L.Asset(e,i),{limit:g||void 0}),A=()=>t.sendTransaction(E);return n.createElement(Y,{top:n.createElement(ee,{hideBackButton:!0,onBack:t.onClose,title:r("account-settings.custom-trustline.title")})},n.createElement("form",{noValidate:!0,style:{display:"block",width:"100%"}},n.createElement(Z,{label:r("account-settings.custom-trustline.textfield.code.label"),placeholder:"EURT, USDT, BTC, ...",autoFocus:!0,margin:"dense",name:"asset-code",value:e,onChange:y=>s(y.target.value)}),n.createElement(Z,{fullWidth:!0,label:r("account-settings.custom-trustline.textfield.issuer.label"),placeholder:r("account-settings.custom-trustline.textfield.issuer.placeholder"),margin:"dense",name:"asset-issuer",value:i,onChange:y=>c(y.target.value)}),n.createElement(Z,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal"},fullWidth:!0,label:r("account-settings.custom-trustline.textfield.limit.label"),placeholder:r("account-settings.custom-trustline.textfield.limit.placeholder"),margin:"dense",name:"trust-limit",value:g,type:"number",onChange:y=>v(y.target.value)}),n.createElement(Ue,{preventMobileActionsBox:!0},n.createElement(oe,{onClick:t.onClose},r("account-settings.custom-trustline.action.cancel")),n.createElement(oe,{icon:n.createElement(nt,null),loading:t.txCreationPending,onClick:A,type:"primary"},r(d?"account-settings.custom-trustline.action.trust.short":"account-settings.custom-trustline.action.trust.long")))))}const Bt=n.memo(_t);function Ot(t,e){return e=e.toLowerCase(),t.code.toLowerCase().startsWith(e)||t.name.toLowerCase().startsWith(e)}function kt(t,e){return e=e.toLowerCase(),t.name.toLowerCase().startsWith(e)}function xe(t){return{asset_code:t.getCode(),asset_issuer:t.getIssuer(),asset_type:t.getAssetType(),balance:"0",is_authorized:!0,is_authorized_to_maintain_liabilities:!0,last_modified_ledger:0,limit:"0",buying_liabilities:"0",selling_liabilities:"0",is_clawback_enabled:!1}}function zt(t,e){const s={};for(const i of t){const c=e(i),g=s[c];g?g.push(i):s[c]=[i]}return s}const Pt=n.memo(function(e){return n.createElement(n.Fragment,null,e.assets.map(s=>n.createElement(F,{key:W(s),balance:xe(s),hideBalance:!0,onClick:()=>e.onOpenAssetDetails(s),testnet:e.testnet})))}),$=73,ye=j({assetItem:{borderRadius:"0 !important",height:$},issuerItem:{background:"white",borderRadius:8,height:$},noResultItem:{background:"white",borderRadius:8,height:$}});function Nt(t,e,s){const i=[];for(const v of Object.keys(e))i.push({type:"issuer",issuer:v}),i.push(...e[v].map(d=>({type:"asset",issuer:v,record:d})));function c(v){const d=ye(),r=i[v.index],{t:E}=O();return n.createElement("div",{style:v.style},n.createElement(n.Suspense,{fallback:n.createElement(H,null)},r.type==="issuer"?n.createElement(V,{key:r.issuer,className:d.issuerItem},n.createElement(B,{primary:r.issuer==="native"?"stellar.org":n.createElement(Me,{publicKey:r.issuer,testnet:t.testnet}),secondary:e[r.issuer].length===1?E("account.add-asset.item.issuer.secondary.one-asset"):E("account.add-asset.item.issuer.secondary.more-than-one-asset",{amount:e[r.issuer].length}),secondaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}}})):null,r.type==="asset"?n.createElement(F,{balance:xe(le(r.record)),className:d.assetItem,hideBalance:!0,onClick:()=>s(le(r.record)),style:{paddingLeft:32},testnet:t.testnet}):null))}function g(){const v=ye(),{t:d}=O();return n.createElement(V,{key:0,className:v.noResultItem},n.createElement(B,{primary:d("account.add-asset.item.no-result.primary"),secondary:d("account.add-asset.item.no-result.secondary")}))}return i.length>0?(c.count=i.length,c):(g.count=1,g)}const Wt=j({grow:{flexGrow:1},list:{marginTop:16,padding:0},searchField:{background:"white",flexShrink:0,flexGrow:0,marginBottom:16},searchFieldInput:{fontSize:16,paddingTop:14,paddingBottom:14}}),Ft=n.memo(function(e){const s=e.account.testnet?Et:Ct,i=Wt(),c=n.useRef(null),g=st(e.account.testnet),v=Ae(),{t:d}=O(),r=it(e.account.testnet),[E,A]=n.useState(!1),[y,M]=n.useState(""),[p,I]=n.useState(!1),a=n.useCallback(T=>v.history.push(G(e.account.id,W(T))),[v.history,e.account.id]),l=()=>A(!0),o=()=>A(!1),m=async(T,C={})=>{const R=[L.Operation.changeTrust({asset:T,limit:C.limit,withMuxing:!0})];return ot(R,{accountData:e.accountData,horizon:e.horizon,walletAccount:e.account})},h=async T=>{try{I(!0);const C=await T();I(!1),await e.sendTransaction(C)}catch(C){I(!1),Ke(C)}},S=T=>e.accountData.balances.some(C=>C.asset_code===T.code&&C.asset_issuer===T.issuer),u=n.useCallback((T,C)=>{const R=C.toLowerCase(),k=r.lookup(T);return k?k.domain.toLowerCase().includes(R)||k.name.toLowerCase().includes(R):!1},[r]),f=s.filter(T=>!S(T)),b=n.useCallback(T=>{M(T.target.value)},[]),w=n.useMemo(()=>{const T=g.filter(C=>Ot(C,y)||kt(C.issuer_detail,y)||u(C.issuer,y));return zt(T,C=>C.issuer)},[g,y,u]),x=n.useMemo(()=>Nt(e.account,w,a),[e.account,w,a]);return n.createElement(Y,{excessWidth:24,top:n.createElement(ee,{onBack:e.onClose,title:d("account.add-asset.title")})},n.createElement(Ge,{grow:!0,margin:"16px 0 0"},n.createElement($e,{autoFocus:!0,className:i.searchField,inputProps:{className:i.searchFieldInput},onChange:b,value:y,placeholder:d("account.add-asset.search-field.placeholder")}),n.createElement(K,{className:i.list},n.createElement(pe,{onClick:l},n.createElement(we,null),"  ",d("account.add-asset.button.add-custom-asset.label"))),n.createElement(n.Suspense,{fallback:n.createElement(H,null)},y?n.createElement("ul",{className:`${i.list} ${i.grow}`,ref:c},n.createElement(Tt,{container:c.current,itemCount:x.count,itemSize:$},x)):n.createElement(K,{className:`${i.list} ${i.grow}`},n.createElement(Pt,{assets:f,onOpenAssetDetails:a,testnet:e.account.testnet})))),n.createElement(Le,{open:E,onClose:o,TransitionComponent:Ve},n.createElement(n.Suspense,{fallback:n.createElement(H,null)},n.createElement(Bt,{account:e.account,accountData:e.accountData,createAddAssetTransaction:m,horizon:e.horizon,onClose:o,sendTransaction:h,txCreationPending:p}))))});function Ut(t){return n.createElement(at,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:e,sendTransaction:s})=>n.createElement(Ft,{...t,horizon:e,sendTransaction:s}))}const Gt=n.memo(Ut),$t=n.memo(function(e){return n.createElement(n.Fragment,null,e.assetBalances.map(({asset:s,balance:i})=>{var d;const c=e.openOffers.filter(r=>r.buying.asset_code===s.code&&r.buying.asset_issuer===s.issuer||r.selling.asset_code===s.code&&r.selling.asset_issuer===s.issuer),g=e.olderOffersAvailable&&c.length>=10?"10+":c.length,v=(d=e.assetSettings[W(s)])==null?void 0:d.visibility;return n.createElement(F,{key:W(s),badgeCount:g,balance:i,onClick:()=>e.onOpenAssetDetails(s),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet,isOwnAsset:e.account.accountID===s.getIssuer(),isEditMode:e.isEditMode,visibilityMode:v,onToggleVisibility:()=>e.onToggleAssetVisibility(s)})}))}),Vt=n.memo(function(e){return n.createElement(n.Fragment,null,n.createElement(F,{key:"XLM",balance:e.balance,onClick:()=>e.onOpenAssetDetails(L.Asset.native()),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet}),n.createElement(F,{key:"XLM:spendable",balance:{...e.balance,balance:Qe(e.balance.balance).eq(0)?"0":qe(je(e.accountData),e.balance).toString()},hideLogo:!0,onClick:()=>e.onOpenAssetDetails(L.Asset.native()),spendableBalance:!0,style:{marginTop:-8,paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet}))});function Kt(t){const e=He(t.account.accountID,t.account.testnet),{offers:s,olderOffersAvailable:i}=Je(t.account.accountID,t.account.testnet),c=Ze(),g=Ae(),{t:v}=O(),[d,r]=n.useState(!1),{assetSettings:E,toggleVisibilityMode:A}=lt(t.account.accountID),[y,M]=n.useState([]);n.useEffect(()=>{if(d)return;const b=rt(e.balances,E).filter(w=>w.asset_type!=="native").map(w=>({asset:new L.Asset(w.asset_code,w.asset_issuer),balance:w}));M(b)},[e.balances,E,d]);const p=n.useCallback(()=>g.history.push(ue(t.account.id)),[t.account.id,g.history]),I=n.useCallback(()=>g.history.push(ct(t.account.id)),[t.account.id,g.history]),a=X(g.location.pathname,ue(t.account.id)),l=X(g.location.pathname,G("*","*"))&&!X(g.location.pathname,G("*","manage")),o=b=>g.history.push(G(t.account.id,W(b))),m=()=>{r(!d)},h=e.balances.find(b=>b.asset_type==="native"),S=c?0:8,u=16,f=0;return n.createElement(Y,{excessWidth:12,top:n.createElement(ee,{onBack:t.onClose,title:t.account.name,actions:n.createElement(Ee,{onClick:m,color:d?"primary":"default"},n.createElement(ut,null))})},n.createElement(K,{style:{paddingLeft:S,paddingRight:S,margin:"0 -8px"}},n.createElement(pe,{gutterBottom:!0,onClick:p,style:{padding:`0 ${u}px`,marginLeft:f,marginRight:f}},n.createElement(we,null),"  ",v("account.balance-details.button.add-asset.label")),n.createElement($t,{account:t.account,assetBalances:y,hmargin:f,hpadding:u,onOpenAssetDetails:o,openOffers:s,olderOffersAvailable:i,isEditMode:d,assetSettings:E,onToggleAssetVisibility:A})),n.createElement(dt,{style:{margin:"16px 0"}}),n.createElement(K,{style:{paddingLeft:S,paddingRight:S,margin:"0 -8px 8px"}},h?n.createElement(Vt,{account:t.account,accountData:e,balance:h,hmargin:f,hpadding:u,onOpenAssetDetails:o}):null),n.createElement(Le,{fullScreen:!0,open:a||l,onClose:I,TransitionComponent:Xe},n.createElement(n.Suspense,{fallback:n.createElement(H,null)},n.createElement(Gt,{account:t.account,accountData:e,hpadding:S,itemHPadding:u,onClose:I}))))}const Zt=n.memo(Kt);export{Zt as default};
//# sourceMappingURL=BalanceDetailsDialog-D2vR_J7n.js.map
