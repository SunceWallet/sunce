parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"BeS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("react")),t=require("react-i18next"),n=i(require("@material-ui/icons/Add")),r=i(require("@material-ui/icons/Remove")),a=i(require("~Generic/components/MainSelectionButton")),o=require("~Layout/components/Box");function i(e){return e&&e.__esModule?e:{default:e}}var l=e.default.forwardRef(function(i,l){var u=(0,t.useTranslation)().t;return e.default.createElement(o.HorizontalLayout,{ref:l,justifyContent:"space-evenly",margin:"48px 0 24px",padding:"0 8px",wrap:"wrap"},e.default.createElement(a.default,{label:u("trading.action-selection.buy.label"),description:u("trading.action-selection.buy.description"),gutterBottom:!0,onClick:i.onSelectBuy,Icon:n.default}),e.default.createElement(a.default,{label:u("trading.action-selection.sell.label"),description:u("trading.action-selection.sell.description"),gutterBottom:!0,onClick:i.onSelectSell,Icon:r.default}))}),u=exports.default=e.default.memo(l);
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/icons/Add":"NKXr","@material-ui/icons/Remove":"PBsU","~Generic/components/MainSelectionButton":"f7c1","~Layout/components/Box":"YhZi"}],"pyNV":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("react")),l=e(require("./utils/createSvgIcon")),r=(0,l.default)(t.default.createElement(t.default.Fragment,null,t.default.createElement("defs",null,t.default.createElement("path",{id:"a",d:"M0 0h24v24H0V0z"})),t.default.createElement("path",{d:"M1 21h12v2H1zM5.245 8.07l2.83-2.827 14.14 14.142-2.828 2.828zM12.317 1l5.657 5.656-2.83 2.83-5.654-5.66zM3.825 9.485l5.657 5.657-2.828 2.828-5.657-5.657z"})),"Gavel");exports.default=r;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","react":"n8MK","./utils/createSvgIcon":"Atth"}],"diFE":[function(require,module,exports) {
"use strict";function e(e,r){if(0===e.length||0===r.length)return{absoluteSpread:0,relativeSpread:0};var a=Number.parseFloat(e[0].price)-Number.parseFloat(r[0].price);return{absoluteSpread:a,relativeSpread:a/Math.min(Number.parseFloat(e[0].price),Number.parseFloat(r[0].price))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSpread=e;
},{}],"xFeH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useConversionOffers=i;var e=r(require("big.js")),t=r(require("react"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){f=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(f)throw u}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=t=>t.reduce((e,t)=>e.add(t),(0,e.default)(0));function i(r,o){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?r.map(t=>Object.assign(Object.assign({},t),{amount:(0,e.default)(t.price).eq(0)?(0,e.default)(0).toFixed(7):(0,e.default)(t.amount).div(t.price).toFixed(7)})):r,i=t.default.useMemo(()=>{var t,r=[],u=(0,e.default)(0),i=n(a);try{for(i.s();!(t=i.n()).done;){var f=t.value;if(u.gte(o))break;(0,e.default)(f.price).eq(0)||(r.push(f),u=u.add(f.amount))}}catch(l){i.e(l)}finally{i.f()}return{offers:r,volume:u}},[a,o]),f=i.offers.map(t=>(0,e.default)(t.price)),l=f.length>0?f[f.length-1]:void 0,s=i.offers.slice(0,-1),c=i.offers[i.offers.length-1];return{estimatedReturn:u([...s.slice(0,-1).map(t=>(0,e.default)(t.amount).mul(t.price)),c?(0,e.default)(c.price).mul((0,e.default)(c.amount).sub(i.volume.sub(o))):(0,e.default)(0)]),worstPriceOfBestMatches:l}}
},{"big.js":"NYl1","react":"n8MK"}],"qdSY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bigNumberToInputValue=void 0,exports.useCalculation=d;var e=u(require("big.js")),a=require("~Generic/lib/balances"),r=require("~Generic/lib/form"),i=require("~Generic/lib/orderbook"),t=require("~Generic/lib/stellar"),n=require("./conversion");function u(e){return e&&e.__esModule?e:{default:e}}var l=(e,r)=>(0,a.formatBalance)(e,Object.assign({minimumSignificants:3,maximumSignificants:9,groupThousands:!1},r));function c(a,r){var i=(0,t.getSpendableBalance)(a,r).minus((0,e.default)("native"===r.asset_type?t.BASE_RESERVE:(0,e.default)(0)));return i.cmp((0,e.default)(0))<0?(0,e.default)(0):i}function d(a){var u=a.accountData,d=a.priceMode,s=a.primaryAction,o=a.tradePair,m=a.values,f=m.manualPrice,b=m.primaryAmountString,g=m.primaryAsset,p=m.secondaryAsset,v=f&&(0,r.isValidAmount)(f)?"secondary"===d?(0,r.FormBigNumber)(f):(0,r.FormBigNumber)(f).eq(0)?(0,e.default)(0):(0,e.default)(1).div((0,r.FormBigNumber)(f)):(0,e.default)(0),y=b&&(0,r.isValidAmount)(b)?(0,r.FormBigNumber)(b):(0,e.default)(0),B=g?(0,t.findMatchingBalanceLine)(u.balances,g):void 0,A=p?(0,t.findMatchingBalanceLine)(u.balances,p):void 0,S=(0,n.useConversionOffers)("buy"===s?o.asks:o.bids,y.gt(0)?y:(0,e.default)(.01),"sell"===s).worstPriceOfBestMatches,q=(0,i.calculateSpread)(o.asks,o.bids).relativeSpread,P=S&&S.gt(0)?S:void 0,M=v.gt(0)?v:P||(0,e.default)(0),x=y.mul(M),N=M.eq(0)?(0,e.default)(0):(0,e.default)(1).div(M),_=l("secondary"===d?M:N),V=(0,t.getAccountMinimumBalance)(u),h=B?"sell"===s?c(V,B):(0,t.getSpendableBalance)(V,B):(0,e.default)(0),E=A?"buy"===s?c(V,A):(0,t.getSpendableBalance)(V,A):(0,e.default)(0),F="buy"===s?E.gt(0)&&M.gt(0)?(0,e.default)(E).div(M):(0,e.default)(0):h.gt(0)?(0,e.default)(h):(0,e.default)(0);return{defaultPrice:_,effectivePrice:M,maxPrimaryAmount:F,minAccountBalance:V,primaryAmount:y,primaryBalance:B,relativeSpread:q,secondaryAmount:x,secondaryBalance:A,spendablePrimaryBalance:h,spendableSecondaryBalance:E}}exports.bigNumberToInputValue=l;
},{"big.js":"NYl1","~Generic/lib/balances":"HJwV","~Generic/lib/form":"cr7X","~Generic/lib/orderbook":"diFE","~Generic/lib/stellar":"B7Y0","./conversion":"xFeH"}],"eeKn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("react")),t=require("react-i18next"),r=i(require("@material-ui/core/InputAdornment")),a=i(require("@material-ui/core/MenuItem")),n=i(require("@material-ui/core/Select")),l=i(require("@material-ui/core/TextField"));function i(e){return e&&e.__esModule?e:{default:e}}var d=e.default.forwardRef(function(i,d){var o,u,s=!i.primaryAsset||!i.secondaryAsset,c=(0,t.useTranslation)().t,p="primary"===i.priceDenotedIn?null===(o=i.secondaryAsset)||void 0===o?void 0:o.getCode():null===(u=i.primaryAsset)||void 0===u?void 0:u.getCode(),f=p?c("trading.trading-price.label",{unit:p}):c("trading.trading-price.default-label"),m=e.default.createElement(r.default,{position:"end"},e.default.createElement(n.default,{disabled:s,disableUnderline:!0,onChange:e=>i.onSetPriceDenotedIn(e.target.value),style:{fontWeight:400},value:i.priceDenotedIn},e.default.createElement(a.default,{selected:"secondary"===i.priceDenotedIn,value:"secondary"},i.secondaryAsset?i.secondaryAsset.getCode():""),e.default.createElement(a.default,{selected:"primary"===i.priceDenotedIn,value:"primary"},i.primaryAsset?i.primaryAsset.getCode():"")));return e.default.createElement(l.default,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal",min:"0.0000001"},InputProps:{endAdornment:m},inputRef:d,error:Boolean(i.inputError),label:i.inputError||f,onBlur:i.onBlur,onChange:i.onChange,onFocus:i.selectOnFocus?e=>e.target.select():void 0,style:i.style,value:i.defaultPrice?i.defaultPrice:i.manualPrice})}),o=exports.default=e.default.memo(d);
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/InputAdornment":"lydx","@material-ui/core/MenuItem":"dYSc","@material-ui/core/Select":"NCwz","@material-ui/core/TextField":"JZs9"}],"TTSV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=I(require("react")),t=require("react-hook-form"),r=require("react-i18next"),a=require("stellar-sdk"),n=I(require("@material-ui/core/Button")),i=I(require("@material-ui/core/ExpansionPanel")),l=I(require("@material-ui/core/ExpansionPanelDetails")),o=I(require("@material-ui/core/ExpansionPanelSummary")),u=I(require("@material-ui/core/InputAdornment")),s=I(require("@material-ui/core/styles/makeStyles")),c=I(require("@material-ui/core/TextField")),d=I(require("@material-ui/core/Typography")),m=I(require("@material-ui/core/useMediaQuery")),p=I(require("@material-ui/icons/ExpandMore")),f=I(require("@material-ui/icons/Gavel")),y=require("~App/contexts/notifications"),g=require("~App/theme"),b=I(require("~Generic/components/AssetSelector")),h=require("~Generic/components/DialogActions"),x=require("~Generic/components/FormFields"),v=I(require("~Generic/components/Portal")),A=require("~Generic/hooks/stellar"),E=require("~Generic/hooks/stellar-subscriptions"),S=require("~Generic/hooks/userinterface"),w=require("~Generic/lib/errors"),P=require("~Generic/lib/stellar"),q=require("~Generic/lib/form"),k=require("~Generic/lib/transaction"),G=require("~Layout/components/Box"),M=require("../hooks/form"),C=I(require("./TradingPrice"));function I(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,a,n,i,l){try{var o=e[i](l),u=o.value}catch(s){return void r(s)}o.done?t(u):Promise.resolve(u).then(a,n)}function B(e){return function(){var t=this,r=arguments;return new Promise(function(a,n){var i=e.apply(t,r);function l(e){T(i,a,n,l,o,"next",e)}function o(e){T(i,a,n,l,o,"throw",e)}l(void 0)})}}function F(e,t){return j(e)||L(e,t)||O(e,t)||D()}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){if(e){if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function L(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,i,l,o=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=i.call(r)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(e){s=!0,n=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw n}}return o}}function j(e){if(Array.isArray(e))return e}var N=(0,s.default)({expansionPanel:{background:"transparent",margin:"8px 0 !important","&:before":{background:"transparent"}},expansionPanelSummary:{justifyContent:"flex-start",minHeight:"48px !important",padding:0},expansionPanelSummaryContent:{flexGrow:0,marginTop:"0 !important",marginBottom:"0 !important"},expansionPanelDetails:{justifyContent:"flex-start",paddingLeft:0,paddingRight:0,paddingTop:12}});function W(s){var I,T=N(),D=(0,S.useIsMobile)(),O=(0,m.default)("(max-height: 500px)"),V=D||O,L=(0,r.useTranslation)().t,j=F(e.default.useState(!1),2),W=j[0],R=j[1],H=F(e.default.useState("secondary"),2),z=H[0],_=H[1],X=F(e.default.useState(!1),2),U=X[0],$=X[1],Q=(0,t.useForm)({defaultValues:{primaryAsset:s.initialPrimaryAsset,primaryAmountString:"",secondaryAsset:a.Asset.native(),manualPrice:"0"}}),J=s.sendTransaction,K=Q.watch(),Y=K.primaryAsset,Z=K.secondaryAsset,ee=K.manualPrice;e.default.useEffect(()=>{!Y&&s.initialPrimaryAsset&&Q.setValue("primaryAsset",s.initialPrimaryAsset)},[Q,Y,s.initialPrimaryAsset]);var te=(0,A.useHorizon)(s.account.testnet),re=(0,E.useLiveOrderbook)(Y||a.Asset.native(),Z,s.account.testnet),ae=e.default.useMemo(()=>s.trustlines.map(P.balancelineToAsset),[s.trustlines]),ne=(0,M.useCalculation)({accountData:s.accountData,priceMode:z,primaryAction:s.primaryAction,tradePair:re,values:Q.getValues()}),ie=ne.maxPrimaryAmount,le=ne.primaryBalance,oe=ne.defaultPrice,ue=ne.effectivePrice,se=ne.primaryAmount,ce=ne.relativeSpread,de=ne.secondaryAmount,me=ne.secondaryBalance,pe=ne.spendablePrimaryBalance,fe=ne.spendableSecondaryBalance;Q.formState.touched.primaryAmountString&&setTimeout(()=>Q.triggerValidation("primaryAmountString"),0);var ye=e.default.useCallback(()=>{var e=(0,q.FormBigNumber)(ee).gt(0)?ee:oe;if(!((0,q.isValidAmount)(e)&&(0,q.FormBigNumber)(e).gt(0)))return W||R(!0),L("trading.validation.invalid-price")},[oe,W,ee,L]),ge=e.default.useCallback(B(function*(){try{$(!0);var e=ye();if(e)return void Q.setError("manualPrice","invalid-amount",e);if(!Y)throw(0,w.CustomError)("InvariantViolationError","Invariant violation: Should not be able to submit form without having selected the primary asset.",{message:"Should not be able to submit form without having selected the primary asset."});if((0,P.getSpendableBalance)((0,P.getAccountMinimumBalance)(s.accountData),(0,P.findMatchingBalanceLine)(s.accountData.balances,a.Asset.native())).minus(.5).cmp(0)<=0)throw(0,w.CustomError)("LowReserveOrderError","Cannot place order because spendable XLM balance is too low.");var t=yield(0,k.createTransaction)(["buy"===s.primaryAction?a.Operation.manageBuyOffer({buyAmount:se.toFixed(7),buying:Y,offerId:0,price:ue.toFixed(7),selling:Z,withMuxing:!0}):a.Operation.manageSellOffer({amount:se.toFixed(7),buying:Z,offerId:0,price:ue.toFixed(7),selling:Y,withMuxing:!0})],{accountData:s.accountData,horizon:te,walletAccount:s.account});yield J(t)}catch(e){(0,y.trackError)(e)}finally{$(!1)}}),[Q,ue,te,Y,s.account,s.accountData,s.primaryAction,se,Z,J,ye]);return e.default.createElement(G.VerticalLayout,{alignItems:"stretch",alignSelf:V?void 0:"center",grow:1,minHeight:300,maxHeight:"100%",margin:D?void 0:"32px 0 0",padding:"16px 0",shrink:1,width:"100%"},e.default.createElement(G.VerticalLayout,{alignItems:"stretch",alignSelf:D?"stretch":"center",minWidth:D?"75%":450,maxWidth:D?"100%":500,padding:"0 2px",shrink:0,width:"100%"},e.default.createElement(G.HorizontalLayout,{margin:"8px 0"},e.default.createElement(t.Controller,{as:e.default.createElement(b.default,{assets:ae,inputError:Q.errors.primaryAsset&&Q.errors.primaryAsset.message,label:"buy"===s.primaryAction?L("trading.inputs.primary-asset-selector.label.buy"):L("trading.inputs.primary-asset-selector.label.sell"),minWidth:75,showXLM:!0,style:{flexGrow:1,marginRight:24,maxWidth:150,width:"25%"},testnet:s.account.testnet,value:Y}),control:Q.control,name:"primaryAsset",rules:{required:L("trading.validation.primary-asset-missing")}}),e.default.createElement(c.default,{name:"primaryAmountString",inputRef:Q.register({required:L("trading.validation.primary-amount-missing"),validate:e=>{var t=se.lt(0)||e.length>0&&se.eq(0),r="sell"===s.primaryAction&&le&&se.gt(pe)||"buy"===s.primaryAction&&me&&de.gt(fe);return t?L("trading.validation.invalid-amount"):!r||L("trading.validation.not-enough-balance")}}),error:Boolean(Q.errors.primaryAmountString),inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal",min:"0.0000001",max:ie.toFixed(7),style:{height:27}},InputProps:{endAdornment:"buy"===s.primaryAction?void 0:e.default.createElement(u.default,{position:"end"},e.default.createElement(n.default,{disabled:!Y||!le,onClick:()=>{Q.setValue("primaryAmountString",ie.toFixed(7))},style:{boxShadow:"none",fontWeight:400}},L("trading.inputs.primary-amount.max-button.label")))},label:Q.errors.primaryAmountString&&Q.errors.primaryAmountString.message?Q.errors.primaryAmountString.message:"buy"===s.primaryAction?L("trading.inputs.primary-amount.label.buy"):L("trading.inputs.primary-amount.label.sell"),placeholder:L("trading.inputs.primary-amount.placeholder","Max. ".concat((0,M.bigNumberToInputValue)(ie)),{amount:(0,M.bigNumberToInputValue)(ie)}),required:!0,style:{flexGrow:1,flexShrink:1,width:"55%"}})),e.default.createElement(G.HorizontalLayout,{margin:"8px 0 32px"},e.default.createElement(t.Controller,{as:e.default.createElement(b.default,{assets:ae,label:"buy"===s.primaryAction?L("trading.inputs.secondary-asset-selector.label.buy"):L("trading.inputs.secondary-asset-selector.label.sell"),minWidth:75,showXLM:!0,style:{flexGrow:1,marginRight:24,maxWidth:150,width:"25%"},testnet:s.account.testnet,value:Z}),control:Q.control,name:"secondaryAsset",rules:{required:L("trading.validation.secondary-asset-missing")}}),e.default.createElement(x.ReadOnlyTextfield,{disableUnderline:!0,inputProps:{style:{height:27}},label:"buy"===s.primaryAction?L("trading.inputs.estimated-costs.label.buy"):L("trading.inputs.estimated-costs.label.sell"),placeholder:"Max. ".concat(me?me.balance:"0"),style:{flexGrow:1,flexShrink:1,width:"55%"},inputMode:"decimal",type:"number",value:(0,M.bigNumberToInputValue)(de,{groupThousands:!1})})),e.default.createElement(i.default,{className:T.expansionPanel,elevation:0,expanded:W,onChange:()=>R(!W)},e.default.createElement(o.default,{classes:{root:T.expansionPanelSummary,content:T.expansionPanelSummaryContent},expandIcon:e.default.createElement(p.default,null)},e.default.createElement(d.default,{align:"center",style:{flexGrow:1}},L("trading.advanced.header"))),e.default.createElement(l.default,{className:T.expansionPanelDetails},e.default.createElement(t.Controller,{as:e.default.createElement(C.default,{defaultPrice:Q.formState.touched.manualPrice?void 0:oe,inputError:Q.errors.manualPrice&&Q.errors.manualPrice.message,onSetPriceDenotedIn:_,priceDenotedIn:z,primaryAsset:Y,secondaryAsset:Z,selectOnFocus:!0,style:{flexGrow:1,maxWidth:250,width:"55%"}}),control:Q.control,name:"manualPrice",rules:{validate:e=>{return(0,q.isValidAmount)(e)||L("trading.validation.invalid-price")}},valueName:"manualPrice"}))),ce>=.015?e.default.createElement(G.Box,{margin:"32px 0 0",padding:"8px 12px",style:{background:g.warningColor}},e.default.createElement("b",null,L("trading.warning.title")),e.default.createElement("br",null),L("trading.warning.message","The spread between buying and selling price is about ".concat((100*ce).toFixed(1),"%."),{spread:(100*ce).toFixed(1)})):null,e.default.createElement(v.default,{target:null===(I=s.dialogActionsRef)||void 0===I?void 0:I.element},e.default.createElement(h.DialogActionsBox,{desktopStyle:{marginTop:32}},e.default.createElement(h.ActionButton,{loading:U,icon:e.default.createElement(f.default,null),onClick:Q.handleSubmit(ge),type:"primary"},L("trading.action.submit"))))))}var R=exports.default=e.default.memo(W);
},{"react":"n8MK","react-hook-form":"JHi9","react-i18next":"LuhD","stellar-sdk":"n9dh","@material-ui/core/Button":"uzLy","@material-ui/core/ExpansionPanel":"VT0G","@material-ui/core/ExpansionPanelDetails":"gInR","@material-ui/core/ExpansionPanelSummary":"MGbU","@material-ui/core/InputAdornment":"lydx","@material-ui/core/styles/makeStyles":"AdTK","@material-ui/core/TextField":"JZs9","@material-ui/core/Typography":"pi2F","@material-ui/core/useMediaQuery":"EWA0","@material-ui/icons/ExpandMore":"evfY","@material-ui/icons/Gavel":"pyNV","~App/contexts/notifications":"bqF5","~App/theme":"j28y","~Generic/components/AssetSelector":"Et5A","~Generic/components/DialogActions":"wklB","~Generic/components/FormFields":"p9j6","~Generic/components/Portal":"eTJ5","~Generic/hooks/stellar":"tg2C","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Generic/lib/errors":"U9Sl","~Generic/lib/stellar":"B7Y0","~Generic/lib/form":"cr7X","~Generic/lib/transaction":"abl7","~Layout/components/Box":"YhZi","../hooks/form":"qdSY","./TradingPrice":"eeKn"}],"r3Bx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=S(require("react")),t=require("react-i18next"),r=S(require("@material-ui/core/Box")),n=S(require("@material-ui/core/Typography")),a=O(require("~App/routes")),u=require("~Generic/components/DialogActions"),o=require("~Generic/components/ErrorBoundaries"),l=S(require("~Generic/components/MainTitle")),c=S(require("~Generic/components/Portal")),i=S(require("~Generic/components/ScrollableBalances")),s=S(require("~Generic/components/TestnetBadge")),f=S(require("~Generic/components/ViewLoading")),d=require("~Generic/hooks/stellar-subscriptions"),m=require("~Generic/hooks/userinterface"),p=require("~Generic/lib/routes"),y=require("~Generic/lib/stellar"),b=require("~Generic/lib/url"),g=S(require("~Layout/components/Carousel")),h=S(require("~Layout/components/DialogBody")),v=S(require("~Transaction/components/TransactionSender")),A=S(require("./MainActionSelection")),E=S(require("./TradingForm"));function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(q=function(e){return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=q(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function S(e){return e&&e.__esModule?e:{default:e}}function j(e,t){return k(e)||_(e,t)||M(e,t)||G()}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,u,o,l=[],c=!0,i=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=u.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return l}}function k(e){if(Array.isArray(e))return e}function w(e){if((0,p.matchesRoute)(e,a.tradeAsset("*",void 0,"*"))){var t=(0,b.getLastArgumentFromURL)(e);if("buy"!==t&&"sell"!==t)return(0,y.parseAssetID)(t)}}function B(b){var v=(0,d.useLiveAccountData)(b.account.accountID,b.account.testnet),q=(0,m.useDialogActions)(),O=(0,m.useRouter)(),S=j(e.default.useState(),2),G=S[0],M=S[1],T=(0,t.useTranslation)().t;e.default.useEffect(()=>{var e=w(O.location.pathname);M(e)},[O.location.pathname]);var _=e.default.useMemo(()=>v.balances.filter(e=>"native"!==e.asset_type),[v.balances]),k=(0,p.matchesRoute)(O.location.pathname,a.tradeAsset("*","buy"))?"buy":(0,p.matchesRoute)(O.location.pathname,a.tradeAsset("*","sell"))?"sell":void 0,B=e.default.useCallback(()=>{O.history.push(a.tradeAsset(b.account.id,void 0,G?(0,y.stringifyAsset)(G):void 0))},[G,b.account,O.history]),D=e.default.useCallback(e=>{O.history.push(a.tradeAsset(b.account.id,e,G?(0,y.stringifyAsset)(G):void 0))},[G,b.account,O.history]),x=e.default.useMemo(()=>e.default.createElement(g.default,{current:k?1:0},e.default.createElement(A.default,{onSelectBuy:()=>D("buy"),onSelectSell:()=>D("sell")}),e.default.createElement(e.default.Suspense,{fallback:e.default.createElement(f.default,null)},e.default.createElement(E.default,{account:b.account,accountData:v,dialogActionsRef:k?q:null,initialPrimaryAsset:G,primaryAction:k||"buy",sendTransaction:b.sendTransaction,trustlines:_}))),[v,q,G,k,b.account,b.sendTransaction,D,_]),P=e.default.useMemo(()=>e.default.createElement(r.default,{margin:"32px 0 0",textAlign:"center"},e.default.createElement(n.default,null,T("trading.no-assets-info")),e.default.createElement(c.default,{target:q.element},e.default.createElement(u.DialogActionsBox,null,e.default.createElement(u.ActionButton,{autoFocus:!0,onClick:()=>O.history.push(a.manageAccountAssets(b.account.id)),type:"primary"},T("trading.action.add-asset"))))),[q,b.account,O,T]);return e.default.createElement(h.default,{top:e.default.createElement(e.default.Fragment,null,e.default.createElement(l.default,{title:e.default.createElement("span",null,T("trading.title"),b.account.testnet?e.default.createElement(s.default,{style:{marginLeft:8}}):null),onBack:k?B:b.onClose}),e.default.createElement(i.default,{account:b.account,compact:!0})),actions:q},e.default.createElement(o.InlineErrorBoundary,null,_.length>0?x:P))}function D(t){var r=(0,m.useRouter)();return e.default.createElement(v.default,{account:t.account,onSubmissionCompleted:()=>r.history.push(a.account(t.account.id))},r=>e.default.createElement(B,Object.assign({},t,r)))}var x=exports.default=D;
},{"react":"n8MK","react-i18next":"LuhD","@material-ui/core/Box":"VQeO","@material-ui/core/Typography":"pi2F","~App/routes":"kQ9N","~Generic/components/DialogActions":"wklB","~Generic/components/ErrorBoundaries":"KnCo","~Generic/components/MainTitle":"hwFi","~Generic/components/Portal":"eTJ5","~Generic/components/ScrollableBalances":"z2Fq","~Generic/components/TestnetBadge":"asSz","~Generic/components/ViewLoading":"iTOb","~Generic/hooks/stellar-subscriptions":"aNYm","~Generic/hooks/userinterface":"rVD3","~Generic/lib/routes":"uNGg","~Generic/lib/stellar":"B7Y0","~Generic/lib/url":"kvW1","~Layout/components/Carousel":"L9yD","~Layout/components/DialogBody":"krjO","~Transaction/components/TransactionSender":"bNi5","./MainActionSelection":"BeS8","./TradingForm":"TTSV"}]},{},[], null)