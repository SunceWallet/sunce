import{c0 as Le,c1 as se,r as W,f as xe,R as n,a6 as w,Z as q,av as Me,b9 as De,$ as k,H as G,ax as O,ai as D,aS as Re,b1 as Y,aa as j,ad as V,a0 as Be,a1 as ie,a2 as fe,au as P,al as Oe,bb as ke,bx as K,c2 as Se,bM as ye,ak as $,aZ as ve,a$ as _e,aM as ze,c3 as oe,Y as Pe,aE as Ne,a9 as We,o as Ue,a_ as Fe,be as Ge,ap as Ke,bg as $e}from"./app-TVqMyUSl.js";import{e as Je,L as H,f as le,B as Ve,A as be,V as He,T as Ze,u as Xe,j as Qe,k as U,c as qe,l as Ye,s as je,m as ce,n as et,p as Z,E as tt,q as nt}from"./app-stage2-DL7tneXE.js";import{V as at}from"./VisibilityIconButton-C4jrfHGt.js";var re=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function st(t,e){return!!(t===e||re(t)&&re(e))}function it(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!st(t[s],e[s]))return!1;return!0}function X(t,e){e===void 0&&(e=it);var s,i=[],c,g=!1;function S(){for(var r=[],m=0;m<arguments.length;m++)r[m]=arguments[m];return g&&s===this&&e(r,i)||(c=t.apply(this,r),g=!0,s=this,i=r),c}return S}var ot=typeof performance=="object"&&typeof performance.now=="function",ue=ot?function(){return performance.now()}:function(){return Date.now()};function de(t){cancelAnimationFrame(t.id)}function lt(t,e){var s=ue();function i(){ue()-s>=e?t.call(null):c.id=requestAnimationFrame(i)}var c={id:requestAnimationFrame(i)};return c}var Q=-1;function me(t){if(t===void 0&&(t=!1),Q===-1||t){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}var B=null;function he(t){if(t===void 0&&(t=!1),B===null||t){var e=document.createElement("div"),s=e.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";var i=document.createElement("div"),c=i.style;return c.width="100px",c.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?B="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?B="negative":B="positive-ascending"),document.body.removeChild(e),B}return B}var ct=150,rt=function(e,s){return e};function ut(t){var e,s=t.getItemOffset,i=t.getEstimatedTotalSize,c=t.getItemSize,g=t.getOffsetForIndexAndAlignment,S=t.getStartIndexForOffset,r=t.getStopIndexForStartIndex,m=t.initInstanceProps,A=t.shouldResetStyleCacheOnItemSizeChange,p=t.validateProps;return e=function(I){Le(L,I);function L(b){var a;return a=I.call(this,b)||this,a._instanceProps=m(a.props,se(a)),a._outerRef=void 0,a._resetIsScrollingTimeoutId=null,a.state={instance:se(a),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof a.props.initialScrollOffset=="number"?a.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},a._callOnItemsRendered=void 0,a._callOnItemsRendered=X(function(o,l,u,h){return a.props.onItemsRendered({overscanStartIndex:o,overscanStopIndex:l,visibleStartIndex:u,visibleStopIndex:h})}),a._callOnScroll=void 0,a._callOnScroll=X(function(o,l,u){return a.props.onScroll({scrollDirection:o,scrollOffset:l,scrollUpdateWasRequested:u})}),a._getItemStyle=void 0,a._getItemStyle=function(o){var l=a.props,u=l.direction,h=l.itemSize,y=l.layout,d=a._getItemStyleCache(A&&h,A&&y,A&&u),f;if(d.hasOwnProperty(o))f=d[o];else{var v=s(a.props,o,a._instanceProps),x=c(a.props,o,a._instanceProps),M=u==="horizontal"||y==="horizontal",T=u==="rtl",C=M?v:0;d[o]=f={position:"absolute",left:T?void 0:C,right:T?C:void 0,top:M?0:v,height:M?"100%":x,width:M?x:"100%"}}return f},a._getItemStyleCache=void 0,a._getItemStyleCache=X(function(o,l,u){return{}}),a._onScrollHorizontal=function(o){var l=o.currentTarget,u=l.clientWidth,h=l.scrollLeft,y=l.scrollWidth;a.setState(function(d){if(d.scrollOffset===h)return null;var f=a.props.direction,v=h;if(f==="rtl")switch(he()){case"negative":v=-h;break;case"positive-descending":v=y-u-h;break}return v=Math.max(0,Math.min(v,y-u)),{isScrolling:!0,scrollDirection:d.scrollOffset<v?"forward":"backward",scrollOffset:v,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._onScrollVertical=function(o){var l=o.currentTarget,u=l.clientHeight,h=l.scrollHeight,y=l.scrollTop;a.setState(function(d){if(d.scrollOffset===y)return null;var f=Math.max(0,Math.min(y,h-u));return{isScrolling:!0,scrollDirection:d.scrollOffset<f?"forward":"backward",scrollOffset:f,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._outerRefSetter=function(o){var l=a.props.outerRef;a._outerRef=o,typeof l=="function"?l(o):l!=null&&typeof l=="object"&&l.hasOwnProperty("current")&&(l.current=o)},a._resetIsScrollingDebounced=function(){a._resetIsScrollingTimeoutId!==null&&de(a._resetIsScrollingTimeoutId),a._resetIsScrollingTimeoutId=lt(a._resetIsScrolling,ct)},a._resetIsScrolling=function(){a._resetIsScrollingTimeoutId=null,a.setState({isScrolling:!1},function(){a._getItemStyleCache(-1,null)})},a}L.getDerivedStateFromProps=function(a,o){return dt(a,o),p(a),null};var E=L.prototype;return E.scrollTo=function(a){a=Math.max(0,a),this.setState(function(o){return o.scrollOffset===a?null:{scrollDirection:o.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},E.scrollToItem=function(a,o){o===void 0&&(o="auto");var l=this.props,u=l.itemCount,h=l.layout,y=this.state.scrollOffset;a=Math.max(0,Math.min(a,u-1));var d=0;if(this._outerRef){var f=this._outerRef;h==="vertical"?d=f.scrollWidth>f.clientWidth?me():0:d=f.scrollHeight>f.clientHeight?me():0}this.scrollTo(g(this.props,a,o,y,this._instanceProps,d))},E.componentDidMount=function(){var a=this.props,o=a.direction,l=a.initialScrollOffset,u=a.layout;if(typeof l=="number"&&this._outerRef!=null){var h=this._outerRef;o==="horizontal"||u==="horizontal"?h.scrollLeft=l:h.scrollTop=l}this._callPropsCallbacks()},E.componentDidUpdate=function(){var a=this.props,o=a.direction,l=a.layout,u=this.state,h=u.scrollOffset,y=u.scrollUpdateWasRequested;if(y&&this._outerRef!=null){var d=this._outerRef;if(o==="horizontal"||l==="horizontal")if(o==="rtl")switch(he()){case"negative":d.scrollLeft=-h;break;case"positive-ascending":d.scrollLeft=h;break;default:var f=d.clientWidth,v=d.scrollWidth;d.scrollLeft=v-f-h;break}else d.scrollLeft=h;else d.scrollTop=h}this._callPropsCallbacks()},E.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&de(this._resetIsScrollingTimeoutId)},E.render=function(){var a=this.props,o=a.children,l=a.className,u=a.direction,h=a.height,y=a.innerRef,d=a.innerElementType,f=a.innerTagName,v=a.itemCount,x=a.itemData,M=a.itemKey,T=M===void 0?rt:M,C=a.layout,R=a.outerElementType,_=a.outerTagName,Te=a.style,Ce=a.useIsScrolling,Ae=a.width,ee=this.state.isScrolling,J=u==="horizontal"||C==="horizontal",Ee=J?this._onScrollHorizontal:this._onScrollVertical,te=this._getRangeToRender(),pe=te[0],we=te[1],ne=[];if(v>0)for(var z=pe;z<=we;z++)ne.push(W.createElement(o,{data:x,key:T(z,x),index:z,isScrolling:Ce?ee:void 0,style:this._getItemStyle(z)}));var ae=i(this.props,this._instanceProps);return W.createElement(R||_||"div",{className:l,onScroll:Ee,ref:this._outerRefSetter,style:xe({position:"relative",height:h,width:Ae,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:u},Te)},W.createElement(d||f||"div",{children:ne,ref:y,style:{height:J?"100%":ae,pointerEvents:ee?"none":void 0,width:J?ae:"100%"}}))},E._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var a=this.props.itemCount;if(a>0){var o=this._getRangeToRender(),l=o[0],u=o[1],h=o[2],y=o[3];this._callOnItemsRendered(l,u,h,y)}}if(typeof this.props.onScroll=="function"){var d=this.state,f=d.scrollDirection,v=d.scrollOffset,x=d.scrollUpdateWasRequested;this._callOnScroll(f,v,x)}},E._getRangeToRender=function(){var a=this.props,o=a.itemCount,l=a.overscanCount,u=this.state,h=u.isScrolling,y=u.scrollDirection,d=u.scrollOffset;if(o===0)return[0,0,0,0];var f=S(this.props,d,this._instanceProps),v=r(this.props,f,d,this._instanceProps),x=!h||y==="backward"?Math.max(1,l):1,M=!h||y==="forward"?Math.max(1,l):1;return[Math.max(0,f-x),Math.max(0,Math.min(o-1,v+M)),f,v]},L}(W.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var dt=function(e,s){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,s.instance},mt=ut({getItemOffset:function(e,s){var i=e.itemSize;return s*i},getItemSize:function(e,s){var i=e.itemSize;return i},getEstimatedTotalSize:function(e){var s=e.itemCount,i=e.itemSize;return i*s},getOffsetForIndexAndAlignment:function(e,s,i,c,g,S){var r=e.direction,m=e.height,A=e.itemCount,p=e.itemSize,I=e.layout,L=e.width,E=r==="horizontal"||I==="horizontal",b=E?L:m,a=Math.max(0,A*p-b),o=Math.min(a,s*p),l=Math.max(0,s*p-b+p+S);switch(i==="smart"&&(c>=l-b&&c<=o+b?i="auto":i="center"),i){case"start":return o;case"end":return l;case"center":{var u=Math.round(l+(o-l)/2);return u<Math.ceil(b/2)?0:u>a+Math.floor(b/2)?a:u}case"auto":default:return c>=l&&c<=o?c:c<l?l:o}},getStartIndexForOffset:function(e,s){var i=e.itemCount,c=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(s/c)))},getStopIndexForStartIndex:function(e,s,i){var c=e.direction,g=e.height,S=e.itemCount,r=e.itemSize,m=e.layout,A=e.width,p=c==="horizontal"||m==="horizontal",I=s*r,L=p?A:g,E=Math.ceil((L+i-I)/r);return Math.max(0,Math.min(S-1,s+E-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function ht(t){if(!t.container)return null;const e=t.container.clientHeight,s=t.container.clientWidth;return n.createElement(mt,{height:e,itemCount:t.itemCount,itemSize:t.itemSize,width:s},t.children)}const gt=[new w.Asset("EURMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("MTLAP","GCNVDZIHGX473FEI7IXCUAEXUJ4BGCKEMHF36VYP5EMS7PX2QBLAMTLA"),new w.Asset("MTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("MTLRECT","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("BTCMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("SATSMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("USDM","GDHDC4GBNPMENZAOBB4NCQ25TGZPDRK6ZGWUGSI22TVFATOLRPSUUSDM"),new w.Asset("USDC","GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN")],ft=[new w.Asset("USD","GCKFBEIYV2U22IO2BJ4KVJOIP7XPWQGQFKKWXR6DOSJBV7STMAQSMTGG"),new w.Asset("SRT","GCDNJUBQSX7AJWLJACMJ7I4BC3Z47BQUTMHEICZLE6MU4KQBRYG5JY6B")],St=q({clickable:{},icon:{[D.down(350)]:{minWidth:48}},logo:{[D.down(350)]:{width:36,height:36}},logoHidden:{visibility:"hidden"},badge:{top:4,right:4,boxShadow:"0 0 3px 1px black"},mainListItemText:{flex:"1 1 auto",whiteSpace:"nowrap"},mainListItemTextPrimaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:15},[D.down(350)]:{fontSize:13}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:14},[D.down(350)]:{fontSize:12}},balanceListItemText:{flex:"1 0 auto",marginLeft:8,textAlign:"right"},balanceText:{fontSize:"140%",[D.down(350)]:{fontSize:"120%"}},actions:{flex:"0 0 auto",marginLeft:4,marginRight:-16,width:48},visibilityIcon:{color:"rgba(0, 0, 0, 0.54)","&.favorite":{color:"#FFD700"},"&.hidden":{color:"rgba(0, 0, 0, 0.38)"}},visibilityIconContainer:{marginRight:8,display:"flex",alignItems:"center"}});function yt(t){const e=St(),s=`${t.className||""} ${t.onClick?e.clickable:""}`,i=n.useMemo(()=>Me(t.balance),[t.balance]),c=De(i,t.testnet),{t:g}=k(),S=n.useMemo(()=>t.hideBalance?null:n.createElement(Je,{assetCode:"",balance:t.balance.balance,showInfinity:t.isOwnAsset}),[t.balance.balance,t.hideBalance]);if(t.balance.asset_type==="native")return n.createElement(G,{button:!!t.onClick,className:s,onClick:t.onClick,style:t.style},n.createElement(H,{className:e.icon},n.createElement(le,{asset:i,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,testnet:t.testnet})),n.createElement(O,{classes:{root:e.mainListItemText,primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:t.spendableBalance?g("account.balance-details.item.spendable-balance.primary"):"Stellar Lumens (XLM)",secondary:t.spendableBalance?void 0:"stellar.org"}),n.createElement(O,{classes:{root:e.balanceListItemText,primary:e.balanceText},primary:S}));const r=c&&c.name||t.balance.asset_code,m=r!==t.balance.asset_code?`${r} (${t.balance.asset_code})`:t.balance.asset_code;return n.createElement(G,{button:!!t.onClick,className:s,onClick:t.onClick,style:t.style},t.isEditMode&&t.accountId&&n.createElement(H,{className:e.icon,style:{minWidth:"30px",marginRight:"8px"}},n.createElement(at,{accountId:t.accountId,asset:i})),n.createElement(H,{className:e.icon},n.createElement(Ve,{badgeContent:t.badgeCount,classes:{badge:e.badge},color:"primary"},n.createElement(le,{asset:i,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,dark:!0,testnet:t.testnet}))),n.createElement(O,{className:e.mainListItemText,classes:{primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:m,secondary:n.createElement(be,{publicKey:t.balance.asset_issuer,testnet:t.testnet})}),n.createElement(O,{className:e.balanceListItemText,primary:S,primaryTypographyProps:{className:e.balanceText}}))}const N=n.memo(yt);function vt(t){const[e,s]=n.useState(""),[i,c]=n.useState(""),[g,S]=n.useState(""),r=Re("(max-width:450px)"),{t:m}=k(),A=()=>t.createAddAssetTransaction(new w.Asset(e,i),{limit:g||void 0}),p=()=>t.sendTransaction(A);return n.createElement(Y,{top:n.createElement(j,{hideBackButton:!0,onBack:t.onClose,title:m("account-settings.custom-trustline.title")})},n.createElement("form",{noValidate:!0,style:{display:"block",width:"100%"}},n.createElement(V,{label:m("account-settings.custom-trustline.textfield.code.label"),placeholder:"EURT, USDT, BTC, ...",autoFocus:!0,margin:"dense",name:"asset-code",value:e,onChange:I=>s(I.target.value)}),n.createElement(V,{fullWidth:!0,label:m("account-settings.custom-trustline.textfield.issuer.label"),placeholder:m("account-settings.custom-trustline.textfield.issuer.placeholder"),margin:"dense",name:"asset-issuer",value:i,onChange:I=>c(I.target.value)}),n.createElement(V,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal"},fullWidth:!0,label:m("account-settings.custom-trustline.textfield.limit.label"),placeholder:m("account-settings.custom-trustline.textfield.limit.placeholder"),margin:"dense",name:"trust-limit",value:g,type:"number",onChange:I=>S(I.target.value)}),n.createElement(Be,{preventMobileActionsBox:!0},n.createElement(ie,{onClick:t.onClose},m("account-settings.custom-trustline.action.cancel")),n.createElement(ie,{icon:n.createElement(He,null),loading:t.txCreationPending,onClick:p,type:"primary"},m(r?"account-settings.custom-trustline.action.trust.short":"account-settings.custom-trustline.action.trust.long")))))}const bt=n.memo(vt);function It(t,e){return e=e.toLowerCase(),t.code.toLowerCase().startsWith(e)||t.name.toLowerCase().startsWith(e)}function Tt(t,e){return e=e.toLowerCase(),t.name.toLowerCase().startsWith(e)}function Ie(t){return{asset_code:t.getCode(),asset_issuer:t.getIssuer(),asset_type:t.getAssetType(),balance:"0",is_authorized:!0,is_authorized_to_maintain_liabilities:!0,last_modified_ledger:0,limit:"0",buying_liabilities:"0",selling_liabilities:"0",is_clawback_enabled:!1}}function Ct(t,e){const s={};for(const i of t){const c=e(i),g=s[c];g?g.push(i):s[c]=[i]}return s}const At=n.memo(function(e){return n.createElement(n.Fragment,null,e.assets.map(s=>n.createElement(N,{key:P(s),balance:Ie(s),hideBalance:!0,onClick:()=>e.onOpenAssetDetails(s),testnet:e.testnet})))}),F=73,ge=q({assetItem:{borderRadius:"0 !important",height:F},issuerItem:{background:"white",borderRadius:8,height:F},noResultItem:{background:"white",borderRadius:8,height:F}});function Et(t,e,s){const i=[];for(const S of Object.keys(e))i.push({type:"issuer",issuer:S}),i.push(...e[S].map(r=>({type:"asset",issuer:S,record:r})));function c(S){const r=ge(),m=i[S.index],{t:A}=k();return n.createElement("div",{style:S.style},n.createElement(n.Suspense,{fallback:n.createElement($,null)},m.type==="issuer"?n.createElement(G,{key:m.issuer,className:r.issuerItem},n.createElement(O,{primary:m.issuer==="native"?"stellar.org":n.createElement(be,{publicKey:m.issuer,testnet:t.testnet}),secondary:e[m.issuer].length===1?A("account.add-asset.item.issuer.secondary.one-asset"):A("account.add-asset.item.issuer.secondary.more-than-one-asset",{amount:e[m.issuer].length}),secondaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}}})):null,m.type==="asset"?n.createElement(N,{balance:Ie(oe(m.record)),className:r.assetItem,hideBalance:!0,onClick:()=>s(oe(m.record)),style:{paddingLeft:32},testnet:t.testnet}):null))}function g(){const S=ge(),{t:r}=k();return n.createElement(G,{key:0,className:S.noResultItem},n.createElement(O,{primary:r("account.add-asset.item.no-result.primary"),secondary:r("account.add-asset.item.no-result.secondary")}))}return i.length>0?(c.count=i.length,c):(g.count=1,g)}const pt=q({grow:{flexGrow:1},list:{marginTop:16,padding:0},searchField:{background:"white",flexShrink:0,flexGrow:0,marginBottom:16},searchFieldInput:{fontSize:16,paddingTop:14,paddingBottom:14}}),wt=n.memo(function(e){const s=e.account.testnet?ft:gt,i=pt(),c=n.useRef(null),g=Xe(e.account.testnet),S=fe(),{t:r}=k(),m=Qe(e.account.testnet),[A,p]=n.useState(!1),[I,L]=n.useState(""),[E,b]=n.useState(!1),a=n.useCallback(T=>S.history.push(U(e.account.id,P(T))),[S.history,e.account.id]),o=()=>p(!0),l=()=>p(!1),u=async(T,C={})=>{const R=[w.Operation.changeTrust({asset:T,limit:C.limit,withMuxing:!0})];return qe(R,{accountData:e.accountData,horizon:e.horizon,walletAccount:e.account})},h=async T=>{try{b(!0);const C=await T();b(!1),await e.sendTransaction(C)}catch(C){b(!1),ze(C)}},y=T=>e.accountData.balances.some(C=>C.asset_code===T.code&&C.asset_issuer===T.issuer),d=n.useCallback((T,C)=>{const R=C.toLowerCase(),_=m.lookup(T);return _?_.domain.toLowerCase().includes(R)||_.name.toLowerCase().includes(R):!1},[m]),f=s.filter(T=>!y(T)),v=n.useCallback(T=>{L(T.target.value)},[]),x=n.useMemo(()=>{const T=g.filter(C=>It(C,I)||Tt(C.issuer_detail,I)||d(C.issuer,I));return Ct(T,C=>C.issuer)},[g,I,d]),M=n.useMemo(()=>Et(e.account,x,a),[e.account,x,a]);return n.createElement(Y,{excessWidth:24,top:n.createElement(j,{onBack:e.onClose,title:r("account.add-asset.title")})},n.createElement(Oe,{grow:!0,margin:"16px 0 0"},n.createElement(ke,{autoFocus:!0,className:i.searchField,inputProps:{className:i.searchFieldInput},onChange:v,value:I,placeholder:r("account.add-asset.search-field.placeholder")}),n.createElement(K,{className:i.list},n.createElement(Se,{onClick:o},n.createElement(ye,null),"  ",r("account.add-asset.button.add-custom-asset.label"))),n.createElement(n.Suspense,{fallback:n.createElement($,null)},I?n.createElement("ul",{className:`${i.list} ${i.grow}`,ref:c},n.createElement(ht,{container:c.current,itemCount:M.count,itemSize:F},M)):n.createElement(K,{className:`${i.list} ${i.grow}`},n.createElement(At,{assets:f,onOpenAssetDetails:a,testnet:e.account.testnet})))),n.createElement(ve,{open:A,onClose:l,TransitionComponent:_e},n.createElement(n.Suspense,{fallback:n.createElement($,null)},n.createElement(bt,{account:e.account,accountData:e.accountData,createAddAssetTransaction:u,horizon:e.horizon,onClose:l,sendTransaction:h,txCreationPending:E}))))});function Lt(t){return n.createElement(Ze,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:e,sendTransaction:s})=>n.createElement(wt,{...t,horizon:e,sendTransaction:s}))}const xt=n.memo(Lt),Mt=n.memo(function(e){return n.createElement(n.Fragment,null,e.assetBalances.map(({asset:s,balance:i})=>{var S;const c=e.openOffers.filter(r=>r.buying.asset_code===s.code&&r.buying.asset_issuer===s.issuer||r.selling.asset_code===s.code&&r.selling.asset_issuer===s.issuer),g=e.olderOffersAvailable&&c.length>=10?"10+":c.length;return(S=e.assetSettings[P(s)])==null||S.visibility,n.createElement(N,{key:P(s),badgeCount:g,balance:i,onClick:()=>e.onOpenAssetDetails(s),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet,isOwnAsset:e.account.accountID===s.getIssuer(),isEditMode:e.isEditMode})}))}),Dt=n.memo(function(e){return n.createElement(n.Fragment,null,n.createElement(N,{key:"XLM",balance:e.balance,onClick:()=>e.onOpenAssetDetails(w.Asset.native()),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet}),n.createElement(N,{key:"XLM:spendable",balance:{...e.balance,balance:Ke(e.balance.balance).eq(0)?"0":Ge($e(e.accountData),e.balance).toString()},hideLogo:!0,onClick:()=>e.onOpenAssetDetails(w.Asset.native()),spendableBalance:!0,style:{marginTop:-8,paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet}))});function Rt(t){const e=Pe(t.account.accountID,t.account.testnet),{offers:s,olderOffersAvailable:i}=Ne(t.account.accountID,t.account.testnet),c=We(),g=fe(),{t:S}=k(),[r,m]=n.useState(!1),{assetSettings:A}=Ye(t.account.accountID),[p,I]=n.useState([]);n.useEffect(()=>{if(r)return;const f=je(e.balances,A).filter(v=>v.asset_type!=="native").map(v=>({asset:new w.Asset(v.asset_code,v.asset_issuer),balance:v}));I(f)},[e.balances,A,r]);const L=n.useCallback(()=>g.history.push(ce(t.account.id)),[t.account.id,g.history]),E=n.useCallback(()=>g.history.push(et(t.account.id)),[t.account.id,g.history]),b=Z(g.location.pathname,ce(t.account.id)),a=Z(g.location.pathname,U("*","*"))&&!Z(g.location.pathname,U("*","manage")),o=f=>g.history.push(U(t.account.id,P(f))),l=()=>{m(!r)},u=e.balances.find(f=>f.asset_type==="native"),h=c?0:8,y=16,d=0;return n.createElement(Y,{excessWidth:12,top:n.createElement(j,{onBack:t.onClose,title:t.account.name,actions:n.createElement(Ue,{onClick:l,color:r?"primary":"default"},n.createElement(tt,null))})},n.createElement(K,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px"}},n.createElement(Se,{gutterBottom:!0,onClick:L,style:{padding:`0 ${y}px`,marginLeft:d,marginRight:d}},n.createElement(ye,null),"  ",S("account.balance-details.button.add-asset.label")),n.createElement(Mt,{account:t.account,assetBalances:p,hmargin:d,hpadding:y,onOpenAssetDetails:o,openOffers:s,olderOffersAvailable:i,isEditMode:r,assetSettings:A})),n.createElement(nt,{style:{margin:"16px 0"}}),n.createElement(K,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px 8px"}},u?n.createElement(Dt,{account:t.account,accountData:e,balance:u,hmargin:d,hpadding:y,onOpenAssetDetails:o}):null),n.createElement(ve,{fullScreen:!0,open:b||a,onClose:E,TransitionComponent:Fe},n.createElement(n.Suspense,{fallback:n.createElement($,null)},n.createElement(xt,{account:t.account,accountData:e,hpadding:h,itemHPadding:y,onClose:E}))))}const _t=n.memo(Rt);export{_t as default};
//# sourceMappingURL=BalanceDetailsDialog-Tzh1lTjq.js.map
