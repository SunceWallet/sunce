import{bW as yn,bV as Sa,aP as jn,ci as st,cj as _a,ck as Ta,cl as pn,a6 as de,R as o,Z as Bn,a5 as ae,cm as Ra,aM as Re,bH as Ln,aT as xa,cn as Pt,co as Aa,ap as he,bO as Ca,a2 as Oa,$ as G,ag as Un,E as fe,a0 as Ie,a1 as Ne,a9 as qn,al as oe,a8 as ka,ak as Mn,c8 as it,b7 as Da,aW as ot,am as Pa,ad as Ct,Y as $n,be as Wn,bx as Kn,aw as We,bE as Vn,aD as Fa,bn as _t,b0 as Ia,bq as Na}from"./app-BId2UBC2.js";import{ar as ja,c as Ba,P as je,m as La,as as Ua,w as Fe,o as qa,M as at,y as Ma,v as $a,S as Wa,G as Ka,at as Va}from"./app-stage2-DKNwamH1.js";import{L as za}from"./LumenPurchaseOptions-DeoldJIK.js";import{T as Ha}from"./ConnectedTransferDialog-CWLJE39r.js";import"./ScrollableBalances--GaBl0bk.js";var Ce={},le={},Tt,bn;function zn(){return bn||(bn=1,Tt=typeof self=="object"?self.FormData:window.FormData),Tt}var nt={},wn;function Hn(){if(wn)return nt;wn=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.ResponseError=e;function e(i,m){var p=i.headers["content-type"]&&/json/.test(i.headers["content-type"]),R=p&&i.data&&(i.data.error||i.data.message);return Error(R?"Request to ".concat(m.domain," failed: ").concat(R):"Request to ".concat(m.domain," failed with status ").concat(i.status))}return nt}var Oe={},$e={},gn;function ct(){if(gn)return $e;gn=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.TransferResultType=void 0;var e;return function(i){i.ok="success",i.kyc="kyc"}(e||($e.TransferResultType=e={})),$e}var vn;function Ft(){if(vn)return Oe;vn=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.KYCResponseType=void 0,Oe.createKYCInstructions=p,Oe.isKYCRequired=R;var e=ct(),i;(function(w){w.interactive="interactive",w.nonInteractive="non-interactive",w.status="status"})(i||(Oe.KYCResponseType=i={}));var m={customer_info_status:i.status,interactive_customer_info_needed:i.interactive,non_interactive_customer_info_needed:i.nonInteractive};function p(w,C){var E=m[w.data.type];if(!E)throw Error("".concat(C," requires KYC, but did not specify valid KYC instructions."));return{data:w.data,subtype:E,type:e.TransferResultType.kyc}}function R(w){return w.status===403||w.data.type==="interactive_customer_info_needed"}return Oe}var En;function Ya(){if(En)return le;En=1;var e=le&&le.__assign||function(){return e=Object.assign||function(h){for(var y,s=1,c=arguments.length;s<c;s++){y=arguments[s];for(var f in y)Object.prototype.hasOwnProperty.call(y,f)&&(h[f]=y[f])}return h},e.apply(this,arguments)},i=le&&le.__awaiter||function(h,y,s,c){function f(u){return u instanceof s?u:new s(function(D){D(u)})}return new(s||(s=Promise))(function(u,D){function _(F){try{O(c.next(F))}catch(P){D(P)}}function j(F){try{O(c.throw(F))}catch(P){D(P)}}function O(F){F.done?u(F.value):f(F.value).then(_,j)}O((c=c.apply(h,y||[])).next())})},m=le&&le.__generator||function(h,y){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},c,f,u,D=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return D.next=_(0),D.throw=_(1),D.return=_(2),typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function _(O){return function(F){return j([O,F])}}function j(O){if(c)throw new TypeError("Generator is already executing.");for(;D&&(D=0,O[0]&&(s=0)),s;)try{if(c=1,f&&(u=O[0]&2?f.return:O[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,O[1])).done)return u;switch(f=0,u&&(O=[O[0]&2,u.value]),O[0]){case 0:case 1:u=O;break;case 4:return s.label++,{value:O[1],done:!1};case 5:s.label++,f=O[1],O=[0];continue;case 7:O=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(O[0]===6||O[0]===2)){s=0;continue}if(O[0]===3&&(!u||O[1]>u[0]&&O[1]<u[3])){s.label=O[1];break}if(O[0]===6&&s.label<u[1]){s.label=u[1],u=O;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(O);break}u[2]&&s.ops.pop(),s.trys.pop();continue}O=y.call(h,s)}catch(F){O=[6,F],f=0}finally{c=u=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},p=le&&le.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(le,"__esModule",{value:!0}),le.DepositType=void 0,le.Deposit=x;var R=p(zn()),w=Hn(),C=Ft(),E=ct(),S;(function(h){h.SEPA="SEPA",h.SWIFT="SWIFT"})(S||(le.DepositType=S={}));function x(h,y,s,c){if(c===void 0&&(c={}),y.isNative())throw Error("Cannot deposit lumens, but only assets issued by ".concat(h.domain,"."));var f={accountID:s,asset:y,fields:e(e({lang:h.options.lang,wallet_name:h.options.walletName,wallet_url:h.options.walletURL},c),{account:s,asset_code:y.getCode()}),interactive:function(u){return A(f,u)},legacy:function(u){return g(f,u)},transferServer:h};return f}function A(h,y){return i(this,void 0,void 0,function(){var s,c,f,u,D,_,j;return m(this,function(O){switch(O.label){case 0:s=h.fields,c=h.transferServer,f=new R.default,Object.keys(s).forEach(function(F){typeof s[F]<"u"&&f.append(F,s[F])}),u={"Content-Type":"multipart/form-data"},y&&(u.Authorization="Bearer ".concat(y)),D=function(F){return F===200||F===201||F===400||F===403},O.label=1;case 1:return O.trys.push([1,3,,4]),[4,d(h,function(){return c.post("/transactions/deposit/interactive",f,{headers:u,validateStatus:D})})];case 2:return[2,O.sent()];case 3:if(_=O.sent(),j=_.response,j&&j.status===404)return[2,g(h,y)];if(j)throw(0,w.ResponseError)(j,h.transferServer);return[2,g(h,y)];case 4:return[2]}})})}function g(h,y){return i(this,void 0,void 0,function(){var s,c,f,u;return m(this,function(D){return s=h.fields,c=h.transferServer,f={},y&&(f.Authorization="Bearer ".concat(y)),u=function(_){return _===200||_===201||_===400||_===403},[2,d(h,function(){return c.get("/deposit",{headers:f,params:s,validateStatus:u})})]})})}function d(h,y){return i(this,void 0,void 0,function(){var s,c;return m(this,function(f){switch(f.label){case 0:return s=h.transferServer,[4,y()];case 1:if(c=f.sent(),(0,C.isKYCRequired)(c))return[2,(0,C.createKYCInstructions)(c,s.domain)];if(c.status===200)return[2,{data:c.data,type:E.TransferResultType.ok}];throw(0,w.ResponseError)(c,h.transferServer)}})})}return le}var Te={},Sn;function Ja(){if(Sn)return Te;Sn=1;var e=Te&&Te.__awaiter||function(p,R,w,C){function E(S){return S instanceof w?S:new w(function(x){x(S)})}return new(w||(w=Promise))(function(S,x){function A(h){try{d(C.next(h))}catch(y){x(y)}}function g(h){try{d(C.throw(h))}catch(y){x(y)}}function d(h){h.done?S(h.value):E(h.value).then(A,g)}d((C=C.apply(p,R||[])).next())})},i=Te&&Te.__generator||function(p,R){var w={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},C,E,S,x=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return x.next=A(0),x.throw=A(1),x.return=A(2),typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(d){return function(h){return g([d,h])}}function g(d){if(C)throw new TypeError("Generator is already executing.");for(;x&&(x=0,d[0]&&(w=0)),w;)try{if(C=1,E&&(S=d[0]&2?E.return:d[0]?E.throw||((S=E.return)&&S.call(E),0):E.next)&&!(S=S.call(E,d[1])).done)return S;switch(E=0,S&&(d=[d[0]&2,S.value]),d[0]){case 0:case 1:S=d;break;case 4:return w.label++,{value:d[1],done:!1};case 5:w.label++,E=d[1],d=[0];continue;case 7:d=w.ops.pop(),w.trys.pop();continue;default:if(S=w.trys,!(S=S.length>0&&S[S.length-1])&&(d[0]===6||d[0]===2)){w=0;continue}if(d[0]===3&&(!S||d[1]>S[0]&&d[1]<S[3])){w.label=d[1];break}if(d[0]===6&&w.label<S[1]){w.label=S[1],S=d;break}if(S&&w.label<S[2]){w.label=S[2],w.ops.push(d);break}S[2]&&w.ops.pop(),w.trys.pop();continue}d=R.call(p,w)}catch(h){d=[6,h],E=0}finally{C=S=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(Te,"__esModule",{value:!0}),Te.fetchFee=m;function m(p,R,w,C,E){return e(this,void 0,void 0,function(){var S;return i(this,function(x){switch(x.label){case 0:return[4,p.get("/fee",{params:{operation:R,type:w,asset_code:C.code,amount:String(E)}})];case 1:return S=x.sent(),[2,S.data]}})})}return Te}var ge={},_n;function Ga(){if(_n)return ge;_n=1;var e=ge&&ge.__awaiter||function(C,E,S,x){function A(g){return g instanceof S?g:new S(function(d){d(g)})}return new(S||(S=Promise))(function(g,d){function h(c){try{s(x.next(c))}catch(f){d(f)}}function y(c){try{s(x.throw(c))}catch(f){d(f)}}function s(c){c.done?g(c.value):A(c.value).then(h,y)}s((x=x.apply(C,E||[])).next())})},i=ge&&ge.__generator||function(C,E){var S={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,A,g,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=h(0),d.throw=h(1),d.return=h(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(s){return function(c){return y([s,c])}}function y(s){if(x)throw new TypeError("Generator is already executing.");for(;d&&(d=0,s[0]&&(S=0)),S;)try{if(x=1,A&&(g=s[0]&2?A.return:s[0]?A.throw||((g=A.return)&&g.call(A),0):A.next)&&!(g=g.call(A,s[1])).done)return g;switch(A=0,g&&(s=[s[0]&2,g.value]),s[0]){case 0:case 1:g=s;break;case 4:return S.label++,{value:s[1],done:!1};case 5:S.label++,A=s[1],s=[0];continue;case 7:s=S.ops.pop(),S.trys.pop();continue;default:if(g=S.trys,!(g=g.length>0&&g[g.length-1])&&(s[0]===6||s[0]===2)){S=0;continue}if(s[0]===3&&(!g||s[1]>g[0]&&s[1]<g[3])){S.label=s[1];break}if(s[0]===6&&S.label<g[1]){S.label=g[1],g=s;break}if(g&&S.label<g[2]){S.label=g[2],S.ops.push(s);break}g[2]&&S.ops.pop(),S.trys.pop();continue}s=E.call(C,S)}catch(c){s=[6,c],A=0}finally{x=g=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},m=ge&&ge.__spreadArray||function(C,E,S){if(S||arguments.length===2)for(var x=0,A=E.length,g;x<A;x++)(g||!(x in E))&&(g||(g=Array.prototype.slice.call(E,0,x)),g[x]=E[x]);return C.concat(g||Array.prototype.slice.call(E))};Object.defineProperty(ge,"__esModule",{value:!0}),ge.fetchTransferInfos=w;var p=function(C){return Array.from(new Set(C))};function R(C){throw Error(C)}function w(C){return e(this,void 0,void 0,function(){var E,S,x;return i(this,function(A){switch(A.label){case 0:return[4,C.get("/info")];case 1:return E=A.sent(),S=p(m(m([],Object.keys(E.data.deposit),!0),Object.keys(E.data.withdraw),!0)).filter(function(g){return g!=="transactions"}),x=S.filter(function(g){return C.assets.some(function(d){return d.code===g})}).map(function(g){return{asset:C.assets.find(function(d){return d.code===g})||R("".concat(C.domain," does not issue asset ").concat(g,".")),deposit:E.data.deposit[g],endpoints:E.data,transferServer:C,withdraw:E.data.withdraw[g]}}),[2,{assets:x,depositableAssets:x.filter(function(g){return g.deposit}).map(function(g){return g.asset}),endpoints:E.data,transferServer:C,withdrawableAssets:x.filter(function(g){return g.withdraw}).map(function(g){return g.asset})}]}})})}return ge}var be={},Tn;function Xa(){if(Tn)return be;Tn=1;var e=be&&be.__awaiter||function(w,C,E,S){function x(A){return A instanceof E?A:new E(function(g){g(A)})}return new(E||(E=Promise))(function(A,g){function d(s){try{y(S.next(s))}catch(c){g(c)}}function h(s){try{y(S.throw(s))}catch(c){g(c)}}function y(s){s.done?A(s.value):x(s.value).then(d,h)}y((S=S.apply(w,C||[])).next())})},i=be&&be.__generator||function(w,C){var E={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},S,x,A,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=d(0),g.throw=d(1),g.return=d(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function d(y){return function(s){return h([y,s])}}function h(y){if(S)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(E=0)),E;)try{if(S=1,x&&(A=y[0]&2?x.return:y[0]?x.throw||((A=x.return)&&A.call(x),0):x.next)&&!(A=A.call(x,y[1])).done)return A;switch(x=0,A&&(y=[y[0]&2,A.value]),y[0]){case 0:case 1:A=y;break;case 4:return E.label++,{value:y[1],done:!1};case 5:E.label++,x=y[1],y=[0];continue;case 7:y=E.ops.pop(),E.trys.pop();continue;default:if(A=E.trys,!(A=A.length>0&&A[A.length-1])&&(y[0]===6||y[0]===2)){E=0;continue}if(y[0]===3&&(!A||y[1]>A[0]&&y[1]<A[3])){E.label=y[1];break}if(y[0]===6&&E.label<A[1]){E.label=A[1],A=y;break}if(A&&E.label<A[2]){E.label=A[2],E.ops.push(y);break}A[2]&&E.ops.pop(),E.trys.pop();continue}y=C.call(w,E)}catch(s){y=[6,s],x=0}finally{S=A=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(be,"__esModule",{value:!0}),be.TransferStatus=void 0,be.fetchTransaction=p,be.fetchTransactions=R;var m;(function(w){w.completed="completed",w.pending_external="pending_external",w.pending_anchor="pending_anchor",w.pending_stellar="pending_stellar",w.pending_trust="pending_trust",w.pending_user="pending_user",w.pending_user_transfer_start="pending_user_transfer_start",w.incomplete="incomplete",w.no_market="no_market",w.too_small="too_small",w.too_large="too_large",w.error="error"})(m||(be.TransferStatus=m={}));function p(w,C){return e(this,arguments,void 0,function(E,S,x,A){var g,d,h,y;return x===void 0&&(x="transfer"),i(this,function(s){switch(s.label){case 0:return g={},A&&(g.Authorization="Bearer ".concat(A)),d=x==="stellar"?"stellar_transaction_id":x==="external"?"external_transaction_id":"id",[4,E.get("/transaction",{headers:g,params:(y={},y[d]=S,y)})];case 1:return h=s.sent(),[2,h.data]}})})}function R(w,C,E){return e(this,arguments,void 0,function(S,x,A,g){var d,h;return g===void 0&&(g={}),i(this,function(y){switch(y.label){case 0:return d={},A&&(d.Authorization="Bearer ".concat(A)),[4,S.get("/transactions",{headers:d,params:{asset_code:x,kind:g.kind,limit:g.limit,no_older_than:g.noOlderThan,paging_id:g.pagingId}})];case 1:return h=y.sent(),[2,h.data]}})})}return be}var ue={},Rt,Rn;function Yn(){if(Rn)return Rt;Rn=1;function e(t,n){return function(){return t.apply(n,arguments)}}const{toString:i}=Object.prototype,{getPrototypeOf:m}=Object,p=(t=>n=>{const r=i.call(n);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),R=t=>(t=t.toLowerCase(),n=>p(n)===t),w=t=>n=>typeof n===t,{isArray:C}=Array,E=w("undefined");function S(t){return t!==null&&!E(t)&&t.constructor!==null&&!E(t.constructor)&&d(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const x=R("ArrayBuffer");function A(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&x(t.buffer),n}const g=w("string"),d=w("function"),h=w("number"),y=t=>t!==null&&typeof t=="object",s=t=>t===!0||t===!1,c=t=>{if(p(t)!=="object")return!1;const n=m(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},f=R("Date"),u=R("File"),D=R("Blob"),_=R("FileList"),j=t=>y(t)&&d(t.pipe),O=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||d(t.append)&&((n=p(t))==="formdata"||n==="object"&&d(t.toString)&&t.toString()==="[object FormData]"))},F=R("URLSearchParams"),[P,$,se,qe]=["ReadableStream","Request","Response","Headers"].map(R),Se=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function K(t,n,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,l;if(typeof t!="object"&&(t=[t]),C(t))for(a=0,l=t.length;a<l;a++)n.call(null,t[a],a,t);else{const b=r?Object.getOwnPropertyNames(t):Object.keys(t),v=b.length;let k;for(a=0;a<v;a++)k=b[a],n.call(null,t[k],k,t)}}function ne(t,n){n=n.toLowerCase();const r=Object.keys(t);let a=r.length,l;for(;a-- >0;)if(l=r[a],n===l.toLowerCase())return l;return null}const Q=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sa,Nt=t=>!E(t)&&t!==Q;function lt(){const{caseless:t}=Nt(this)&&this||{},n={},r=(a,l)=>{const b=t&&ne(n,l)||l;c(n[b])&&c(a)?n[b]=lt(n[b],a):c(a)?n[b]=lt({},a):C(a)?n[b]=a.slice():n[b]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&K(arguments[a],r);return n}const lr=(t,n,r,{allOwnKeys:a}={})=>(K(n,(l,b)=>{r&&d(l)?t[b]=e(l,r):t[b]=l},{allOwnKeys:a}),t),ur=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),fr=(t,n,r,a)=>{t.prototype=Object.create(n.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),r&&Object.assign(t.prototype,r)},dr=(t,n,r,a)=>{let l,b,v;const k={};if(n=n||{},t==null)return n;do{for(l=Object.getOwnPropertyNames(t),b=l.length;b-- >0;)v=l[b],(!a||a(v,t,n))&&!k[v]&&(n[v]=t[v],k[v]=!0);t=r!==!1&&m(t)}while(t&&(!r||r(t,n))&&t!==Object.prototype);return n},mr=(t,n,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=n.length;const a=t.indexOf(n,r);return a!==-1&&a===r},hr=t=>{if(!t)return null;if(C(t))return t;let n=t.length;if(!h(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=t[n];return r},yr=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&m(Uint8Array)),pr=(t,n)=>{const a=(t&&t[Symbol.iterator]).call(t);let l;for(;(l=a.next())&&!l.done;){const b=l.value;n.call(t,b[0],b[1])}},br=(t,n)=>{let r;const a=[];for(;(r=t.exec(n))!==null;)a.push(r);return a},wr=R("HTMLFormElement"),gr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,l){return a.toUpperCase()+l}),jt=(({hasOwnProperty:t})=>(n,r)=>t.call(n,r))(Object.prototype),vr=R("RegExp"),Bt=(t,n)=>{const r=Object.getOwnPropertyDescriptors(t),a={};K(r,(l,b)=>{let v;(v=n(l,b,t))!==!1&&(a[b]=v||l)}),Object.defineProperties(t,a)},Er=t=>{Bt(t,(n,r)=>{if(d(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(d(a)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Sr=(t,n)=>{const r={},a=l=>{l.forEach(b=>{r[b]=!0})};return C(t)?a(t):a(String(t).split(n)),r},_r=()=>{},Tr=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function Rr(t){return!!(t&&d(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const xr=t=>{const n=new Array(10),r=(a,l)=>{if(y(a)){if(n.indexOf(a)>=0)return;if(!("toJSON"in a)){n[l]=a;const b=C(a)?[]:{};return K(a,(v,k)=>{const B=r(v,l+1);!E(B)&&(b[k]=B)}),n[l]=void 0,b}}return a};return r(t,0)},Ar=R("AsyncFunction"),Cr=t=>t&&(y(t)||d(t))&&d(t.then)&&d(t.catch),Lt=((t,n)=>t?setImmediate:n?((r,a)=>(Q.addEventListener("message",({source:l,data:b})=>{l===Q&&b===r&&a.length&&a.shift()()},!1),l=>{a.push(l),Q.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",d(Q.postMessage)),Or=typeof queueMicrotask<"u"?queueMicrotask.bind(Q):typeof yn<"u"&&yn.nextTick||Lt;var T={isArray:C,isArrayBuffer:x,isBuffer:S,isFormData:O,isArrayBufferView:A,isString:g,isNumber:h,isBoolean:s,isObject:y,isPlainObject:c,isReadableStream:P,isRequest:$,isResponse:se,isHeaders:qe,isUndefined:E,isDate:f,isFile:u,isBlob:D,isRegExp:vr,isFunction:d,isStream:j,isURLSearchParams:F,isTypedArray:yr,isFileList:_,forEach:K,merge:lt,extend:lr,trim:Se,stripBOM:ur,inherits:fr,toFlatObject:dr,kindOf:p,kindOfTest:R,endsWith:mr,toArray:hr,forEachEntry:pr,matchAll:br,isHTMLForm:wr,hasOwnProperty:jt,hasOwnProp:jt,reduceDescriptors:Bt,freezeMethods:Er,toObjectSet:Sr,toCamelCase:gr,noop:_r,toFiniteNumber:Tr,findKey:ne,global:Q,isContextDefined:Nt,isSpecCompliantForm:Rr,toJSONObject:xr,isAsyncFn:Ar,isThenable:Cr,setImmediate:Lt,asap:Or};function M(t,n,r,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}T.inherits(M,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.status}}});const Ut=M.prototype,qt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qt[t]={value:t}}),Object.defineProperties(M,qt),Object.defineProperty(Ut,"isAxiosError",{value:!0}),M.from=(t,n,r,a,l,b)=>{const v=Object.create(Ut);return T.toFlatObject(t,v,function(B){return B!==Error.prototype},k=>k!=="isAxiosError"),M.call(v,t.message,n,r,a,l),v.cause=t,v.name=t.name,b&&Object.assign(v,b),v};var kr=null;function ut(t){return T.isPlainObject(t)||T.isArray(t)}function Mt(t){return T.endsWith(t,"[]")?t.slice(0,-2):t}function $t(t,n,r){return t?t.concat(n).map(function(l,b){return l=Mt(l),!r&&b?"["+l+"]":l}).join(r?".":""):n}function Dr(t){return T.isArray(t)&&!t.some(ut)}const Pr=T.toFlatObject(T,{},null,function(n){return/^is[A-Z]/.test(n)});function Ve(t,n,r){if(!T.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,r=T.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(W,q){return!T.isUndefined(q[W])});const a=r.metaTokens,l=r.visitor||N,b=r.dots,v=r.indexes,B=(r.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(n);if(!T.isFunction(l))throw new TypeError("visitor must be a function");function I(U){if(U===null)return"";if(T.isDate(U))return U.toISOString();if(!B&&T.isBlob(U))throw new M("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(U)||T.isTypedArray(U)?B&&typeof Blob=="function"?new Blob([U]):jn.from(U):U}function N(U,W,q){let z=U;if(U&&!q&&typeof U=="object"){if(T.endsWith(W,"{}"))W=a?W:W.slice(0,-2),U=JSON.stringify(U);else if(T.isArray(U)&&Dr(U)||(T.isFileList(U)||T.endsWith(W,"[]"))&&(z=T.toArray(U)))return W=Mt(W),z.forEach(function(ee,Ee){!(T.isUndefined(ee)||ee===null)&&n.append(v===!0?$t([W],Ee,b):v===null?W:W+"[]",I(ee))}),!1}return ut(U)?!0:(n.append($t(q,W,b),I(U)),!1)}const L=[],V=Object.assign(Pr,{defaultVisitor:N,convertValue:I,isVisitable:ut});function X(U,W){if(!T.isUndefined(U)){if(L.indexOf(U)!==-1)throw Error("Circular reference detected in "+W.join("."));L.push(U),T.forEach(U,function(z,Z){(!(T.isUndefined(z)||z===null)&&l.call(n,z,T.isString(Z)?Z.trim():Z,W,V))===!0&&X(z,W?W.concat(Z):[Z])}),L.pop()}}if(!T.isObject(t))throw new TypeError("data must be an object");return X(t),n}function Wt(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return n[a]})}function ft(t,n){this._pairs=[],t&&Ve(t,this,n)}const Kt=ft.prototype;Kt.append=function(n,r){this._pairs.push([n,r])},Kt.toString=function(n){const r=n?function(a){return n.call(this,a,Wt)}:Wt;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function Fr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vt(t,n,r){if(!n)return t;const a=r&&r.encode||Fr;T.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let b;if(l?b=l(n,r):b=T.isURLSearchParams(n)?n.toString():new ft(n,r).toString(a),b){const v=t.indexOf("#");v!==-1&&(t=t.slice(0,v)),t+=(t.indexOf("?")===-1?"?":"&")+b}return t}class Ir{constructor(){this.handlers=[]}use(n,r,a){return this.handlers.push({fulfilled:n,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){T.forEach(this.handlers,function(a){a!==null&&n(a)})}}var zt=Ir,Ht={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nr=typeof URLSearchParams<"u"?URLSearchParams:ft,jr=typeof FormData<"u"?FormData:null,Br=typeof Blob<"u"?Blob:null,Lr={isBrowser:!0,classes:{URLSearchParams:Nr,FormData:jr,Blob:Br},protocols:["http","https","file","blob","url","data"]};const dt=typeof window<"u"&&typeof document<"u",mt=typeof navigator=="object"&&navigator||void 0,Ur=dt&&(!mt||["ReactNative","NativeScript","NS"].indexOf(mt.product)<0),qr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Mr=dt&&window.location.href||"http://localhost";var $r=Object.freeze({__proto__:null,hasBrowserEnv:dt,hasStandardBrowserWebWorkerEnv:qr,hasStandardBrowserEnv:Ur,navigator:mt,origin:Mr}),re={...$r,...Lr};function Wr(t,n){return Ve(t,new re.classes.URLSearchParams,Object.assign({visitor:function(r,a,l,b){return re.isNode&&T.isBuffer(r)?(this.append(a,r.toString("base64")),!1):b.defaultVisitor.apply(this,arguments)}},n))}function Kr(t){return T.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function Vr(t){const n={},r=Object.keys(t);let a;const l=r.length;let b;for(a=0;a<l;a++)b=r[a],n[b]=t[b];return n}function Yt(t){function n(r,a,l,b){let v=r[b++];if(v==="__proto__")return!0;const k=Number.isFinite(+v),B=b>=r.length;return v=!v&&T.isArray(l)?l.length:v,B?(T.hasOwnProp(l,v)?l[v]=[l[v],a]:l[v]=a,!k):((!l[v]||!T.isObject(l[v]))&&(l[v]=[]),n(r,a,l[v],b)&&T.isArray(l[v])&&(l[v]=Vr(l[v])),!k)}if(T.isFormData(t)&&T.isFunction(t.entries)){const r={};return T.forEachEntry(t,(a,l)=>{n(Kr(a),l,r,0)}),r}return null}function zr(t,n,r){if(T.isString(t))try{return(n||JSON.parse)(t),T.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const ht={transitional:Ht,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const a=r.getContentType()||"",l=a.indexOf("application/json")>-1,b=T.isObject(n);if(b&&T.isHTMLForm(n)&&(n=new FormData(n)),T.isFormData(n))return l?JSON.stringify(Yt(n)):n;if(T.isArrayBuffer(n)||T.isBuffer(n)||T.isStream(n)||T.isFile(n)||T.isBlob(n)||T.isReadableStream(n))return n;if(T.isArrayBufferView(n))return n.buffer;if(T.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let k;if(b){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Wr(n,this.formSerializer).toString();if((k=T.isFileList(n))||a.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return Ve(k?{"files[]":n}:n,B&&new B,this.formSerializer)}}return b||l?(r.setContentType("application/json",!1),zr(n)):n}],transformResponse:[function(n){const r=this.transitional||ht.transitional,a=r&&r.forcedJSONParsing,l=this.responseType==="json";if(T.isResponse(n)||T.isReadableStream(n))return n;if(n&&T.isString(n)&&(a&&!this.responseType||l)){const v=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(n)}catch(k){if(v)throw k.name==="SyntaxError"?M.from(k,M.ERR_BAD_RESPONSE,this,null,this.response):k}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:re.classes.FormData,Blob:re.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],t=>{ht.headers[t]={}});var yt=ht;const Hr=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Yr=t=>{const n={};let r,a,l;return t&&t.split(`
`).forEach(function(v){l=v.indexOf(":"),r=v.substring(0,l).trim().toLowerCase(),a=v.substring(l+1).trim(),!(!r||n[r]&&Hr[r])&&(r==="set-cookie"?n[r]?n[r].push(a):n[r]=[a]:n[r]=n[r]?n[r]+", "+a:a)}),n};const Jt=Symbol("internals");function Me(t){return t&&String(t).trim().toLowerCase()}function ze(t){return t===!1||t==null?t:T.isArray(t)?t.map(ze):String(t)}function Jr(t){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)n[a[1]]=a[2];return n}const Gr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function pt(t,n,r,a,l){if(T.isFunction(a))return a.call(this,n,r);if(l&&(n=r),!!T.isString(n)){if(T.isString(a))return n.indexOf(a)!==-1;if(T.isRegExp(a))return a.test(n)}}function Xr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,a)=>r.toUpperCase()+a)}function Zr(t,n){const r=T.toCamelCase(" "+n);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(l,b,v){return this[a].call(this,n,l,b,v)},configurable:!0})})}class He{constructor(n){n&&this.set(n)}set(n,r,a){const l=this;function b(k,B,I){const N=Me(B);if(!N)throw new Error("header name must be a non-empty string");const L=T.findKey(l,N);(!L||l[L]===void 0||I===!0||I===void 0&&l[L]!==!1)&&(l[L||B]=ze(k))}const v=(k,B)=>T.forEach(k,(I,N)=>b(I,N,B));if(T.isPlainObject(n)||n instanceof this.constructor)v(n,r);else if(T.isString(n)&&(n=n.trim())&&!Gr(n))v(Yr(n),r);else if(T.isHeaders(n))for(const[k,B]of n.entries())b(B,k,a);else n!=null&&b(r,n,a);return this}get(n,r){if(n=Me(n),n){const a=T.findKey(this,n);if(a){const l=this[a];if(!r)return l;if(r===!0)return Jr(l);if(T.isFunction(r))return r.call(this,l,a);if(T.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=Me(n),n){const a=T.findKey(this,n);return!!(a&&this[a]!==void 0&&(!r||pt(this,this[a],a,r)))}return!1}delete(n,r){const a=this;let l=!1;function b(v){if(v=Me(v),v){const k=T.findKey(a,v);k&&(!r||pt(a,a[k],k,r))&&(delete a[k],l=!0)}}return T.isArray(n)?n.forEach(b):b(n),l}clear(n){const r=Object.keys(this);let a=r.length,l=!1;for(;a--;){const b=r[a];(!n||pt(this,this[b],b,n,!0))&&(delete this[b],l=!0)}return l}normalize(n){const r=this,a={};return T.forEach(this,(l,b)=>{const v=T.findKey(a,b);if(v){r[v]=ze(l),delete r[b];return}const k=n?Xr(b):String(b).trim();k!==b&&delete r[b],r[k]=ze(l),a[k]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return T.forEach(this,(a,l)=>{a!=null&&a!==!1&&(r[l]=n&&T.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const a=new this(n);return r.forEach(l=>a.set(l)),a}static accessor(n){const a=(this[Jt]=this[Jt]={accessors:{}}).accessors,l=this.prototype;function b(v){const k=Me(v);a[k]||(Zr(l,v),a[k]=!0)}return T.isArray(n)?n.forEach(b):b(n),this}}He.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),T.reduceDescriptors(He.prototype,({value:t},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(a){this[r]=a}}}),T.freezeMethods(He);var pe=He;function bt(t,n){const r=this||yt,a=n||r,l=pe.from(a.headers);let b=a.data;return T.forEach(t,function(k){b=k.call(r,b,l.normalize(),n?n.status:void 0)}),l.normalize(),b}function Gt(t){return!!(t&&t.__CANCEL__)}function Le(t,n,r){M.call(this,t??"canceled",M.ERR_CANCELED,n,r),this.name="CanceledError"}T.inherits(Le,M,{__CANCEL__:!0});function Xt(t,n,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):n(new M("Request failed with status code "+r.status,[M.ERR_BAD_REQUEST,M.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Qr(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function ea(t,n){t=t||10;const r=new Array(t),a=new Array(t);let l=0,b=0,v;return n=n!==void 0?n:1e3,function(B){const I=Date.now(),N=a[b];v||(v=I),r[l]=B,a[l]=I;let L=b,V=0;for(;L!==l;)V+=r[L++],L=L%t;if(l=(l+1)%t,l===b&&(b=(b+1)%t),I-v<n)return;const X=N&&I-N;return X?Math.round(V*1e3/X):void 0}}function ta(t,n){let r=0,a=1e3/n,l,b;const v=(I,N=Date.now())=>{r=N,l=null,b&&(clearTimeout(b),b=null),t.apply(null,I)};return[(...I)=>{const N=Date.now(),L=N-r;L>=a?v(I,N):(l=I,b||(b=setTimeout(()=>{b=null,v(l)},a-L)))},()=>l&&v(l)]}const Ye=(t,n,r=3)=>{let a=0;const l=ea(50,250);return ta(b=>{const v=b.loaded,k=b.lengthComputable?b.total:void 0,B=v-a,I=l(B),N=v<=k;a=v;const L={loaded:v,total:k,progress:k?v/k:void 0,bytes:B,rate:I||void 0,estimated:I&&k&&N?(k-v)/I:void 0,event:b,lengthComputable:k!=null,[n?"download":"upload"]:!0};t(L)},r)},Zt=(t,n)=>{const r=t!=null;return[a=>n[0]({lengthComputable:r,total:t,loaded:a}),n[1]]},Qt=t=>(...n)=>T.asap(()=>t(...n));var na=re.hasStandardBrowserEnv?((t,n)=>r=>(r=new URL(r,re.origin),t.protocol===r.protocol&&t.host===r.host&&(n||t.port===r.port)))(new URL(re.origin),re.navigator&&/(msie|trident)/i.test(re.navigator.userAgent)):()=>!0,ra=re.hasStandardBrowserEnv?{write(t,n,r,a,l,b){const v=[t+"="+encodeURIComponent(n)];T.isNumber(r)&&v.push("expires="+new Date(r).toGMTString()),T.isString(a)&&v.push("path="+a),T.isString(l)&&v.push("domain="+l),b===!0&&v.push("secure"),document.cookie=v.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aa(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function sa(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function en(t,n,r){let a=!aa(n);return t&&(a||r==!1)?sa(t,n):n}const tn=t=>t instanceof pe?{...t}:t;function xe(t,n){n=n||{};const r={};function a(I,N,L,V){return T.isPlainObject(I)&&T.isPlainObject(N)?T.merge.call({caseless:V},I,N):T.isPlainObject(N)?T.merge({},N):T.isArray(N)?N.slice():N}function l(I,N,L,V){if(T.isUndefined(N)){if(!T.isUndefined(I))return a(void 0,I,L,V)}else return a(I,N,L,V)}function b(I,N){if(!T.isUndefined(N))return a(void 0,N)}function v(I,N){if(T.isUndefined(N)){if(!T.isUndefined(I))return a(void 0,I)}else return a(void 0,N)}function k(I,N,L){if(L in n)return a(I,N);if(L in t)return a(void 0,I)}const B={url:b,method:b,data:b,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,withXSRFToken:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,beforeRedirect:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:k,headers:(I,N,L)=>l(tn(I),tn(N),L,!0)};return T.forEach(Object.keys(Object.assign({},t,n)),function(N){const L=B[N]||l,V=L(t[N],n[N],N);T.isUndefined(V)&&L!==k||(r[N]=V)}),r}var nn=t=>{const n=xe({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:b,headers:v,auth:k}=n;n.headers=v=pe.from(v),n.url=Vt(en(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),k&&v.set("Authorization","Basic "+btoa((k.username||"")+":"+(k.password?unescape(encodeURIComponent(k.password)):"")));let B;if(T.isFormData(r)){if(re.hasStandardBrowserEnv||re.hasStandardBrowserWebWorkerEnv)v.setContentType(void 0);else if((B=v.getContentType())!==!1){const[I,...N]=B?B.split(";").map(L=>L.trim()).filter(Boolean):[];v.setContentType([I||"multipart/form-data",...N].join("; "))}}if(re.hasStandardBrowserEnv&&(a&&T.isFunction(a)&&(a=a(n)),a||a!==!1&&na(n.url))){const I=l&&b&&ra.read(b);I&&v.set(l,I)}return n},ia=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,a){const l=nn(t);let b=l.data;const v=pe.from(l.headers).normalize();let{responseType:k,onUploadProgress:B,onDownloadProgress:I}=l,N,L,V,X,U;function W(){X&&X(),U&&U(),l.cancelToken&&l.cancelToken.unsubscribe(N),l.signal&&l.signal.removeEventListener("abort",N)}let q=new XMLHttpRequest;q.open(l.method.toUpperCase(),l.url,!0),q.timeout=l.timeout;function z(){if(!q)return;const ee=pe.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),ce={data:!k||k==="text"||k==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:ee,config:t,request:q};Xt(function(Ae){r(Ae),W()},function(Ae){a(Ae),W()},ce),q=null}"onloadend"in q?q.onloadend=z:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(z)},q.onabort=function(){q&&(a(new M("Request aborted",M.ECONNABORTED,t,q)),q=null)},q.onerror=function(){a(new M("Network Error",M.ERR_NETWORK,t,q)),q=null},q.ontimeout=function(){let Ee=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ce=l.transitional||Ht;l.timeoutErrorMessage&&(Ee=l.timeoutErrorMessage),a(new M(Ee,ce.clarifyTimeoutError?M.ETIMEDOUT:M.ECONNABORTED,t,q)),q=null},b===void 0&&v.setContentType(null),"setRequestHeader"in q&&T.forEach(v.toJSON(),function(Ee,ce){q.setRequestHeader(ce,Ee)}),T.isUndefined(l.withCredentials)||(q.withCredentials=!!l.withCredentials),k&&k!=="json"&&(q.responseType=l.responseType),I&&([V,U]=Ye(I,!0),q.addEventListener("progress",V)),B&&q.upload&&([L,X]=Ye(B),q.upload.addEventListener("progress",L),q.upload.addEventListener("loadend",X)),(l.cancelToken||l.signal)&&(N=ee=>{q&&(a(!ee||ee.type?new Le(null,t,q):ee),q.abort(),q=null)},l.cancelToken&&l.cancelToken.subscribe(N),l.signal&&(l.signal.aborted?N():l.signal.addEventListener("abort",N)));const Z=Qr(l.url);if(Z&&re.protocols.indexOf(Z)===-1){a(new M("Unsupported protocol "+Z+":",M.ERR_BAD_REQUEST,t));return}q.send(b||null)})},oa=(t,n)=>{const{length:r}=t=t?t.filter(Boolean):[];if(n||r){let a=new AbortController,l;const b=function(I){if(!l){l=!0,k();const N=I instanceof Error?I:this.reason;a.abort(N instanceof M?N:new Le(N instanceof Error?N.message:N))}};let v=n&&setTimeout(()=>{v=null,b(new M(`timeout ${n} of ms exceeded`,M.ETIMEDOUT))},n);const k=()=>{t&&(v&&clearTimeout(v),v=null,t.forEach(I=>{I.unsubscribe?I.unsubscribe(b):I.removeEventListener("abort",b)}),t=null)};t.forEach(I=>I.addEventListener("abort",b));const{signal:B}=a;return B.unsubscribe=()=>T.asap(k),B}};const ca=function*(t,n){let r=t.byteLength;if(r<n){yield t;return}let a=0,l;for(;a<r;)l=a+n,yield t.slice(a,l),a=l},la=async function*(t,n){for await(const r of ua(t))yield*ca(r,n)},ua=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:r,value:a}=await n.read();if(r)break;yield a}}finally{await n.cancel()}},rn=(t,n,r,a)=>{const l=la(t,n);let b=0,v,k=B=>{v||(v=!0,a&&a(B))};return new ReadableStream({async pull(B){try{const{done:I,value:N}=await l.next();if(I){k(),B.close();return}let L=N.byteLength;if(r){let V=b+=L;r(V)}B.enqueue(new Uint8Array(N))}catch(I){throw k(I),I}},cancel(B){return k(B),l.return()}},{highWaterMark:2})},Je=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",an=Je&&typeof ReadableStream=="function",fa=Je&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),sn=(t,...n)=>{try{return!!t(...n)}catch{return!1}},da=an&&sn(()=>{let t=!1;const n=new Request(re.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),on=64*1024,wt=an&&sn(()=>T.isReadableStream(new Response("").body)),Ge={stream:wt&&(t=>t.body)};Je&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Ge[n]&&(Ge[n]=T.isFunction(t[n])?r=>r[n]():(r,a)=>{throw new M(`Response type '${n}' is not supported`,M.ERR_NOT_SUPPORT,a)})})})(new Response);const ma=async t=>{if(t==null)return 0;if(T.isBlob(t))return t.size;if(T.isSpecCompliantForm(t))return(await new Request(re.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(T.isArrayBufferView(t)||T.isArrayBuffer(t))return t.byteLength;if(T.isURLSearchParams(t)&&(t=t+""),T.isString(t))return(await fa(t)).byteLength},ha=async(t,n)=>{const r=T.toFiniteNumber(t.getContentLength());return r??ma(n)};var ya=Je&&(async t=>{let{url:n,method:r,data:a,signal:l,cancelToken:b,timeout:v,onDownloadProgress:k,onUploadProgress:B,responseType:I,headers:N,withCredentials:L="same-origin",fetchOptions:V}=nn(t);I=I?(I+"").toLowerCase():"text";let X=oa([l,b&&b.toAbortSignal()],v),U;const W=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let q;try{if(B&&da&&r!=="get"&&r!=="head"&&(q=await ha(N,a))!==0){let ce=new Request(n,{method:"POST",body:a,duplex:"half"}),_e;if(T.isFormData(a)&&(_e=ce.headers.get("content-type"))&&N.setContentType(_e),ce.body){const[Ae,tt]=Zt(q,Ye(Qt(B)));a=rn(ce.body,on,Ae,tt)}}T.isString(L)||(L=L?"include":"omit");const z="credentials"in Request.prototype;U=new Request(n,{...V,signal:X,method:r.toUpperCase(),headers:N.normalize().toJSON(),body:a,duplex:"half",credentials:z?L:void 0});let Z=await fetch(U);const ee=wt&&(I==="stream"||I==="response");if(wt&&(k||ee&&W)){const ce={};["status","statusText","headers"].forEach(hn=>{ce[hn]=Z[hn]});const _e=T.toFiniteNumber(Z.headers.get("content-length")),[Ae,tt]=k&&Zt(_e,Ye(Qt(k),!0))||[];Z=new Response(rn(Z.body,on,Ae,()=>{tt&&tt(),W&&W()}),ce)}I=I||"text";let Ee=await Ge[T.findKey(Ge,I)||"text"](Z,t);return!ee&&W&&W(),await new Promise((ce,_e)=>{Xt(ce,_e,{data:Ee,headers:pe.from(Z.headers),status:Z.status,statusText:Z.statusText,config:t,request:U})})}catch(z){throw W&&W(),z&&z.name==="TypeError"&&/fetch/i.test(z.message)?Object.assign(new M("Network Error",M.ERR_NETWORK,t,U),{cause:z.cause||z}):M.from(z,z&&z.code,t,U)}});const gt={http:kr,xhr:ia,fetch:ya};T.forEach(gt,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const cn=t=>`- ${t}`,pa=t=>T.isFunction(t)||t===null||t===!1;var ln={getAdapter:t=>{t=T.isArray(t)?t:[t];const{length:n}=t;let r,a;const l={};for(let b=0;b<n;b++){r=t[b];let v;if(a=r,!pa(r)&&(a=gt[(v=String(r)).toLowerCase()],a===void 0))throw new M(`Unknown adapter '${v}'`);if(a)break;l[v||"#"+b]=a}if(!a){const b=Object.entries(l).map(([k,B])=>`adapter ${k} `+(B===!1?"is not supported by the environment":"is not available in the build"));let v=n?b.length>1?`since :
`+b.map(cn).join(`
`):" "+cn(b[0]):"as no adapter specified";throw new M("There is no suitable adapter to dispatch the request "+v,"ERR_NOT_SUPPORT")}return a},adapters:gt};function vt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Le(null,t)}function un(t){return vt(t),t.headers=pe.from(t.headers),t.data=bt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ln.getAdapter(t.adapter||yt.adapter)(t).then(function(a){return vt(t),a.data=bt.call(t,t.transformResponse,a),a.headers=pe.from(a.headers),a},function(a){return Gt(a)||(vt(t),a&&a.response&&(a.response.data=bt.call(t,t.transformResponse,a.response),a.response.headers=pe.from(a.response.headers))),Promise.reject(a)})}const fn="1.8.4",Xe={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Xe[t]=function(a){return typeof a===t||"a"+(n<1?"n ":" ")+t}});const dn={};Xe.transitional=function(n,r,a){function l(b,v){return"[Axios v"+fn+"] Transitional option '"+b+"'"+v+(a?". "+a:"")}return(b,v,k)=>{if(n===!1)throw new M(l(v," has been removed"+(r?" in "+r:"")),M.ERR_DEPRECATED);return r&&!dn[v]&&(dn[v]=!0,console.warn(l(v," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(b,v,k):!0}},Xe.spelling=function(n){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${n}`),!0)};function ba(t,n,r){if(typeof t!="object")throw new M("options must be an object",M.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let l=a.length;for(;l-- >0;){const b=a[l],v=n[b];if(v){const k=t[b],B=k===void 0||v(k,b,t);if(B!==!0)throw new M("option "+b+" must be "+B,M.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new M("Unknown option "+b,M.ERR_BAD_OPTION)}}var Ze={assertOptions:ba,validators:Xe};const we=Ze.validators;class Qe{constructor(n){this.defaults=n,this.interceptors={request:new zt,response:new zt}}async request(n,r){try{return await this._request(n,r)}catch(a){if(a instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const b=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?b&&!String(a.stack).endsWith(b.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+b):a.stack=b}catch{}}throw a}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=xe(this.defaults,r);const{transitional:a,paramsSerializer:l,headers:b}=r;a!==void 0&&Ze.assertOptions(a,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),l!=null&&(T.isFunction(l)?r.paramsSerializer={serialize:l}:Ze.assertOptions(l,{encode:we.function,serialize:we.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ze.assertOptions(r,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let v=b&&T.merge(b.common,b[r.method]);b&&T.forEach(["delete","get","head","post","put","patch","common"],U=>{delete b[U]}),r.headers=pe.concat(v,b);const k=[];let B=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(r)===!1||(B=B&&W.synchronous,k.unshift(W.fulfilled,W.rejected))});const I=[];this.interceptors.response.forEach(function(W){I.push(W.fulfilled,W.rejected)});let N,L=0,V;if(!B){const U=[un.bind(this),void 0];for(U.unshift.apply(U,k),U.push.apply(U,I),V=U.length,N=Promise.resolve(r);L<V;)N=N.then(U[L++],U[L++]);return N}V=k.length;let X=r;for(L=0;L<V;){const U=k[L++],W=k[L++];try{X=U(X)}catch(q){W.call(this,q);break}}try{N=un.call(this,X)}catch(U){return Promise.reject(U)}for(L=0,V=I.length;L<V;)N=N.then(I[L++],I[L++]);return N}getUri(n){n=xe(this.defaults,n);const r=en(n.baseURL,n.url,n.allowAbsoluteUrls);return Vt(r,n.params,n.paramsSerializer)}}T.forEach(["delete","get","head","options"],function(n){Qe.prototype[n]=function(r,a){return this.request(xe(a||{},{method:n,url:r,data:(a||{}).data}))}}),T.forEach(["post","put","patch"],function(n){function r(a){return function(b,v,k){return this.request(xe(k||{},{method:n,headers:a?{"Content-Type":"multipart/form-data"}:{},url:b,data:v}))}}Qe.prototype[n]=r(),Qe.prototype[n+"Form"]=r(!0)});var et=Qe;class Et{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(b){r=b});const a=this;this.promise.then(l=>{if(!a._listeners)return;let b=a._listeners.length;for(;b-- >0;)a._listeners[b](l);a._listeners=null}),this.promise.then=l=>{let b;const v=new Promise(k=>{a.subscribe(k),b=k}).then(l);return v.cancel=function(){a.unsubscribe(b)},v},n(function(b,v,k){a.reason||(a.reason=new Le(b,v,k),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=a=>{n.abort(a)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new Et(function(l){n=l}),cancel:n}}}var wa=Et;function ga(t){return function(r){return t.apply(null,r)}}function va(t){return T.isObject(t)&&t.isAxiosError===!0}const St={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(St).forEach(([t,n])=>{St[n]=t});var Ea=St;function mn(t){const n=new et(t),r=e(et.prototype.request,n);return T.extend(r,et.prototype,n,{allOwnKeys:!0}),T.extend(r,n,null,{allOwnKeys:!0}),r.create=function(l){return mn(xe(t,l))},r}const J=mn(yt);return J.Axios=et,J.CanceledError=Le,J.CancelToken=wa,J.isCancel=Gt,J.VERSION=fn,J.toFormData=Ve,J.AxiosError=M,J.Cancel=J.CanceledError,J.all=function(n){return Promise.all(n)},J.spread=ga,J.isAxiosError=va,J.mergeConfig=xe,J.AxiosHeaders=pe,J.formToJSON=t=>Yt(T.isHTMLForm(t)?new FormData(t):t),J.getAdapter=ln.getAdapter,J.HttpStatusCode=Ea,J.default=J,Rt=J,Rt}var rt={},xn;function Za(){if(xn)return rt;xn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.joinURL=e;function e(){for(var i=[],m=0;m<arguments.length;m++)i[m]=arguments[m];return i.reduce(function(p,R){return p.length===0?R:p.endsWith("/")&&R.startsWith("/")?p+R.substr(1):p.endsWith("/")||R.startsWith("/")?p+R:"".concat(p,"/").concat(R)},"")}return rt}var An;function Qa(){if(An)return ue;An=1;var e=ue&&ue.__awaiter||function(h,y,s,c){function f(u){return u instanceof s?u:new s(function(D){D(u)})}return new(s||(s=Promise))(function(u,D){function _(F){try{O(c.next(F))}catch(P){D(P)}}function j(F){try{O(c.throw(F))}catch(P){D(P)}}function O(F){F.done?u(F.value):f(F.value).then(_,j)}O((c=c.apply(h,y||[])).next())})},i=ue&&ue.__generator||function(h,y){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},c,f,u,D=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return D.next=_(0),D.throw=_(1),D.return=_(2),typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function _(O){return function(F){return j([O,F])}}function j(O){if(c)throw new TypeError("Generator is already executing.");for(;D&&(D=0,O[0]&&(s=0)),s;)try{if(c=1,f&&(u=O[0]&2?f.return:O[0]?f.throw||((u=f.return)&&u.call(f),0):f.next)&&!(u=u.call(f,O[1])).done)return u;switch(f=0,u&&(O=[O[0]&2,u.value]),O[0]){case 0:case 1:u=O;break;case 4:return s.label++,{value:O[1],done:!1};case 5:s.label++,f=O[1],O=[0];continue;case 7:O=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(O[0]===6||O[0]===2)){s=0;continue}if(O[0]===3&&(!u||O[1]>u[0]&&O[1]<u[3])){s.label=O[1];break}if(O[0]===6&&s.label<u[1]){s.label=u[1],u=O;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(O);break}u[2]&&s.ops.pop(),s.trys.pop();continue}O=y.call(h,s)}catch(F){O=[6,F],f=0}finally{c=u=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},m=ue&&ue.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ue,"__esModule",{value:!0}),ue.TransferServer=S,ue.openTransferServer=x,ue.locateTransferServer=A,ue.resolveAssets=g,ue.resolveTransferServerURL=d;var p=st(),R=m(Yn()),w=Za();function C(h){throw Error(h)}function E(h){return h.TRANSFER_SERVER_SEP0024||h.TRANSFER_SERVER||null}function S(h,y,s,c,f){return f===void 0&&(f={}),{get assets(){return s},get domain(){return h},get network(){return c},get url(){return y},get options(){return f},get:function(u,D){return e(this,void 0,void 0,function(){return i(this,function(_){return[2,R.default.get((0,w.joinURL)(y,u),D)]})})},post:function(u,D,_){return e(this,void 0,void 0,function(){return i(this,function(j){return[2,R.default.post((0,w.joinURL)(y,u),D,_)]})})}}}function x(h,y,s){return e(this,void 0,void 0,function(){var c,f,u;return i(this,function(D){switch(D.label){case 0:return[4,p.StellarToml.Resolver.resolve(h)];case 1:return c=D.sent(),f=E(c)||C("There seems to be no transfer server on ".concat(h,".")),u=g(c,h),[2,S(h,f,u,y,s)]}})})}function A(h,y){return e(this,void 0,void 0,function(){var s;return i(this,function(c){switch(c.label){case 0:return[4,p.StellarToml.Resolver.resolve(h,y)];case 1:return s=c.sent(),[2,E(s)]}})})}function g(h,y){if(y===void 0&&(y="?"),!h.CURRENCIES)throw Error("No CURRENCIES found in stellar.toml of domain ".concat(y,"."));return h.CURRENCIES.filter(function(s){return s.code}).map(function(s){return new p.Asset(s.code,s.issuer)})}function d(h,y){return e(this,void 0,void 0,function(){var s,c,f;return i(this,function(u){switch(u.label){case 0:if(y.isNative())throw Error("Native XLM asset does not have an issuer account.");return s=new p.Horizon.Server(h),[4,s.loadAccount(y.getIssuer())];case 1:return c=u.sent(),f=c.home_domain,f?[2,A(f)]:[2,null]}})})}return ue}var ie={},Cn;function es(){if(Cn)return ie;Cn=1;var e=ie&&ie.__assign||function(){return e=Object.assign||function(s){for(var c,f=1,u=arguments.length;f<u;f++){c=arguments[f];for(var D in c)Object.prototype.hasOwnProperty.call(c,D)&&(s[D]=c[D])}return s},e.apply(this,arguments)},i=ie&&ie.__awaiter||function(s,c,f,u){function D(_){return _ instanceof f?_:new f(function(j){j(_)})}return new(f||(f=Promise))(function(_,j){function O($){try{P(u.next($))}catch(se){j(se)}}function F($){try{P(u.throw($))}catch(se){j(se)}}function P($){$.done?_($.value):D($.value).then(O,F)}P((u=u.apply(s,c||[])).next())})},m=ie&&ie.__generator||function(s,c){var f={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},u,D,_,j=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return j.next=O(0),j.throw=O(1),j.return=O(2),typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function O(P){return function($){return F([P,$])}}function F(P){if(u)throw new TypeError("Generator is already executing.");for(;j&&(j=0,P[0]&&(f=0)),f;)try{if(u=1,D&&(_=P[0]&2?D.return:P[0]?D.throw||((_=D.return)&&_.call(D),0):D.next)&&!(_=_.call(D,P[1])).done)return _;switch(D=0,_&&(P=[P[0]&2,_.value]),P[0]){case 0:case 1:_=P;break;case 4:return f.label++,{value:P[1],done:!1};case 5:f.label++,D=P[1],P=[0];continue;case 7:P=f.ops.pop(),f.trys.pop();continue;default:if(_=f.trys,!(_=_.length>0&&_[_.length-1])&&(P[0]===6||P[0]===2)){f=0;continue}if(P[0]===3&&(!_||P[1]>_[0]&&P[1]<_[3])){f.label=P[1];break}if(P[0]===6&&f.label<_[1]){f.label=_[1],_=P;break}if(_&&f.label<_[2]){f.label=_[2],f.ops.push(P);break}_[2]&&f.ops.pop(),f.trys.pop();continue}P=c.call(s,f)}catch($){P=[6,$],D=0}finally{u=_=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},p=ie&&ie.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ie,"__esModule",{value:!0}),ie.WithdrawalType=void 0,ie.Withdrawal=A,ie.createWithdrawalPayment=y;var R=st(),w=p(zn()),C=Hn(),E=Ft(),S=ct(),x;(function(s){s.bankAccount="bank_account",s.cash="cash",s.crypto="crypto",s.mobile="mobile",s.billPayment="bill_payment"})(x||(ie.WithdrawalType=x={}));function A(s,c,f){if(f===void 0&&(f={}),c.isNative())throw Error("Cannot withdraw lumens, but only assets issued by ".concat(s.domain,"."));var u={asset:c,fields:e(e({lang:s.options.lang,wallet_name:s.options.walletName,wallet_url:s.options.walletURL},f),{asset_code:c.getCode()}),interactive:function(D){return g(u,D)},legacy:function(D){return d(u,D)},transferServer:s};return u}function g(s,c){return i(this,void 0,void 0,function(){var f,u,D,_,j,O,F;return m(this,function(P){switch(P.label){case 0:f=s.fields,u=s.transferServer,D=new w.default,Object.keys(f).forEach(function($){typeof f[$]<"u"&&D.append($,f[$])}),_={"Content-Type":"multipart/form-data"},c&&(_.Authorization="Bearer ".concat(c)),j=function($){return $===200||$===201||$===400||$===403},P.label=1;case 1:return P.trys.push([1,3,,4]),[4,h(s,function(){return u.post("/transactions/withdraw/interactive",D,{headers:_,validateStatus:j})})];case 2:return[2,P.sent()];case 3:if(O=P.sent(),F=O.response,F&&F.status===404)return[2,d(s,c)];if(F)throw(0,C.ResponseError)(F,s.transferServer);return[2,d(s,c)];case 4:return[2]}})})}function d(s,c){return i(this,void 0,void 0,function(){var f,u,D,_;return m(this,function(j){return f=s.fields,u=s.transferServer,D={},c&&(D.Authorization="Bearer ".concat(c)),_=function(O){return O===200||O===201||O===400||O===403},[2,h(s,function(){return u.get("/withdraw",{headers:D,params:f,validateStatus:_})})]})})}function h(s,c){return i(this,void 0,void 0,function(){var f,u;return m(this,function(D){switch(D.label){case 0:return f=s.transferServer,[4,c()];case 1:if(u=D.sent(),(0,E.isKYCRequired)(u))return[2,(0,E.createKYCInstructions)(u,f.domain)];if(u.status===200)return[2,{data:u.data,type:S.TransferResultType.ok}];throw(0,C.ResponseError)(u,s.transferServer)}})})}function y(s,c,f,u,D){if(D===void 0&&(D={}),c.addOperation(R.Operation.payment({amount:u,asset:f,destination:s.data.account_id,source:D.sourceAccountID})),s.data.memo_type==="hash"&&s.data.memo)c.addMemo(R.Memo.hash(s.data.memo));else if(s.data.memo_type==="id"&&s.data.memo)c.addMemo(R.Memo.id(s.data.memo));else if(s.data.memo_type==="text"&&s.data.memo)c.addMemo(R.Memo.text(s.data.memo));else if(s.data.memo)throw Error("Anchor requires a memo on the withdrawal transaction, but did not specify a valid memo type.");return c.build()}return ie}var On;function ts(){return On||(On=1,function(e){var i=Ce&&Ce.__createBinding||(Object.create?function(p,R,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(R,w);(!E||("get"in E?!R.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return R[w]}}),Object.defineProperty(p,C,E)}:function(p,R,w,C){C===void 0&&(C=w),p[C]=R[w]}),m=Ce&&Ce.__exportStar||function(p,R){for(var w in p)w!=="default"&&!Object.prototype.hasOwnProperty.call(R,w)&&i(R,p,w)};Object.defineProperty(e,"__esModule",{value:!0}),m(Ya(),e),m(Ja(),e),m(Ga(),e),m(Ft(),e),m(ct(),e),m(Xa(),e),m(Qa(),e),m(es(),e)}(Ce)),Ce}var H=ts();const ns=e=>Array.from(new Set(e));function rs(e,i,m){return Promise.race([e,new Promise((p,R)=>{setTimeout(()=>R(Error(m)),i)})])}async function as(e,i){const m=i?de.Networks.TESTNET:de.Networks.PUBLIC;try{return await rs(H.openTransferServer(e,m,{walletName:"Sunce",walletURL:"https://sunce.montelibero.org"}),8e3,`Transfer server discovery at ${e} timed out.`)}catch(p){console.error(`Treating ${e} as no transfer server available:`,p);return}}function ss(e,i,m={}){const p=e.map(E=>E.issuer).filter(E=>!!E),w=_a(p,i).map((E,S)=>m[e[S].code]||E),C=ns(w).filter(E=>!!E);return Ta(C,E=>(pn.get(E)||pn.suspend(E,async()=>{try{const S=await as(E,i);if(!S)return[];const x=await H.fetchTransferInfos(S);return x?[x]:[]}catch(S){return console.error(`Failed to fetch transfer infos for transfer server ${E}:`,S),[]}}))[0],{ignoreSingleErrors:!0})}const is=Bn({root:{display:"block",position:"relative",height:"100%",overflow:"auto",width:"100%"},slide:{display:"block",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:0,overflow:"auto",transition:"opacity .3s",willChange:"opacity","&$active":{opacity:1}},active:{}});function os(e){const i=is();return o.createElement("div",{className:`${i.root} ${e.className||""}`,style:e.style},e.children.map((m,p)=>o.createElement("div",{className:[i.slide,p===e.current?i.active:""].join(" "),key:p},m)))}function cs(e){const i=[];for(let m=0;m<e.size;m++){let p;m===e.index?p=e.current:m===e.index-1?p=e.prev||null:m===e.index+1?p=e.next||null:p=null,i.push(o.createElement(o.Fragment,{key:m},p))}return o.createElement(os,{className:e.className,current:e.index,style:e.style},i)}const ls=o.memo(cs),te={navigateBack:()=>({type:"navigate-back"}),selectType:(e,i,m)=>({type:"select-type",asset:e,method:i,transferServer:m}),selectXLMDeposit:()=>({type:"select-xlm-deposit"}),captureWithdrawalInput:e=>({type:"capture-fields",formValues:e}),conductAuth:(e,i,m,p)=>({type:"conduct-auth",authChallenge:p,deposit:e,webauth:m,withdrawal:i}),setAuthToken:e=>({type:"set-auth-token",authToken:e}),setDidRedirectToKYC:()=>({type:"did-redirect-to-kyc"}),setTransferTransaction:e=>({type:"set-transfer-transaction",transaction:e}),conductKYC:(e,i,m,p)=>({type:"conduct-kyc",authToken:p,deposit:e,response:m,withdrawal:i}),promptForTxDetails:(e,i,m,p)=>({type:"prompt-for-tx-details",deposit:e,response:m,transfer:p,withdrawal:i}),completed:e=>({type:"completed",amount:e}),kycDenied:e=>({type:"kyc-denied",response:e})},us={step:"initial",formValues:{}};function fs(e,i){switch(i.type){case"navigate-back":return e.step==="enter-values"?{...e,step:"initial"}:e.step==="xlm-deposit"?{step:"initial",formValues:{}}:"deposit"in e&&e.deposit?{step:"enter-values",asset:e.deposit.asset,method:e.deposit.fields.type,formValues:e.deposit.fields,transferServer:e.deposit.transferServer}:"withdrawal"in e&&e.withdrawal?{step:"enter-values",asset:e.withdrawal.asset,method:e.withdrawal.fields.type,formValues:e.withdrawal.fields,transferServer:e.withdrawal.transferServer}:e;case"select-type":return{...e,step:"enter-values",asset:i.asset,method:i.method,transferServer:i.transferServer};case"select-xlm-deposit":return{step:"xlm-deposit"};case"capture-fields":return{step:"enter-values",asset:e.asset,formValues:i.formValues||e.formValues,method:e.method,transferServer:e.transferServer};case"conduct-auth":return{step:"auth-pending",authChallenge:i.authChallenge,deposit:i.deposit,webauth:i.webauth,withdrawal:i.withdrawal};case"set-auth-token":return{...e,authToken:i.authToken};case"conduct-kyc":return{step:"kyc-pending",authToken:i.authToken,deposit:i.deposit,response:i.response,withdrawal:i.withdrawal};case"did-redirect-to-kyc":return{...e,didRedirect:!0};case"set-transfer-transaction":return{...e,transfer:i.transaction};case"prompt-for-tx-details":return{step:"enter-tx-details",deposit:i.deposit,response:i.response,transfer:i.transfer,withdrawal:i.withdrawal};case"completed":return{step:"completed",amount:i.amount,deposit:e.deposit,response:e.response,withdrawal:e.withdrawal};case"kyc-denied":return{step:"kyc-denied",deposit:e.deposit,response:i.response,withdrawal:e.withdrawal};default:throw ae("UnexpectedActionError",`Unexpected action: ${i.type}`,{action:i.type})}}var ke={},me={},De={},kn;function Jn(){if(kn)return De;kn=1;var e=De&&De.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(De,"__esModule",{value:!0}),De.debug=void 0;var i=e(Ra());return De.debug=(0,i.default)("sep-10"),De}var Dn;function ds(){if(Dn)return me;Dn=1;var e=me&&me.__awaiter||function(g,d,h,y){function s(c){return c instanceof h?c:new h(function(f){f(c)})}return new(h||(h=Promise))(function(c,f){function u(j){try{_(y.next(j))}catch(O){f(O)}}function D(j){try{_(y.throw(j))}catch(O){f(O)}}function _(j){j.done?c(j.value):s(j.value).then(u,D)}_((y=y.apply(g,d||[])).next())})},i=me&&me.__generator||function(g,d){var h={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},y,s,c,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=u(0),f.throw=u(1),f.return=u(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(_){return function(j){return D([_,j])}}function D(_){if(y)throw new TypeError("Generator is already executing.");for(;f&&(f=0,_[0]&&(h=0)),h;)try{if(y=1,s&&(c=_[0]&2?s.return:_[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,_[1])).done)return c;switch(s=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return h.label++,{value:_[1],done:!1};case 5:h.label++,s=_[1],_=[0];continue;case 7:_=h.ops.pop(),h.trys.pop();continue;default:if(c=h.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){h=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){h.label=_[1];break}if(_[0]===6&&h.label<c[1]){h.label=c[1],c=_;break}if(c&&h.label<c[2]){h.label=c[2],h.ops.push(_);break}c[2]&&h.ops.pop(),h.trys.pop();continue}_=d.call(g,h)}catch(j){_=[6,j],s=0}finally{y=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},m=me&&me.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(me,"__esModule",{value:!0}),me.fetchChallenge=S,me.postResponse=x,me.authenticate=A;var p=st(),R=m(Yn()),w=Jn();function C(g,d,h){(0,w.debug)("Checking challenge transaction...",{localPublicKey:h,serviceSigningKey:d});var y=d?p.Keypair.fromPublicKey(d):null;if(d&&g.source!==d)throw Error("Challenge source account does not match the remote signing account: ".concat(g.source));if(String(g.sequence)!=="0")throw Error("Challenge sequence number must be zero.");var s=1e4;if(!g.timeBounds)throw Error("Challenge transaction has no time bounds set.");if(Number.parseInt(g.timeBounds.minTime,10)*1e3>Date.now()+s)throw Error("Challenge transaction lower time bound is in the future.");if(Number.parseInt(g.timeBounds.maxTime,10)*1e3<Date.now()-s)throw Error("Challenge transaction upper time bound is in the past.");if(g.operations.length===0)throw Error("Challenge transaction carries no operations.");var c=E(g);if(c.length!==64)throw Error("Challenge nonce must be 64 bytes long.");if(y&&!g.signatures.some(function(f){return f.hint().equals(y.signatureHint())}))throw Error("Challenge not signed by service's signing key.")}function E(g){var d=g.operations.filter(function(h){return h.type==="manageData"})[0];if(!d||!d.value)throw Error("Challange does not contain a manage_data operation");return d.value}function S(g,d,h,y){return e(this,void 0,void 0,function(){var s,c,f;return i(this,function(u){switch(u.label){case 0:(0,w.debug)("Fetching web auth challenge from ".concat(g,"...")),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,R.default)(g,{params:{account:h}})];case 2:return s=u.sent(),[3,4];case 3:throw c=u.sent(),(0,w.debug)("Fetching web auth challenge from ".concat(g," failed:"),c),Error("Cannot fetch web auth challenge: ".concat(c.message));case 4:return(0,w.debug)("Fetched web auth challenge:",s.data),f=new p.Transaction(s.data.transaction,y),C(f,d,h),[2,f]}})})}function x(g,d){return e(this,void 0,void 0,function(){var h,y,s,c,f;return i(this,function(u){switch(u.label){case 0:h={transaction:d.toEnvelope().toXDR().toString("base64")},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,R.default)(g,{method:"POST",headers:{"Content-Type":"application/json"},data:h})];case 2:return y=u.sent(),[3,4];case 3:throw s=u.sent(),(0,w.debug)("Authentication at ".concat(g," failed:"),s),Object.assign(Error("Web authentication failed: ".concat(s.message)),{response:s.response});case 4:if(!y.data||typeof y.data.token!="string")throw c=!((f=y.data)===null||f===void 0)&&f.error?y.data.error:"No token sent.",Error("Web authentication failed: ".concat(c));return[2,y.data.token]}})})}function A(g,d,h,y){return e(this,void 0,void 0,function(){var s,c;return i(this,function(f){switch(f.label){case 0:return[4,S(g,d,h.publicKey(),y)];case 1:return s=f.sent(),s.sign(h),[4,x(g,s)];case 2:return c=f.sent(),[2,c]}})})}return me}var ve={},Pn;function ms(){if(Pn)return ve;Pn=1;var e=ve&&ve.__awaiter||function(E,S,x,A){function g(d){return d instanceof x?d:new x(function(h){h(d)})}return new(x||(x=Promise))(function(d,h){function y(f){try{c(A.next(f))}catch(u){h(u)}}function s(f){try{c(A.throw(f))}catch(u){h(u)}}function c(f){f.done?d(f.value):g(f.value).then(y,s)}c((A=A.apply(E,S||[])).next())})},i=ve&&ve.__generator||function(E,S){var x={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},A,g,d,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=y(0),h.throw=y(1),h.return=y(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(c){return function(f){return s([c,f])}}function s(c){if(A)throw new TypeError("Generator is already executing.");for(;h&&(h=0,c[0]&&(x=0)),x;)try{if(A=1,g&&(d=c[0]&2?g.return:c[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,c[1])).done)return d;switch(g=0,d&&(c=[c[0]&2,d.value]),c[0]){case 0:case 1:d=c;break;case 4:return x.label++,{value:c[1],done:!1};case 5:x.label++,g=c[1],c=[0];continue;case 7:c=x.ops.pop(),x.trys.pop();continue;default:if(d=x.trys,!(d=d.length>0&&d[d.length-1])&&(c[0]===6||c[0]===2)){x=0;continue}if(c[0]===3&&(!d||c[1]>d[0]&&c[1]<d[3])){x.label=c[1];break}if(c[0]===6&&x.label<d[1]){x.label=d[1],d=c;break}if(d&&x.label<d[2]){x.label=d[2],x.ops.push(c);break}d[2]&&x.ops.pop(),x.trys.pop();continue}c=S.call(E,x)}catch(f){c=[6,f],g=0}finally{A=d=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ve,"__esModule",{value:!0}),ve.getServiceSigningKey=R,ve.getWebAuthEndpointURL=w,ve.fetchWebAuthData=C;var m=st(),p=Jn();function R(E){return E.SIGNING_KEY||null}function w(E){return E.WEB_AUTH_ENDPOINT||null}function C(E,S){return e(this,void 0,void 0,function(){var x,A,g,d,h;return i(this,function(y){switch(y.label){case 0:return[4,E.loadAccount(S)];case 1:return x=y.sent(),A=x.home_domain,A?[4,m.StellarToml.Resolver.resolve(A)]:((0,p.debug)("Web auth endpoint cannot be located. Issuing account has no home_domain: ".concat(S)),[2,null]);case 2:return g=y.sent(),d=w(g),h=R(g),!d||!h?[2,null]:[2,{domain:A,endpointURL:d,signingKey:h}]}})})}return ve}var Fn;function hs(){return Fn||(Fn=1,function(e){var i=ke&&ke.__createBinding||(Object.create?function(p,R,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(R,w);(!E||("get"in E?!R.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return R[w]}}),Object.defineProperty(p,C,E)}:function(p,R,w,C){C===void 0&&(C=w),p[C]=R[w]}),m=ke&&ke.__exportStar||function(p,R){for(var w in p)w!=="default"&&!Object.prototype.hasOwnProperty.call(R,w)&&i(R,p,w)};Object.defineProperty(e,"__esModule",{value:!0}),m(ds(),e),m(ms(),e)}(ke)),ke}var In=hs();function ys(e){const i=o.useRef(null),m=R=>{i.current||(i.current=setInterval(async()=>{try{await R()}catch(w){Re(w)}},e))},p=()=>{i.current&&(clearInterval(i.current),i.current=null)};return o.useEffect(()=>()=>p(),[]),{isActive:()=>i.current!==null,start:m,stop:p}}function ps(e){const{memo:i,memo_type:m}=e;if(!i||!m)return null;switch(m){case"hash":const p=jn.from(i,"base64");return de.Memo.hash(p.toString("hex"));case"id":return de.Memo.id(i);case"text":return de.Memo.text(i);default:return null}}function Gn(e){return e==null?e:Number.parseFloat(e)}const bs=6e3,ws={current:us,prevs:[]};function gs(e,i){const m=fs(e.current,i),p=i.type!=="navigate-back";return m.step!==e.current.step&&p?{prevs:[...e.prevs,e.current],current:m,next:void 0}:m.step!==e.current.step&&!p?{prevs:e.prevs.slice(0,-1),next:e.current,current:m}:{...e,current:m}}function Xn(e,i){const m=Ln(),p=o.useContext(xa),R=Pt(),[w,C]=o.useReducer(gs,ws),E=async(_,j,O)=>{C(te.selectType(j,O||"",_))},S=async _=>{const j=Aa.get(_.domain),O=j&&j[0]?j[1]:await m.fetchStellarToml(_.domain),F=In.getWebAuthEndpointURL(O);if(!F)return[void 0,void 0];const P={domain:_.domain,endpointURL:F,signingKey:In.getServiceSigningKey(O)||null};P.signingKey&&p.store(P.signingKey,P.domain);const $=R.getCachedAuthToken(P.endpointURL,e.publicKey);return[P,$]},x=async(_,j,O)=>{const F=await ja(j,e,O),P=await R.postResponse(_.endpointURL,F,e.testnet);return C(te.setAuthToken(P)),P},A=async _=>{C(te.captureWithdrawalInput(_.formValues));const O=(await H.fetchTransferInfos(_.transferServer)).assets.find(se=>se.asset.equals(_.asset)),F=O&&O.withdraw;if(!F||!F.enabled)throw ae("AssetNotWithdrawableError",`Asset ${_.asset.code} seems to not be withdrawable via ${_.transferServer.domain}`,{asset:_.asset.code,domain:_.transferServer.domain});const[P,$]=await S(_.transferServer);return $&&C(te.setAuthToken($)),[P,$]},g=()=>C(te.setDidRedirectToKYC()),d=_=>C(te.completed(_));let h=0;const y=async(_,j,O)=>{if(window.navigator.onLine!==!1)try{const{transaction:F}=await H.fetchTransaction(_,j,"transfer",O);return h=0,C(te.setTransferTransaction(F)),F}catch(F){h++,h<=3&&Re(F)}},{isActive:s,start:c,stop:f}=ys(bs);return{dispatch:C,machineState:w,transfer:{afterSuccessfulExecution:d,didRedirectToKYC:g,initiateWebAuth:S,isKYCPollingActive:s,navigateBack:()=>{s()&&f(),["completed","initial","kyc-denied"].indexOf(w.current.step)>-1?i():C(te.navigateBack())},performWebAuth:x,pollKYCStatus:y,startKYCPolling:c,stopKYCPolling:f,submitTransferFieldValues:A,submitTransferSelection:E}}}function vs(e,i){const m={...i.formValues,type:i.method};return H.Deposit(i.transferServer,i.asset,e.accountID,m)}function Es(e,i){const m=Pt(),{dispatch:p,machineState:R,transfer:w}=Xn(e,i),C=()=>{p(te.selectXLMDeposit())},E=async(d,h,y)=>{const s=await d.interactive(h);if(s.type===H.TransferResultType.ok)p(te.promptForTxDetails(d,void 0,s,y)),w.stopKYCPolling();else if(s.type===H.TransferResultType.kyc&&s.subtype===H.KYCResponseType.interactive){const c=s.data.id||s.data.identifier;w.isKYCPollingActive()||(w.startKYCPolling(()=>A(d,c,h)),p(te.conductKYC(d,void 0,s,"authToken"in R.current?R.current.authToken:void 0)),A(d,c,h))}else throw ae("UnexpectedResponseTypeError",`Unexpected response type: ${s.type} / ${s.data.type}`,{type:s.type,dataType:s.data.type});return s},S=async(d,h,y,s,c)=>{const f=await w.performWebAuth(y,s,c);return await E(d,f),f},x=async d=>{const y=(await H.fetchTransferInfos(d.transferServer)).assets.find(u=>u.asset.equals(d.asset));if(!y||!y.deposit||!y.deposit.enabled)throw ae("AssetNotDepositableError",`Asset ${d.asset.code} seems to not be depositable via ${d.transferServer.domain}`,{asset:d.asset.code,domain:d.transferServer.domain});const s=vs(e,d),[c,f]=await w.submitTransferFieldValues(d);if(!c)await E(s);else if(f)await E(s,f);else{const u=e.testnet?de.Networks.TESTNET:de.Networks.PUBLIC,D=await m.fetchChallenge(c.endpointURL,c.signingKey,e.publicKey,u);p(te.conductAuth(s,void 0,c,D))}},A=async(d,h,y)=>{const s=await w.pollKYCStatus(d.transferServer,h,y);if(s&&s.status===H.TransferStatus.pending_user_transfer_start){const c={type:H.TransferResultType.ok,data:{how:"",eta:s.status_eta,fee_fixed:Gn(s.amount_fee)}};p(te.promptForTxDetails(d,void 0,c,s)),w.stopKYCPolling()}else if(s&&s.status==="completed"){const c=he(s.amount_out);p(te.completed(c)),w.stopKYCPolling()}};return{actions:{afterSuccessfulExecution:w.afterSuccessfulExecution,didRedirectToKYC:w.didRedirectToKYC,navigateBack:w.navigateBack,performWebAuth:S,selectXLMDeposit:C,submitTransferFieldValues:x,submitTransferSelection:w.submitTransferSelection},nextState:R.next,prevStates:R.prevs,state:R.current}}function Ss(e){const i={...e.formValues,type:e.method};return H.Withdrawal(e.transferServer,e.asset,i)}async function _s(e,i,m,p,R,w){const C=ps(R.data);if(!R.data.account_id)throw ae("MissingInfoError",`Cannot create transaction, because ${w.transferServer.domain} did not send all required information.`,{transferServer:w.transferServer.domain});const E=[de.Operation.payment({amount:String(m),asset:w.asset,destination:R.data.account_id})];return Ba(E,{accountData:i,horizon:p,memo:C,walletAccount:e})}function Ts(e,i){const m=Ln(),p=Ca(e.testnet),R=Pt(),{dispatch:w,machineState:C,transfer:E}=Xn(e,i),S=async(y,s,c)=>{const f=await y.interactive(s);if(f.type===H.TransferResultType.ok)w(te.promptForTxDetails(void 0,y,f,c)),E.stopKYCPolling();else if(f.type===H.TransferResultType.kyc&&f.subtype===H.KYCResponseType.interactive){const u=f.data.id||f.data.identifier;E.isKYCPollingActive()||(E.startKYCPolling(()=>d(y,u,s)),w(te.conductKYC(void 0,y,f,"authToken"in C.current?C.current.authToken:void 0)),d(y,u,s))}else throw ae("UnexpectedResponseTypeError",`Unexpected response type: ${f.type} / ${f.data.type}`,{type:f.type,dataType:f.data.type});return f},x=async(y,s,c,f,u)=>{const D=await E.performWebAuth(c,f,u);return await S(s,D),D},A=async y=>{const c=(await H.fetchTransferInfos(y.transferServer)).assets.find(j=>j.asset.equals(y.asset)),f=c&&c.withdraw;if(!f||!f.enabled)throw ae("AssetNotWithdrawableError",`Asset ${y.asset.code} seems to not be withdrawable via ${y.transferServer.domain}`,{asset:y.asset.code,domain:y.transferServer.domain});const u=Ss(y),[D,_]=await E.submitTransferFieldValues(y);if(!D)await S(u);else if(_)await S(u,_);else{const j=e.testnet?de.Networks.TESTNET:de.Networks.PUBLIC,O=await R.fetchChallenge(D.endpointURL,D.signingKey,e.publicKey,j);w(te.conductAuth(void 0,u,D,O))}},g=async(y,s,c)=>{const f=await m.fetchAccountData(p,e.accountID),u=p[0];if(!f)throw ae("FetchAccountDataError",`Cannot fetch account data of ${e.accountID} from ${u}`,{account:e.accountID,horizon:u});return _s(e,f,c,new de.Horizon.Server(u),s,y)},d=async(y,s,c)=>{const f=await E.pollKYCStatus(y.transferServer,s,c);if(f&&f.status===H.TransferStatus.pending_user_transfer_start){const u={type:H.TransferResultType.ok,data:{account_id:f.withdraw_anchor_account,memo_type:f.withdraw_memo_type,memo:f.withdraw_memo,eta:f.status_eta,fee_fixed:Gn(f.amount_fee),extra_info:f.to?{message:f.to}:void 0}};w(te.promptForTxDetails(void 0,y,u,f)),E.stopKYCPolling()}};return{actions:{afterSuccessfulExecution:E.afterSuccessfulExecution,didRedirectToKYC:E.didRedirectToKYC,navigateBack:E.navigateBack,performWebAuth:x,prepareWithdrawalTransaction:g,submitTransferFieldValues:A,submitTransferSelection:E.submitTransferSelection},nextState:C.next,prevStates:C.prevs,state:C.current}}const Be=o.createContext({});function Rs(e){const{children:i,...m}=e;return o.createElement(Be.Provider,{value:m},i)}function xs(e){const i=Oa(),{t:m}=G();return o.createElement(Un,{margin:e.margin,textAlign:"center"},o.createElement(fe,null,m("transfer-service.no-withdrawable-assets.body.no-withdrawable-assets")),o.createElement(je,{desktop:"inline",target:e.actionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{onClick:()=>i.history.push(La(e.account.id)),type:"primary"},m("transfer-service.no-withdrawable-assets.action.add-asset")))))}const As=o.memo(xs);function Cs(e){const i=qn();return i?o.createElement(oe,null,e.children[0]):o.createElement(ka,{alignItems:"stretch",height:"100%"},o.createElement(oe,{grow:!0,minWidth:300,maxWidth:400,padding:i?0:"4vh 0",overflowY:"auto",shrink:0,width:"50%"},o.createElement(o.Suspense,{fallback:o.createElement(Mn,null)},e.children[0])),o.createElement(oe,{grow:!0,margin:"0 0 0 5%",padding:"4vh 1vw 4vh 5%",shrink:!0,style:{borderLeft:"1px solid rgba(0, 0, 0, 0.25)"}},e.children[1]))}function Y(e){return o.createElement(fe,{color:"textSecondary",style:{marginBottom:16},variant:"body2"},e.children)}function ye(e){return o.createElement(o.Fragment,null,o.createElement(fe,{color:"textSecondary",style:{marginTop:16,marginBottom:16},variant:"h6"},e.headline),e.children)}function Os(e){const{transferServer:i}=e.state.deposit,{t:m}=G();return o.createElement(oe,{grow:!0},o.createElement(oe,{alignItems:"center",margin:"24px 0",textAlign:"center"},o.createElement(fe,{variant:"h5"},m("transfer-service.deposit-success.body.deposit-pending")),o.createElement(fe,{style:{margin:"16px 0"},variant:"body2"},o.createElement(fe,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.deposit-success.body.info.1",`${i.domain} is waiting for your deposit.`,{domain:i.domain})),o.createElement(fe,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.deposit-success.body.info.2"))),o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{onClick:e.onClose,type:"primary"},m("transfer-service.deposit-success.action.close"))))))}const ks=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.deposit-success.sidebar.headline")},o.createElement(Y,null,e("transfer-service.deposit-success.sidebar.info")))},Zn=Object.assign(o.memo(Os),{Sidebar:ks});function Ds(e){const{account:i}=o.useContext(Be);return o.createElement(oe,{alignItems:"center",textAlign:"center"},o.createElement(za,{account:i,onCloseDialog:e.onCloseDialog}))}const Ps=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.purchase-lumens.sidebar.headline")},o.createElement(Y,null,e("transfer-service.purchase-lumens.sidebar.info.1")),o.createElement(Y,null,e("transfer-service.purchase-lumens.sidebar.info.2")))},Qn=Object.assign(o.memo(Ds),{Sidebar:Ps}),Ue=o.createContext({});function Fs(e){const{children:i,...m}=e;return o.createElement(Ue.Provider,{value:m},i)}const Is=()=>{};function Ns(e){const{actions:i,state:m}=e.type==="deposit"?o.useContext(Be):o.useContext(Ue),[p,R]=o.useState(),[w,C]=it({throwOnError:!0}),E=o.useCallback(S=>C(async()=>{if(m.step!=="auth-pending")throw ae("UnexpectedStateError",`Encountered unexpected state: ${m.step}`,{state:m.step});try{return await i.performWebAuth(m.deposit,m.withdrawal,m.webauth,e.authChallenge,S.password)}catch(x){if(Da(x))R(x);else throw x}}),[i.performWebAuth,C,e.authChallenge,m]);return e.authChallenge?o.createElement(oe,{alignItems:"stretch",margin:"0 auto",maxWidth:500,width:"100%"},o.createElement(Ua,{account:e.account,actionsRef:e.dialogActionsRef,loading:w.type==="pending",passwordError:p,onClose:i.navigateBack,onConfirm:m.step==="auth-pending"?E:Is,transaction:e.authChallenge})):null}const js=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.authentication.sidebar.headline")},o.createElement(Y,null,e("transfer-service.authentication.sidebar.info.1")),o.createElement(Y,null,e("transfer-service.authentication.sidebar.info.2")))},er=Object.assign(o.memo(Ns),{Sidebar:js});function Bs(e){const{response:i}=e.state,{transferServer:m}=e.state.deposit||e.state.withdrawal;throw ae("KycDeniedError",`${m.domain} has rejected the information about your person that you supplied. See ${i.more_info_url} for more details.`,{domain:m.domain,url:i.more_info_url||""})}const Ls=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.kyc-denied.sidebar.headline")},o.createElement(Y,null,e("transfer-service.kyc-denied.sidebar.info")))},tr=Object.assign(o.memo(Bs),{Sidebar:Ls}),Us=e=>["bic","iban","sepa","swift"].indexOf(e)>-1,qs=(e,i)=>e.lt(i)?e:i,nr=e=>Us(e)?e.toUpperCase():e,rr=e=>e[0].toUpperCase()+e.slice(1);function Ms(e,i,m){const p=i&&i.gt(0)?i:null,R=m?qs(e,m):e;return p&&R&&p.gt(R)?`Not possible - Minimum ${Fe(p)}`:p&&R?`${Fe(p)} - ${Fe(R)}`:p?`Min. ${Fe(p)}`:R?`Max. ${Fe(R)}`:""}function It(e){return(e===e.toLowerCase()||e===e.toUpperCase())&&(e=e.replace(/\. ([a-z])/g,(i,m)=>`. ${m.toUpperCase()}`),e=e.replace(/\b([A-Za-z]+)\b/g,i=>nr(i))),rr(e)}function Ot(e){return e<0||e>365*24*60*60?"<illegal value>":e<90?`${Math.round(e)} seconds`:e<90*60?`${Math.round(e/60)} minutes`:e<48*60*60?`${Math.round(e/60/60)} hours`:`${Math.round(e/24/60/60)} days`}function kt(e){return e.replace(/[-_]/g," ").split(" ").map((i,m)=>m===0?rr(i):i).map(i=>nr(i)).join(" ")}function Pe(e){return o.createElement(fe,{style:{margin:"8px 0"},variant:"body2"},e.children)}function $s(e){const{t:i}=G();return o.createElement(oe,{grow:!0},o.createElement(oe,{alignItems:"center",margin:"16px auto",textAlign:"center"},!e.transaction||e.transaction.status===H.TransferStatus.incomplete?e.didRedirectAlready?o.createElement(o.Fragment,null,o.createElement(Pe,null,i("transfer-service.transaction-status.incomplete.already-redirected.info.1",`${e.domain} is checking your personal information. Please try again later.`,{domain:e.domain})," "),e.transaction&&e.transaction.status_eta?o.createElement(Pe,null,i("transfer-service.transaction-status.incomplete.already-redirected.info.2",`Estimated time to completion: ${Ot(e.transaction.status_eta)}`,{eta:Ot(e.transaction.status_eta)})):null):o.createElement(Pe,null,i("transfer-service.transaction-status.incomplete.not-redirected.info",`${e.domain} requires you to provide additional information.`,{domain:e.domain})):e.transaction.status===H.TransferStatus.error?o.createElement(o.Fragment,null,o.createElement(Pe,null,"$",e.type==="deposit"?i("transfer-service.transaction-status.error.rejected.deposit"):i("transfer-service.transaction-status.error.rejected.withdrawal")," ","– ",e.transaction.message),o.createElement(Pe,null,i("transfer-service.transaction-status.error.contact",`Please contact ${e.domain}.`,{domain:e.domain}))):e.transaction.status===H.TransferStatus.pending_user_transfer_start?o.createElement(Pe,null,i("transfer-service.transaction-status.pending-user-transfer-start.info",`${e.domain} requires further information from you.`,{domain:e.domain})):e.transaction.more_info_url?o.createElement(Pe,null,i("transfer-service.transaction-status.more-info-url.info"),o.createElement("br",null),o.createElement("a",{href:e.transaction.more_info_url,target:"_blank",rel:"noopener noreferrer"},e.transaction.more_info_url)):null))}const Ws=o.memo($s);function Ks(e){const{response:i}=e.state,{transferServer:m}=e.type==="deposit"?e.state.deposit:e.state.withdrawal,{actions:p}=e.type==="deposit"?o.useContext(Be):o.useContext(Ue),{t:R}=G(),w=o.useMemo(()=>ot(),[]),C=E=>{E.preventDefault(),p.didRedirectToKYC(),i.data.type==="interactive_customer_info_needed"?(console.debug(`Opening anchor KYC page: ${i.data.url}`),qa(i.data.url)):Re(ae("OnlyInteractiveKycSupportedError","Only interactive KYCs are supported."))};return o.createElement("form",{id:w,noValidate:!0,onSubmit:C},o.createElement(oe,{grow:!0},o.createElement(oe,{alignItems:"center",margin:"24px auto",textAlign:"center"},o.createElement(fe,{variant:"h5"},R("transfer-service.kyc-pending.body.additional-info-needed")),o.createElement(Ws,{domain:m.domain,transaction:e.state.transfer,type:e.type}),e.state.didRedirect?o.createElement(Un,{grow:!0,margin:"48px 0",textAlign:"center"},o.createElement(Pa,null)):null,o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,{desktopStyle:{justifyContent:"center",marginTop:16}},o.createElement(Ne,{form:w,type:"submit"},e.state.didRedirect?R("transfer-service.kyc-pending.action.open-again"):R("transfer-service.kyc-pending.action.continue")))))))}const Vs=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.kyc-pending.sidebar.headline")},o.createElement(Y,null,e("transfer-service.kyc-pending.sidebar.info.1")),o.createElement(Y,null,e("transfer-service.kyc-pending.sidebar.info.2")))},ar=Object.assign(o.memo(Ks),{Sidebar:Vs});function zs(e){return o.createElement(oe,null,e.children)}const Ke=o.memo(zs);function Dt(e){const{description:i,choices:m,optional:p=!1}=e.descriptor,{t:R}=G(),w=It(i),C=kt(e.name),E=p?R("transfer-service.form-builder.placeholder.optional",`(Optional) ${C}`,{name:C}):C;return m?o.createElement(Ct,{helperText:w,label:C,onChange:e.onChange,placeholder:E,select:!0,style:{flexGrow:1,...e.style},value:e.value},m.map((S,x)=>o.createElement(at,{key:x,value:S},kt(S)))):o.createElement(Ct,{helperText:w,label:C,onChange:e.onChange,placeholder:E,style:{flexGrow:1,...e.style},value:e.value||""})}function Hs(e){const i=Object.entries(e.fields).filter(([m,p])=>p&&typeof p=="object");return o.createElement(Ke,null,i.map(([m,p])=>o.createElement(Dt,{key:m,descriptor:p,name:m,onChange:R=>e.onSetFormValue(m,R.target.value),style:e.fieldStyle,value:e.formValues[m]})))}const xt=e=>typeof e=="string"&&e.length>0;function Ys(e,i){return Object.keys(e).reduce((m,p)=>{const R=e[p];return i(R,p)?{...m,[p]:R}:m},{})}function Js(e){return e&&e.length>=15&&e.match(/^[A-Z]{2}[0-9]{2}\s?[A-Z0-9]{4}\s?[A-Z0-9]{4}/)?e.replace(/\s+/g,""):e}function Gs(e,i){return i.reduce((m,p)=>p(m),e)}function Xs(e,i){const m={...e};return i==="bank_account"&&(m.dest=Gs(m.dest,[Js])),m}const Zs=o.memo(function(i){const{t:m}=G(),p=i.asset?i.asset.getCode():"";return!i.metadata||!i.metadata.min_amount&&!i.metadata.max_amount?null:o.createElement(We,{inputProps:{style:{color:Vn.palette.text.secondary}},label:m("transfer-service.transfer-details.body.min-max-amount.label"),style:{marginTop:24},value:[i.metadata.min_amount?m("transfer-service.transfer-details.body.min-max-amount.min-amount",`Min. ${i.metadata.min_amount} ${p}`.trim(),{amount:i.metadata.min_amount,assetCode:p}):null,i.metadata.max_amount?m("transfer-service.transfer-details.body.min-max-amount.max-amount",`Max. ${i.metadata.max_amount} ${p}`.trim(),{amount:i.metadata.max_amount,assetCode:p}):null].filter(R=>!!R).join(" / ")})}),Qs=e=>e.filter(i=>i!==""),ei=o.memo(function(i){const{t:m}=G();if(!i.metadata)return null;const p=Qs([typeof i.metadata.fee_fixed=="number"?`${i.metadata.fee_fixed} ${i.asset&&i.asset.getCode()}`:"",typeof i.metadata.fee_percent=="number"?`${i.metadata.fee_percent}%`:""]).join(" + ")||"unknown";return o.createElement(We,{helperText:m("transfer-service.transfer-details.body.fee.helper-text",`As charged by ${i.domain}`,{domain:i.domain}),inputProps:{style:{color:Vn.palette.text.secondary}},label:i.type==="deposit"?m("transfer-service.transfer-details.body.fee.label.deposit"):m("transfer-service.transfer-details.body.fee.label.withdrawal"),style:{marginTop:24},value:i.metadata.fee_fixed===0&&i.metadata.fee_percent===0?`${i.metadata.fee_fixed} ${i.asset&&i.asset.getCode()}`:p})});function ti(e){var Se;const{account:i,actions:m}=e.type==="deposit"?o.useContext(Be):o.useContext(Ue),p=$n(i.publicKey,i.testnet),R=Wn(p.balances,e.state.asset),w=R?he(R.balance):he(0),C=o.useMemo(()=>ot(),[]),[E,S]=it({throwOnError:!0}),{t:x}=G(),A=e.assetTransferInfos.find(K=>K.asset.equals(e.state.asset)),g=Kn(e.state.transferServer.domain),[d,h]=o.useState(e.state.formValues||{}),y=(K,ne)=>h(Q=>({...Q,[K]:ne})),s=o.useCallback(K=>{K.preventDefault(),S(m.submitTransferFieldValues({...e.state,formValues:{...e.state.formValues,...Xs(d,e.state.method),account:i.accountID}}).catch(ne=>{var Q;(Q=ne.message)!=null&&Q.includes("Cannot fetch web auth challenge")?Re(ae("FetchWebAuthChallengeError","Cannot fetch web auth challenge")):Re(ne)}))},[i.accountID,m,d,S,e.state]),c=e.type==="deposit"?A&&A.deposit?A.deposit:null:A&&A.withdraw&&A.withdraw.types?A.withdraw.types[e.state.method]:null,f=!!(g&&g.TRANSFER_SERVER_SEP0024),u=c&&c.fields&&!f?c.fields:{},D=["account","asset_code","type"],_=u.email||u.email_address,j=Object.keys(u).filter(K=>u[K]&&typeof u[K]=="object").some(K=>!u[K].optional&&!d[K]&&D.indexOf(K)===-1),O=u.amount?u.amount.optional:!0,F=_?_.optional:!0,P=(O||xt(d.amount))&&/^([0-9]+(\.[0-9]+)?)?$/.test(d.amount||""),$=e.type==="deposit"||!A||!((Se=A.withdraw)!=null&&Se.min_amount)||he(A.withdraw.min_amount).lte(w),se=(F===!0||xt(d.email)||xt(d.email_address))&&/^([^@]+@[^@]+\.[^@]+)?$/.test(d.email||d.email_address||""),qe=j||!P||!se||!$;return o.createElement("form",{id:C,noValidate:!0,onSubmit:s},o.createElement(oe,null,o.createElement(Ke,null,u.dest?o.createElement(Dt,{name:x("transfer-service.transfer-details.body.destination.name"),descriptor:u.dest||{},onChange:K=>y("dest",K.target.value),style:{marginTop:24},value:d.dest||""}):null,u.dest_extra?o.createElement(Dt,{name:u.dest_extra.description?It(u.dest_extra.description):x("transfer-service.transfer-details.body.dest_extra.name"),descriptor:u.dest_extra,onChange:K=>y("dest_extra",K.target.value),style:{marginTop:24},value:d.dest_extra||""}):null),o.createElement(Hs,{fields:Ys(u,(K,ne)=>[...D,"amount","dest","dest_extra"].indexOf(ne)===-1),fieldStyle:{marginTop:24},formValues:d,onSetFormValue:y}),o.createElement(Ke,null,o.createElement(Zs,{asset:e.state.asset,metadata:A&&A.withdraw}),!$&&o.createElement(fe,{color:"error",variant:"caption"},x("transfer-service.transfer-details.body.min-max-amount.not-enough-funds")),o.createElement(ei,{asset:e.state.asset,domain:A?A.transferServer.domain:"",metadata:A&&(e.type==="deposit"?A.deposit:A.withdraw),type:e.type})),o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{disabled:qe,form:C,loading:E&&E.type==="pending",onClick:()=>{},type:"submit"},x("transfer-service.transfer-details.action.proceed"))))))}const ni=e=>{const{t:i}=G();return e.type==="deposit"?o.createElement(ye,{headline:i("transfer-service.transfer-details.sidebar.deposit.headline")},o.createElement(Y,null,i("transfer-service.transfer-details.sidebar.deposit.info.1")),o.createElement(Y,null,i("transfer-service.transfer-details.sidebar.deposit.info.2"))):o.createElement(ye,{headline:i("transfer-service.transfer-details.sidebar.withdrawal.headline")},o.createElement(Y,null,i("transfer-service.transfer-details.sidebar.withdrawal.info.1")),o.createElement(Y,null,i("transfer-service.transfer-details.sidebar.withdrawal.info.2")))},sr=Object.assign(o.memo(ti),{Sidebar:ni}),ri=Bn({select:{fontSize:18,fontWeight:400}});function ai(e){const{account:i,actions:m}=e.type==="deposit"?o.useContext(Be):o.useContext(Ue),p=o.useMemo(()=>ot(),[]),R=ri(),w=Fa(),[C,E]=it({throwOnError:!0}),{t:S}=G(),x=F=>F?e.assetTransferInfos.find(P=>P.asset.equals(F)):void 0,A=F=>{const P=x(F);return P&&P.withdraw&&P.withdraw.types?Object.keys(P.withdraw.types):[]},g=e.state.asset||(e.type==="deposit"?de.Asset.native():e.transferableAssets[0])||null,d=e.state.method||(A(g).length===1?A(g)[0]:null),[h,y]=o.useState({asset:g,methodID:d}),s=F=>P=>{y($=>({...$,[F]:P.target.value}))},c=h.asset?A(h.asset):[],f=e.type==="withdrawal"&&c.length>0,u=!h.asset||!h.methodID&&f,D=e.trustedAssets.filter(F=>!e.transferableAssets.some(P=>P.equals(F))),_=x(h.asset),j=o.useCallback(F=>{const P=e.assetTransferInfos.find(se=>se.asset.equals(F)),$=P&&(e.type==="deposit"?P.deposit:P.withdraw);$&&"types"in $&&$.types&&Object.keys($.types).length===1?y({asset:F,methodID:Object.keys($.types)[0]}):y(se=>({...se,asset:F}))},[e.assetTransferInfos,e.type]),O=o.useCallback(F=>{if(F.preventDefault(),e.type==="deposit"&&h.asset&&h.asset.isNative())return m.selectXLMDeposit();if(!h.asset)return Re(ae("InvariantViolationError","Invariant violation: Form submission without selected asset",{message:"Form submission without selected asset"}));if(!_)return Re(ae("InvariantViolationError","Invariant violation: Form submission without asset transfer information",{message:" Form submission without asset transfer information"}));E(m.submitTransferSelection(_.transferServer,h.asset,h.methodID))},[m,_,h.asset,h.methodID,E,e.type]);return o.createElement("form",{id:p,noValidate:!0,onSubmit:O},o.createElement(Ke,null,o.createElement(Ma,{assets:e.trustedAssets,disabledAssets:D,label:w?S("transfer-service.initial.body.asset-selector.label.short"):e.type==="deposit"?S("transfer-service.initial.body.asset-selector.label.deposit"):S("transfer-service.initial.body.asset-selector.label.withdrawal"),margin:"normal",onChange:j,showXLM:e.type==="deposit",testnet:i.testnet,value:h.asset||void 0,accountId:i.accountID},e.transferableAssets.length===0?o.createElement(at,{disabled:!0,value:""},S("transfer-service.initial.body.asset-selector.no-assets")):null),o.createElement($a,{in:f},o.createElement(Ct,{fullWidth:!0,label:e.type==="deposit"?S("transfer-service.initial.body.method-selector.label.deposit"):S("transfer-service.initial.body.method-selector.label.withdrawal"),margin:"normal",onChange:s("methodID"),select:!0,SelectProps:{classes:{select:R.select}},value:h.methodID||""},o.createElement(at,{disabled:!0,value:""},h.asset?S("transfer-service.initial.body.method-selector.info-item.asset"):S("transfer-service.initial.body.method-selector.info-item.no-asset")),c.map(F=>o.createElement(at,{key:F,value:F},kt(F)))))),o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{disabled:u,form:p,loading:C.type==="pending",onClick:()=>{},type:"submit"},S("transfer-service.initial.action.proceed")))))}const si=e=>{const{t:i}=G();return e.type==="deposit"?o.createElement(ye,{headline:i("transfer-service.initial.sidebar.deposit.headline")},o.createElement(Y,null,i("transfer-service.initial.sidebar.deposit.info.1")),o.createElement(Y,null,i("transfer-service.initial.sidebar.deposit.info.2"))):o.createElement(ye,{headline:i("transfer-service.initial.sidebar.withdrawal.headline")},o.createElement(Y,null,i("transfer-service.initial.sidebar.withdrawal.info.1")),o.createElement(Y,null,i("transfer-service.initial.sidebar.withdrawal.info.2")))},ir=Object.assign(o.memo(ai),{Sidebar:si});function ii(e){const{transferServer:i}=e.state.withdrawal,{t:m}=G();return o.createElement(oe,{grow:!0},o.createElement(oe,{alignItems:"center",margin:"24px 0",textAlign:"center"},o.createElement(fe,{variant:"h5"},m("transfer-service.withdrawal-success.body.withdrawal-in-progress")),o.createElement(fe,{style:{margin:"16px 0"},variant:"body2"},o.createElement(fe,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.withdrawal-success.body.info.1",`${i.domain} is conducting the withdrawal.`,{domain:i.domain})),o.createElement(fe,{style:{margin:"8px 0"},variant:"body2"},m("transfer-service.withdrawal-success.body.info.2"))),o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{onClick:e.onClose,type:"primary"},m("transfer-service.withdrawal-success.action.close"))))))}const oi=()=>{const{t:e}=G();return o.createElement(ye,{headline:e("transfer-service.withdrawal-success.sidebar.headline")},o.createElement(Y,null,e("transfer-service.withdrawal-success.sidebar.info")))},or=Object.assign(o.memo(ii),{Sidebar:oi}),Nn=e=>e==null;function ci(e){var K;const{sendTransaction:i}=e,{account:m,actions:p}=e.type==="deposit"?o.useContext(Be):o.useContext(Ue),{asset:R}=e.state.deposit||e.state.withdrawal,{t:w}=G(),C=o.useMemo(()=>ot(),[]),E=$n(m.accountID,m.testnet),S=e.state.transfer?e.state.transfer.amount_in:"",[x,A]=o.useState(S||""),[g,d]=it({throwOnError:!0}),h=Wn(E.balances,R),y=h?he(h.balance):he(0),s=e.state.response.data,c=s.min_amount?he(s.min_amount):void 0,f=s.max_amount?he(s.max_amount):void 0,u=x.match(/^[0-9]+(\.[0-9]+)?$/)?he(x):he(0),D=s.eta?Ot(s.eta):w("transfer-service.transaction-details.body.eta.not-available"),_=c&&u.lt(c)||f&&u.gt(f),j=e.type==="withdrawal"?!u.gt(0)||u.gt(y)||_:!1,O=Kn((K=e.state.withdrawal)==null?void 0:K.transferServer.domain),F=!!(O&&O.TRANSFER_SERVER_SEP0024),P=he(s.fee_fixed||0).add(he(s.fee_percent||0).div(100).mul(u)),$=P.round(2).eq(P)?2:void 0,se=Nn(s.fee_fixed)&&Nn(s.fee_percent),qe=o.useCallback(ne=>{ne.preventDefault(),e.type==="deposit"?p.afterSuccessfulExecution(u):d((async()=>{try{const Q=await p.prepareWithdrawalTransaction(e.state.withdrawal,e.state.response,u);await i(Q),p.afterSuccessfulExecution(u)}catch(Q){Re(Q)}})())},[p,u,d,e.state,e.type,i]),Se=s.extra_info&&typeof s.extra_info=="string"?{message:s.extra_info}:s.extra_info||{};return o.createElement("form",{id:C,noValidate:!0,onSubmit:qe},o.createElement(Ke,{wrap:!0},e.type==="deposit"&&e.state.response.data.how?o.createElement(We,{label:w("transfer-service.transaction-details.body.deposit-instructions.label"),multiline:!0,value:e.state.response.data.how}):null,e.type==="deposit"?null:o.createElement(_t,{assetCode:R.getCode(),disabled:F||c&&c.gt(y),error:u.gt(y)||c&&c.gt(y),label:w("transfer-service.transaction-details.body.amount.label.withdrawal"),helperText:u.gt(y)&&w("transfer-service.transaction-details.body.amount.error.amount-greater-than-balance"),margin:"normal",onChange:ne=>A(ne.target.value),placeholder:Ms(y,c,f),style:{marginTop:24},value:x}),o.createElement(_t,{assetCode:R.getCode(),disabled:!0,label:w("transfer-service.transaction-details.body.fees.label"),margin:"normal",readOnly:!0,style:{marginTop:24},value:se?w("transfer-service.transaction-details.body.fees.value.unknown"):`- ${Fe(P,{maximumDecimals:$})}`}),o.createElement(_t,{assetCode:R.getCode(),disabled:!0,label:w("transfer-service.transaction-details.body.amount-to-receive.label"),readOnly:!0,style:{marginTop:24},value:u.minus(P).lte(0)?"-":Fe(u.minus(P))}),o.createElement(We,{label:w("transfer-service.transaction-details.body.eta.label"),style:{marginTop:24},value:D}),Object.keys(Se).map((ne,Q)=>o.createElement(We,{key:Q,label:Object.keys(Se).length===1?w("transfer-service.transaction-details.body.information.label"):It(ne),style:{marginTop:24},value:Se[ne]})),o.createElement(je,{desktop:"inline",target:e.dialogActionsRef&&e.dialogActionsRef.element},o.createElement(Ie,null,o.createElement(Ne,{disabled:j,form:C,icon:e.type==="deposit"?null:o.createElement(Wa,null),loading:g.type==="pending",onClick:()=>{},type:"submit"},e.type==="deposit"?w("transfer-service.transaction-details.action.done"):w("transfer-service.transaction-details.action.withdraw"))))))}const li=e=>{const{t:i}=G();return e.type==="deposit"?o.createElement(ye,{headline:i("transfer-service.transaction-details.sidebar.deposit.headline")},o.createElement(Y,null,i("transfer-service.transaction-details.sidebar.deposit.info.1")),o.createElement(Y,null,i("transfer-service.transaction-details.sidebar.deposit.info.2"))):o.createElement(ye,{headline:i("transfer-service.transaction-details.sidebar.withdrawal.headline")},o.createElement(Y,null,i("transfer-service.transaction-details.sidebar.withdrawal.info.1")),o.createElement(Y,null,i("transfer-service.transaction-details.sidebar.withdrawal.info.2")))},cr=Object.assign(o.memo(ci),{Sidebar:li}),ui=o.memo(function(i){const{assetTransferInfos:m,state:p,trustedAssets:R,transferableAssets:w}=i;if(p.step==="initial")return o.createElement(ir,{assetTransferInfos:m,dialogActionsRef:i.dialogActionsRef,state:p,trustedAssets:R,type:i.type,transferableAssets:w});if(p.step==="enter-values")return o.createElement(sr,{active:i.active||!1,assetTransferInfos:m,dialogActionsRef:i.dialogActionsRef,state:p,type:i.type});if(p.step==="xlm-deposit")return o.createElement(Qn,{onCloseDialog:i.onClose});if(p.step==="auth-pending")return o.createElement(er,{account:i.account,assetTransferInfos:m,authChallenge:"authChallenge"in p?p.authChallenge:null,dialogActionsRef:i.dialogActionsRef,state:p,type:i.type});if(p.step==="kyc-pending")return o.createElement(ar,{dialogActionsRef:i.dialogActionsRef,state:p,type:i.type});if(p.step==="kyc-denied")return o.createElement(tr,{state:p});if(p.step==="enter-tx-details")return o.createElement(cr,{dialogActionsRef:i.dialogActionsRef,sendTransaction:i.sendTransaction,state:p,type:i.type});if(p.step==="completed")return i.type==="deposit"?o.createElement(Zn,{dialogActionsRef:i.dialogActionsRef,onClose:i.onClose,state:p}):o.createElement(or,{dialogActionsRef:i.dialogActionsRef,onClose:i.onClose,state:p});throw ae("UnexpectedStateError",`Encountered unexpected state: ${p.step}`,{state:p.step})}),At=o.memo(function(i){const{state:m,type:p}=i;if(m.step==="initial")return o.createElement(ir.Sidebar,{type:p});if(m.step==="enter-values")return o.createElement(sr.Sidebar,{type:p});if(m.step==="xlm-deposit")return o.createElement(Qn.Sidebar,null);if(m.step==="auth-pending")return o.createElement(er.Sidebar,null);if(m.step==="kyc-pending")return o.createElement(ar.Sidebar,null);if(m.step==="kyc-denied")return o.createElement(tr.Sidebar,null);if(m.step==="enter-tx-details")return o.createElement(cr.Sidebar,{type:p});if(m.step==="completed")return p==="deposit"?o.createElement(Zn.Sidebar,null):o.createElement(or.Sidebar,null);throw ae("UnexpectedStateError",`Encountered unexpected state: ${m.step}`,{state:m.step})}),fi={minWidth:150};function di(e,i){return e.reduce((m,p)=>[...m,...i(p)],[])}const mi=Va(ui,o.createElement(Mn,null));function hi(e){const i=Ia(),m=qn(),{actions:p,nextState:R,prevStates:w,state:C}=e.type==="deposit"?Es(e.account,e.onClose):Ts(e.account,e.onClose),E=w.length>0?w[w.length-1]:void 0,S=o.useMemo(()=>Na(e.accountData.balances)||[de.Asset.native()],[e.accountData.balances]),x={},A=ss(S,e.account.testnet,x),g=o.useMemo(()=>di(A,s=>s?s.assets:[]),[A]),d=o.useMemo(()=>g.filter(s=>e.type==="deposit"?s.deposit&&s.deposit.enabled:s.withdraw&&s.withdraw.enabled).map(s=>s.asset).filter(s=>S.some(c=>c.equals(s))).concat(e.type==="deposit"?[de.Asset.native()]:[]),[g,e.type,S]),h={...e,assetTransferInfos:g,transferableAssets:d,trustedAssets:S},y=e.type==="deposit"?Rs:Fs;return o.createElement(y,{account:e.account,actions:p,state:C},o.createElement(Ha,{account:e.account,dialogActionsRef:i,onNavigateBack:p.navigateBack,type:e.type},o.createElement(Cs,null,d.length===0?o.createElement(As,{account:e.account,actionsRef:i,margin:"32px 0 0"}):o.createElement(Ka,{current:w.length},[...w,C,R].filter(s=>!!s).map((s,c)=>o.createElement(mi,{key:c,...h,active:s===C,dialogActionsRef:s===C?i:void 0,state:s}))),o.createElement(ls,{current:o.createElement(At,{state:C,type:e.type}),index:w.length,next:R?o.createElement(At,{state:R,type:e.type}):null,prev:E?o.createElement(At,{state:E,type:e.type}):null,size:w.length+2,style:m?void 0:fi}))))}const Si=o.memo(hi);export{Si as default};
//# sourceMappingURL=TransferDialog-3oyMRieF.js.map
