import{c4 as xe,c5 as se,r as W,f as Me,R as n,a6 as p,Z as q,aw as De,bb as Re,$ as O,L as G,aR as J,ay as k,aj as D,aT as Be,aG as ke,af as Oe,b3 as Y,ab as j,ae as H,a0 as _e,a1 as ie,a2 as fe,av as P,am as ze,bd as Se,bB as V,c6 as ye,bP as ve,al as K,a$ as be,b1 as Pe,aM as Ne,c7 as oe,Y as We,aE as Fe,a9 as Ue,o as Ge,b0 as Ve,bg as Ke,aq as $e,bi as Je}from"./app-CStNF4WA.js";import{e as He,f as le,B as Ze,A as Ce,j as Xe,V as Qe,T as qe,u as Ye,k as je,l as F,c as et,m as tt,s as nt,n as ce,p as at,q as Z,E as st,r as it}from"./app-stage2-Bd4j2d9E.js";import{V as ot}from"./VisibilityIconButton-p4_Y8eti.js";var re=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function lt(t,e){return!!(t===e||re(t)&&re(e))}function ct(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!lt(t[i],e[i]))return!1;return!0}function X(t,e){e===void 0&&(e=ct);var i,s=[],c,g=!1;function f(){for(var m=[],r=0;r<arguments.length;r++)m[r]=arguments[r];return g&&i===this&&e(m,s)||(c=t.apply(this,m),g=!0,i=this,s=m),c}return f}var rt=typeof performance=="object"&&typeof performance.now=="function",ue=rt?function(){return performance.now()}:function(){return Date.now()};function de(t){cancelAnimationFrame(t.id)}function ut(t,e){var i=ue();function s(){ue()-i>=e?t.call(null):c.id=requestAnimationFrame(s)}var c={id:requestAnimationFrame(s)};return c}var Q=-1;function me(t){if(t===void 0&&(t=!1),Q===-1||t){var e=document.createElement("div"),i=e.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}var B=null;function he(t){if(t===void 0&&(t=!1),B===null||t){var e=document.createElement("div"),i=e.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var s=document.createElement("div"),c=s.style;return c.width="100px",c.height="100px",e.appendChild(s),document.body.appendChild(e),e.scrollLeft>0?B="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?B="negative":B="positive-ascending"),document.body.removeChild(e),B}return B}var dt=150,mt=function(e,i){return e};function ht(t){var e,i=t.getItemOffset,s=t.getEstimatedTotalSize,c=t.getItemSize,g=t.getOffsetForIndexAndAlignment,f=t.getStartIndexForOffset,m=t.getStopIndexForStartIndex,r=t.initInstanceProps,A=t.shouldResetStyleCacheOnItemSizeChange,w=t.validateProps;return e=function(E){xe(L,E);function L(C){var a;return a=E.call(this,C)||this,a._instanceProps=r(a.props,se(a)),a._outerRef=void 0,a._resetIsScrollingTimeoutId=null,a.state={instance:se(a),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof a.props.initialScrollOffset=="number"?a.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},a._callOnItemsRendered=void 0,a._callOnItemsRendered=X(function(o,l,u,h){return a.props.onItemsRendered({overscanStartIndex:o,overscanStopIndex:l,visibleStartIndex:u,visibleStopIndex:h})}),a._callOnScroll=void 0,a._callOnScroll=X(function(o,l,u){return a.props.onScroll({scrollDirection:o,scrollOffset:l,scrollUpdateWasRequested:u})}),a._getItemStyle=void 0,a._getItemStyle=function(o){var l=a.props,u=l.direction,h=l.itemSize,b=l.layout,d=a._getItemStyleCache(A&&h,A&&b,A&&u),S;if(d.hasOwnProperty(o))S=d[o];else{var I=i(a.props,o,a._instanceProps),x=c(a.props,o,a._instanceProps),M=u==="horizontal"||b==="horizontal",y=u==="rtl",v=M?I:0;d[o]=S={position:"absolute",left:y?void 0:v,right:y?v:void 0,top:M?0:I,height:M?"100%":x,width:M?x:"100%"}}return S},a._getItemStyleCache=void 0,a._getItemStyleCache=X(function(o,l,u){return{}}),a._onScrollHorizontal=function(o){var l=o.currentTarget,u=l.clientWidth,h=l.scrollLeft,b=l.scrollWidth;a.setState(function(d){if(d.scrollOffset===h)return null;var S=a.props.direction,I=h;if(S==="rtl")switch(he()){case"negative":I=-h;break;case"positive-descending":I=b-u-h;break}return I=Math.max(0,Math.min(I,b-u)),{isScrolling:!0,scrollDirection:d.scrollOffset<I?"forward":"backward",scrollOffset:I,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._onScrollVertical=function(o){var l=o.currentTarget,u=l.clientHeight,h=l.scrollHeight,b=l.scrollTop;a.setState(function(d){if(d.scrollOffset===b)return null;var S=Math.max(0,Math.min(b,h-u));return{isScrolling:!0,scrollDirection:d.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._outerRefSetter=function(o){var l=a.props.outerRef;a._outerRef=o,typeof l=="function"?l(o):l!=null&&typeof l=="object"&&l.hasOwnProperty("current")&&(l.current=o)},a._resetIsScrollingDebounced=function(){a._resetIsScrollingTimeoutId!==null&&de(a._resetIsScrollingTimeoutId),a._resetIsScrollingTimeoutId=ut(a._resetIsScrolling,dt)},a._resetIsScrolling=function(){a._resetIsScrollingTimeoutId=null,a.setState({isScrolling:!1},function(){a._getItemStyleCache(-1,null)})},a}L.getDerivedStateFromProps=function(a,o){return gt(a,o),w(a),null};var T=L.prototype;return T.scrollTo=function(a){a=Math.max(0,a),this.setState(function(o){return o.scrollOffset===a?null:{scrollDirection:o.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},T.scrollToItem=function(a,o){o===void 0&&(o="auto");var l=this.props,u=l.itemCount,h=l.layout,b=this.state.scrollOffset;a=Math.max(0,Math.min(a,u-1));var d=0;if(this._outerRef){var S=this._outerRef;h==="vertical"?d=S.scrollWidth>S.clientWidth?me():0:d=S.scrollHeight>S.clientHeight?me():0}this.scrollTo(g(this.props,a,o,b,this._instanceProps,d))},T.componentDidMount=function(){var a=this.props,o=a.direction,l=a.initialScrollOffset,u=a.layout;if(typeof l=="number"&&this._outerRef!=null){var h=this._outerRef;o==="horizontal"||u==="horizontal"?h.scrollLeft=l:h.scrollTop=l}this._callPropsCallbacks()},T.componentDidUpdate=function(){var a=this.props,o=a.direction,l=a.layout,u=this.state,h=u.scrollOffset,b=u.scrollUpdateWasRequested;if(b&&this._outerRef!=null){var d=this._outerRef;if(o==="horizontal"||l==="horizontal")if(o==="rtl")switch(he()){case"negative":d.scrollLeft=-h;break;case"positive-ascending":d.scrollLeft=h;break;default:var S=d.clientWidth,I=d.scrollWidth;d.scrollLeft=I-S-h;break}else d.scrollLeft=h;else d.scrollTop=h}this._callPropsCallbacks()},T.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&de(this._resetIsScrollingTimeoutId)},T.render=function(){var a=this.props,o=a.children,l=a.className,u=a.direction,h=a.height,b=a.innerRef,d=a.innerElementType,S=a.innerTagName,I=a.itemCount,x=a.itemData,M=a.itemKey,y=M===void 0?mt:M,v=a.layout,R=a.outerElementType,_=a.outerTagName,Ae=a.style,Te=a.useIsScrolling,Ee=a.width,ee=this.state.isScrolling,$=u==="horizontal"||v==="horizontal",pe=$?this._onScrollHorizontal:this._onScrollVertical,te=this._getRangeToRender(),we=te[0],Le=te[1],ne=[];if(I>0)for(var z=we;z<=Le;z++)ne.push(W.createElement(o,{data:x,key:y(z,x),index:z,isScrolling:Te?ee:void 0,style:this._getItemStyle(z)}));var ae=s(this.props,this._instanceProps);return W.createElement(R||_||"div",{className:l,onScroll:pe,ref:this._outerRefSetter,style:Me({position:"relative",height:h,width:Ee,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:u},Ae)},W.createElement(d||S||"div",{children:ne,ref:b,style:{height:$?"100%":ae,pointerEvents:ee?"none":void 0,width:$?ae:"100%"}}))},T._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var a=this.props.itemCount;if(a>0){var o=this._getRangeToRender(),l=o[0],u=o[1],h=o[2],b=o[3];this._callOnItemsRendered(l,u,h,b)}}if(typeof this.props.onScroll=="function"){var d=this.state,S=d.scrollDirection,I=d.scrollOffset,x=d.scrollUpdateWasRequested;this._callOnScroll(S,I,x)}},T._getRangeToRender=function(){var a=this.props,o=a.itemCount,l=a.overscanCount,u=this.state,h=u.isScrolling,b=u.scrollDirection,d=u.scrollOffset;if(o===0)return[0,0,0,0];var S=f(this.props,d,this._instanceProps),I=m(this.props,S,d,this._instanceProps),x=!h||b==="backward"?Math.max(1,l):1,M=!h||b==="forward"?Math.max(1,l):1;return[Math.max(0,S-x),Math.max(0,Math.min(o-1,I+M)),S,I]},L}(W.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var gt=function(e,i){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,i.instance},ft=ht({getItemOffset:function(e,i){var s=e.itemSize;return i*s},getItemSize:function(e,i){var s=e.itemSize;return s},getEstimatedTotalSize:function(e){var i=e.itemCount,s=e.itemSize;return s*i},getOffsetForIndexAndAlignment:function(e,i,s,c,g,f){var m=e.direction,r=e.height,A=e.itemCount,w=e.itemSize,E=e.layout,L=e.width,T=m==="horizontal"||E==="horizontal",C=T?L:r,a=Math.max(0,A*w-C),o=Math.min(a,i*w),l=Math.max(0,i*w-C+w+f);switch(s==="smart"&&(c>=l-C&&c<=o+C?s="auto":s="center"),s){case"start":return o;case"end":return l;case"center":{var u=Math.round(l+(o-l)/2);return u<Math.ceil(C/2)?0:u>a+Math.floor(C/2)?a:u}case"auto":default:return c>=l&&c<=o?c:c<l?l:o}},getStartIndexForOffset:function(e,i){var s=e.itemCount,c=e.itemSize;return Math.max(0,Math.min(s-1,Math.floor(i/c)))},getStopIndexForStartIndex:function(e,i,s){var c=e.direction,g=e.height,f=e.itemCount,m=e.itemSize,r=e.layout,A=e.width,w=c==="horizontal"||r==="horizontal",E=i*m,L=w?A:g,T=Math.ceil((L+s-E)/m);return Math.max(0,Math.min(f-1,i+T-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function St(t){if(!t.container)return null;const e=t.container.clientHeight,i=t.container.clientWidth;return n.createElement(ft,{height:e,itemCount:t.itemCount,itemSize:t.itemSize,width:i},t.children)}const yt=[new p.Asset("EURMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new p.Asset("MTLAP","GCNVDZIHGX473FEI7IXCUAEXUJ4BGCKEMHF36VYP5EMS7PX2QBLAMTLA"),new p.Asset("MTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new p.Asset("MTLRECT","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new p.Asset("BTCMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new p.Asset("SATSMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new p.Asset("USDM","GDHDC4GBNPMENZAOBB4NCQ25TGZPDRK6ZGWUGSI22TVFATOLRPSUUSDM"),new p.Asset("USDC","GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN")],vt=[new p.Asset("USD","GCKFBEIYV2U22IO2BJ4KVJOIP7XPWQGQFKKWXR6DOSJBV7STMAQSMTGG"),new p.Asset("SRT","GCDNJUBQSX7AJWLJACMJ7I4BC3Z47BQUTMHEICZLE6MU4KQBRYG5JY6B")],bt=q({clickable:{},icon:{[D.down(350)]:{minWidth:48}},logo:{[D.down(350)]:{width:36,height:36}},logoHidden:{visibility:"hidden"},badge:{top:4,right:4,boxShadow:"0 0 3px 1px black"},mainListItemText:{flex:"1 1 auto",whiteSpace:"nowrap"},mainListItemTextPrimaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:15},[D.down(350)]:{fontSize:13}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:14},[D.down(350)]:{fontSize:12}},balanceListItemText:{flex:"1 0 auto",marginLeft:8,textAlign:"right"},balanceText:{fontSize:"140%",[D.down(350)]:{fontSize:"120%"}},actions:{flex:"0 0 auto",marginLeft:4,marginRight:-16,width:48},visibilityIcon:{color:"rgba(0, 0, 0, 0.54)","&.favorite":{color:"#FFD700"},"&.hidden":{color:"rgba(0, 0, 0, 0.38)"}},visibilityIconContainer:{marginRight:8,display:"flex",alignItems:"center"}});function Ct(t){const e=bt(),i=`${t.className||""} ${t.onClick?e.clickable:""}`,s=n.useMemo(()=>De(t.balance),[t.balance]),c=Re(s,t.testnet),{t:g}=O(),f=n.useMemo(()=>t.hideBalance?null:n.createElement(He,{assetCode:"",balance:t.balance.balance,showInfinity:t.isOwnAsset}),[t.balance.balance,t.hideBalance]);if(t.balance.asset_type==="native")return n.createElement(G,{button:!!t.onClick,className:i,onClick:t.onClick,style:t.style},n.createElement(J,{className:e.icon},n.createElement(le,{asset:s,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,testnet:t.testnet})),n.createElement(k,{classes:{root:e.mainListItemText,primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:t.spendableBalance?g("account.balance-details.item.spendable-balance.primary"):"Stellar Lumens (XLM)",secondary:t.spendableBalance?void 0:"stellar.org"}),n.createElement(k,{classes:{root:e.balanceListItemText,primary:e.balanceText},primary:f}));const m=c&&c.name||t.balance.asset_code,r=m!==t.balance.asset_code?`${m} (${t.balance.asset_code})`:t.balance.asset_code;return n.createElement(G,{button:!!t.onClick,className:i,onClick:t.onClick,style:t.style},t.isEditMode&&t.accountId&&n.createElement(J,{className:e.icon,style:{minWidth:"30px",marginRight:"8px"}},n.createElement(ot,{accountId:t.accountId,asset:s})),n.createElement(J,{className:e.icon},n.createElement(Ze,{badgeContent:t.badgeCount,classes:{badge:e.badge},color:"primary"},n.createElement(le,{asset:s,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,dark:!0,testnet:t.testnet}))),n.createElement(k,{className:e.mainListItemText,classes:{primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:r,secondary:n.createElement(Ce,{publicKey:t.balance.asset_issuer,testnet:t.testnet})}),n.createElement(k,{className:e.balanceListItemText,primary:f,primaryTypographyProps:{className:e.balanceText}}))}const N=n.memo(Ct);function It(t){const[e,i]=n.useState(""),[s,c]=n.useState(""),[g,f]=n.useState(""),m=Be("(max-width:450px)"),{t:r}=O(),{openSavedAddresses:A}=n.useContext(ke),w=()=>t.createAddAssetTransaction(new p.Asset(e,s),{limit:g||void 0}),E=()=>t.sendTransaction(w),L=n.useCallback(a=>{c(a),A(null)},[A]),T=n.useCallback(()=>{A({onSelect:L})},[L,A]),C=n.useMemo(()=>n.createElement(Oe,{disableTypography:!0,position:"end"},n.createElement(Xe,{onClick:T,style:{cursor:"pointer"}})),[T]);return n.createElement(Y,{top:n.createElement(j,{hideBackButton:!0,onBack:t.onClose,title:r("account-settings.custom-trustline.title")})},n.createElement("form",{noValidate:!0,style:{display:"block",width:"100%"}},n.createElement(H,{label:r("account-settings.custom-trustline.textfield.code.label"),placeholder:"EURT, USDT, BTC, ...",autoFocus:!0,margin:"dense",name:"asset-code",value:e,onChange:a=>i(a.target.value)}),n.createElement(H,{fullWidth:!0,label:r("account-settings.custom-trustline.textfield.issuer.label"),placeholder:r("account-settings.custom-trustline.textfield.issuer.placeholder"),margin:"dense",name:"asset-issuer",value:s,onChange:a=>c(a.target.value),InputProps:{endAdornment:C}}),n.createElement(H,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal"},fullWidth:!0,label:r("account-settings.custom-trustline.textfield.limit.label"),placeholder:r("account-settings.custom-trustline.textfield.limit.placeholder"),margin:"dense",name:"trust-limit",value:g,type:"number",onChange:a=>f(a.target.value)}),n.createElement(_e,{preventMobileActionsBox:!0},n.createElement(ie,{onClick:t.onClose},r("account-settings.custom-trustline.action.cancel")),n.createElement(ie,{icon:n.createElement(Qe,null),loading:t.txCreationPending,onClick:E,type:"primary"},r(m?"account-settings.custom-trustline.action.trust.short":"account-settings.custom-trustline.action.trust.long")))))}const At=n.memo(It);function Tt(t,e){return e=e.toLowerCase(),t.code.toLowerCase().startsWith(e)||t.name.toLowerCase().startsWith(e)}function Et(t,e){return e=e.toLowerCase(),t.name.toLowerCase().startsWith(e)}function Ie(t){return{asset_code:t.getCode(),asset_issuer:t.getIssuer(),asset_type:t.getAssetType(),balance:"0",is_authorized:!0,is_authorized_to_maintain_liabilities:!0,last_modified_ledger:0,limit:"0",buying_liabilities:"0",selling_liabilities:"0",is_clawback_enabled:!1}}function pt(t,e){const i={};for(const s of t){const c=e(s),g=i[c];g?g.push(s):i[c]=[s]}return i}const wt=n.memo(function(e){return n.createElement(n.Fragment,null,e.assets.map(i=>n.createElement(N,{key:P(i),balance:Ie(i),hideBalance:!0,onClick:()=>e.onOpenAssetDetails(i),testnet:e.testnet})))}),U=73,ge=q({assetItem:{borderRadius:"0 !important",height:U},issuerItem:{background:"white",borderRadius:8,height:U},noResultItem:{background:"white",borderRadius:8,height:U}});function Lt(t,e,i){const s=[];for(const f of Object.keys(e))s.push({type:"issuer",issuer:f}),s.push(...e[f].map(m=>({type:"asset",issuer:f,record:m})));function c(f){const m=ge(),r=s[f.index],{t:A}=O();return n.createElement("div",{style:f.style},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},r.type==="issuer"?n.createElement(G,{key:r.issuer,className:m.issuerItem},n.createElement(k,{primary:r.issuer==="native"?"stellar.org":n.createElement(Ce,{publicKey:r.issuer,testnet:t.testnet}),secondary:e[r.issuer].length===1?A("account.add-asset.item.issuer.secondary.one-asset"):A("account.add-asset.item.issuer.secondary.more-than-one-asset",{amount:e[r.issuer].length}),secondaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}}})):null,r.type==="asset"?n.createElement(N,{balance:Ie(oe(r.record)),className:m.assetItem,hideBalance:!0,onClick:()=>i(oe(r.record)),style:{paddingLeft:32},testnet:t.testnet}):null))}function g(){const f=ge(),{t:m}=O();return n.createElement(G,{key:0,className:f.noResultItem},n.createElement(k,{primary:m("account.add-asset.item.no-result.primary"),secondary:m("account.add-asset.item.no-result.secondary")}))}return s.length>0?(c.count=s.length,c):(g.count=1,g)}const xt=q({grow:{flexGrow:1},list:{marginTop:16,padding:0},searchField:{background:"white",flexShrink:0,flexGrow:0,marginBottom:16},searchFieldInput:{fontSize:16,paddingTop:14,paddingBottom:14}}),Mt=n.memo(function(e){const i=e.account.testnet?vt:yt,s=xt(),c=n.useRef(null),g=Ye(e.account.testnet),f=fe(),{t:m}=O(),r=je(e.account.testnet),[A,w]=n.useState(!1),[E,L]=n.useState(""),[T,C]=n.useState(!1),a=n.useCallback(y=>f.history.push(F(e.account.id,P(y))),[f.history,e.account.id]),o=()=>w(!0),l=()=>w(!1),u=async(y,v={})=>{const R=[p.Operation.changeTrust({asset:y,limit:v.limit,withMuxing:!0})];return et(R,{accountData:e.accountData,horizon:e.horizon,walletAccount:e.account})},h=async y=>{try{C(!0);const v=await y();C(!1),await e.sendTransaction(v)}catch(v){C(!1),Ne(v)}},b=y=>e.accountData.balances.some(v=>v.asset_code===y.code&&v.asset_issuer===y.issuer),d=n.useCallback((y,v)=>{const R=v.toLowerCase(),_=r.lookup(y);return _?_.domain.toLowerCase().includes(R)||_.name.toLowerCase().includes(R):!1},[r]),S=i.filter(y=>!b(y)),I=n.useCallback(y=>{L(y.target.value)},[]),x=n.useMemo(()=>{const y=g.filter(v=>Tt(v,E)||Et(v.issuer_detail,E)||d(v.issuer,E));return pt(y,v=>v.issuer)},[g,E,d]),M=n.useMemo(()=>Lt(e.account,x,a),[e.account,x,a]);return n.createElement(Y,{excessWidth:24,top:n.createElement(j,{onBack:e.onClose,title:m("account.add-asset.title")})},n.createElement(ze,{grow:!0,margin:"16px 0 0"},n.createElement(Se,{autoFocus:!0,className:s.searchField,inputProps:{className:s.searchFieldInput},onChange:I,value:E,placeholder:m("account.add-asset.search-field.placeholder")}),n.createElement(V,{className:s.list},n.createElement(ye,{onClick:o},n.createElement(ve,null),"  ",m("account.add-asset.button.add-custom-asset.label"))),n.createElement(n.Suspense,{fallback:n.createElement(K,null)},E?n.createElement("ul",{className:`${s.list} ${s.grow}`,ref:c},n.createElement(St,{container:c.current,itemCount:M.count,itemSize:U},M)):n.createElement(V,{className:`${s.list} ${s.grow}`},n.createElement(wt,{assets:S,onOpenAssetDetails:a,testnet:e.account.testnet})))),n.createElement(be,{open:A,onClose:l,TransitionComponent:Pe},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},n.createElement(At,{account:e.account,accountData:e.accountData,createAddAssetTransaction:u,horizon:e.horizon,onClose:l,sendTransaction:h,txCreationPending:T}))))});function Dt(t){return n.createElement(qe,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:e,sendTransaction:i})=>n.createElement(Mt,{...t,horizon:e,sendTransaction:i}))}const Rt=n.memo(Dt),Bt=n.memo(function(e){const i=n.useMemo(()=>{if(!e.searchFieldValue.trim())return e.assetBalances;const s=e.searchFieldValue.toLowerCase().trim();return e.assetBalances.filter(({asset:c})=>!!c.code.toLowerCase().includes(s))},[e.assetBalances,e.searchFieldValue]);return n.createElement(n.Fragment,null,i.map(({asset:s,balance:c})=>{var m;const g=e.openOffers.filter(r=>r.buying.asset_code===s.code&&r.buying.asset_issuer===s.issuer||r.selling.asset_code===s.code&&r.selling.asset_issuer===s.issuer),f=e.olderOffersAvailable&&g.length>=10?"10+":g.length;return(m=e.assetSettings[P(s)])==null||m.visibility,n.createElement(N,{key:P(s),badgeCount:f,balance:c,onClick:()=>e.onOpenAssetDetails(s),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet,isOwnAsset:e.account.accountID===s.getIssuer(),isEditMode:e.isEditMode})}))}),kt=n.memo(function(e){return n.createElement(n.Fragment,null,n.createElement(N,{key:"XLM",balance:e.balance,onClick:()=>e.onOpenAssetDetails(p.Asset.native()),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet}),n.createElement(N,{key:"XLM:spendable",balance:{...e.balance,balance:$e(e.balance.balance).eq(0)?"0":Ke(Je(e.accountData),e.balance).toString()},hideLogo:!0,onClick:()=>e.onOpenAssetDetails(p.Asset.native()),spendableBalance:!0,style:{marginTop:-8,paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet}))});function Ot(t){const e=We(t.account.accountID,t.account.testnet),{offers:i,olderOffersAvailable:s}=Fe(t.account.accountID,t.account.testnet),c=Ue(),g=fe(),{t:f}=O(),[m,r]=n.useState(!1),{assetSettings:A}=tt(t.account.accountID),[w,E]=n.useState([]);n.useEffect(()=>{if(m)return;const y=nt(e.balances,A).filter(v=>v.asset_type!=="native").map(v=>({asset:new p.Asset(v.asset_code,v.asset_issuer),balance:v}));E(y)},[e.balances,A,m]);const L=n.useCallback(()=>g.history.push(ce(t.account.id)),[t.account.id,g.history]),T=n.useCallback(()=>g.history.push(at(t.account.id)),[t.account.id,g.history]),C=Z(g.location.pathname,ce(t.account.id)),a=Z(g.location.pathname,F("*","*"))&&!Z(g.location.pathname,F("*","manage")),o=y=>g.history.push(F(t.account.id,P(y))),l=()=>{r(!m)},u=e.balances.find(y=>y.asset_type==="native"),h=c?0:8,b=16,d=0,[S,I]=n.useState(""),x=n.useCallback(y=>{I(y.target.value)},[]),M=p.Asset.native().code.toLowerCase().includes(S.toLocaleLowerCase());return n.createElement(Y,{excessWidth:12,top:n.createElement(j,{onBack:t.onClose,title:t.account.name,actions:n.createElement(Ge,{onClick:l,color:m?"primary":"default"},n.createElement(st,null))})},n.createElement(Se,{autoFocus:!0,onChange:x,value:S,placeholder:f("account.balance-details.search-field.placeholder")}),n.createElement(V,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px"}},n.createElement(ye,{gutterBottom:!0,onClick:L,style:{padding:`0 ${b}px`,marginLeft:d,marginRight:d}},n.createElement(ve,null),"  ",f("account.balance-details.button.add-asset.label")),n.createElement(Bt,{account:t.account,assetBalances:w,hmargin:d,hpadding:b,onOpenAssetDetails:o,openOffers:i,olderOffersAvailable:s,isEditMode:m,assetSettings:A,searchFieldValue:S})),n.createElement(it,{style:{margin:"16px 0"}}),n.createElement(V,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px 8px"}},u&&M?n.createElement(kt,{account:t.account,accountData:e,balance:u,hmargin:d,hpadding:b,onOpenAssetDetails:o}):null),n.createElement(be,{fullScreen:!0,open:C||a,onClose:T,TransitionComponent:Ve},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},n.createElement(Rt,{account:t.account,accountData:e,hpadding:h,itemHPadding:b,onClose:T}))))}const Nt=n.memo(Ot);export{Nt as default};
//# sourceMappingURL=BalanceDetailsDialog-BK-LDZ_7.js.map
