import{c0 as xe,c1 as se,r as W,f as Me,R as n,a6 as w,Z as q,av as De,b9 as Re,$ as k,H as G,ax as O,ai as D,aS as Be,b1 as Y,aa as j,ad as J,a0 as Oe,a1 as ie,a2 as fe,au as P,al as ke,bb as Se,bx as V,c2 as ye,bM as ve,ak as K,aZ as be,a$ as _e,aM as ze,c3 as oe,Y as Pe,aE as Ne,a9 as We,o as Fe,a_ as Ue,be as Ge,ap as Ve,bg as Ke}from"./app-Cy__C2ke.js";import{e as $e,L as H,f as le,B as Je,A as Ie,V as He,T as Ze,u as Xe,j as Qe,k as F,c as qe,l as Ye,s as je,m as ce,n as et,p as Z,E as tt,q as nt}from"./app-stage2-D86-9mwG.js";import{V as at}from"./VisibilityIconButton-CHcr07Rk.js";var re=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function st(t,e){return!!(t===e||re(t)&&re(e))}function it(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!st(t[i],e[i]))return!1;return!0}function X(t,e){e===void 0&&(e=it);var i,s=[],c,g=!1;function f(){for(var m=[],r=0;r<arguments.length;r++)m[r]=arguments[r];return g&&i===this&&e(m,s)||(c=t.apply(this,m),g=!0,i=this,s=m),c}return f}var ot=typeof performance=="object"&&typeof performance.now=="function",ue=ot?function(){return performance.now()}:function(){return Date.now()};function de(t){cancelAnimationFrame(t.id)}function lt(t,e){var i=ue();function s(){ue()-i>=e?t.call(null):c.id=requestAnimationFrame(s)}var c={id:requestAnimationFrame(s)};return c}var Q=-1;function me(t){if(t===void 0&&(t=!1),Q===-1||t){var e=document.createElement("div"),i=e.style;i.width="50px",i.height="50px",i.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}var B=null;function he(t){if(t===void 0&&(t=!1),B===null||t){var e=document.createElement("div"),i=e.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";var s=document.createElement("div"),c=s.style;return c.width="100px",c.height="100px",e.appendChild(s),document.body.appendChild(e),e.scrollLeft>0?B="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?B="negative":B="positive-ascending"),document.body.removeChild(e),B}return B}var ct=150,rt=function(e,i){return e};function ut(t){var e,i=t.getItemOffset,s=t.getEstimatedTotalSize,c=t.getItemSize,g=t.getOffsetForIndexAndAlignment,f=t.getStartIndexForOffset,m=t.getStopIndexForStartIndex,r=t.initInstanceProps,A=t.shouldResetStyleCacheOnItemSizeChange,p=t.validateProps;return e=function(T){xe(M,T);function M(I){var a;return a=T.call(this,I)||this,a._instanceProps=r(a.props,se(a)),a._outerRef=void 0,a._resetIsScrollingTimeoutId=null,a.state={instance:se(a),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof a.props.initialScrollOffset=="number"?a.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},a._callOnItemsRendered=void 0,a._callOnItemsRendered=X(function(o,l,u,h){return a.props.onItemsRendered({overscanStartIndex:o,overscanStopIndex:l,visibleStartIndex:u,visibleStopIndex:h})}),a._callOnScroll=void 0,a._callOnScroll=X(function(o,l,u){return a.props.onScroll({scrollDirection:o,scrollOffset:l,scrollUpdateWasRequested:u})}),a._getItemStyle=void 0,a._getItemStyle=function(o){var l=a.props,u=l.direction,h=l.itemSize,b=l.layout,d=a._getItemStyleCache(A&&h,A&&b,A&&u),S;if(d.hasOwnProperty(o))S=d[o];else{var C=i(a.props,o,a._instanceProps),L=c(a.props,o,a._instanceProps),x=u==="horizontal"||b==="horizontal",y=u==="rtl",v=x?C:0;d[o]=S={position:"absolute",left:y?void 0:v,right:y?v:void 0,top:x?0:C,height:x?"100%":L,width:x?L:"100%"}}return S},a._getItemStyleCache=void 0,a._getItemStyleCache=X(function(o,l,u){return{}}),a._onScrollHorizontal=function(o){var l=o.currentTarget,u=l.clientWidth,h=l.scrollLeft,b=l.scrollWidth;a.setState(function(d){if(d.scrollOffset===h)return null;var S=a.props.direction,C=h;if(S==="rtl")switch(he()){case"negative":C=-h;break;case"positive-descending":C=b-u-h;break}return C=Math.max(0,Math.min(C,b-u)),{isScrolling:!0,scrollDirection:d.scrollOffset<C?"forward":"backward",scrollOffset:C,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._onScrollVertical=function(o){var l=o.currentTarget,u=l.clientHeight,h=l.scrollHeight,b=l.scrollTop;a.setState(function(d){if(d.scrollOffset===b)return null;var S=Math.max(0,Math.min(b,h-u));return{isScrolling:!0,scrollDirection:d.scrollOffset<S?"forward":"backward",scrollOffset:S,scrollUpdateWasRequested:!1}},a._resetIsScrollingDebounced)},a._outerRefSetter=function(o){var l=a.props.outerRef;a._outerRef=o,typeof l=="function"?l(o):l!=null&&typeof l=="object"&&l.hasOwnProperty("current")&&(l.current=o)},a._resetIsScrollingDebounced=function(){a._resetIsScrollingTimeoutId!==null&&de(a._resetIsScrollingTimeoutId),a._resetIsScrollingTimeoutId=lt(a._resetIsScrolling,ct)},a._resetIsScrolling=function(){a._resetIsScrollingTimeoutId=null,a.setState({isScrolling:!1},function(){a._getItemStyleCache(-1,null)})},a}M.getDerivedStateFromProps=function(a,o){return dt(a,o),p(a),null};var E=M.prototype;return E.scrollTo=function(a){a=Math.max(0,a),this.setState(function(o){return o.scrollOffset===a?null:{scrollDirection:o.scrollOffset<a?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},E.scrollToItem=function(a,o){o===void 0&&(o="auto");var l=this.props,u=l.itemCount,h=l.layout,b=this.state.scrollOffset;a=Math.max(0,Math.min(a,u-1));var d=0;if(this._outerRef){var S=this._outerRef;h==="vertical"?d=S.scrollWidth>S.clientWidth?me():0:d=S.scrollHeight>S.clientHeight?me():0}this.scrollTo(g(this.props,a,o,b,this._instanceProps,d))},E.componentDidMount=function(){var a=this.props,o=a.direction,l=a.initialScrollOffset,u=a.layout;if(typeof l=="number"&&this._outerRef!=null){var h=this._outerRef;o==="horizontal"||u==="horizontal"?h.scrollLeft=l:h.scrollTop=l}this._callPropsCallbacks()},E.componentDidUpdate=function(){var a=this.props,o=a.direction,l=a.layout,u=this.state,h=u.scrollOffset,b=u.scrollUpdateWasRequested;if(b&&this._outerRef!=null){var d=this._outerRef;if(o==="horizontal"||l==="horizontal")if(o==="rtl")switch(he()){case"negative":d.scrollLeft=-h;break;case"positive-ascending":d.scrollLeft=h;break;default:var S=d.clientWidth,C=d.scrollWidth;d.scrollLeft=C-S-h;break}else d.scrollLeft=h;else d.scrollTop=h}this._callPropsCallbacks()},E.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&de(this._resetIsScrollingTimeoutId)},E.render=function(){var a=this.props,o=a.children,l=a.className,u=a.direction,h=a.height,b=a.innerRef,d=a.innerElementType,S=a.innerTagName,C=a.itemCount,L=a.itemData,x=a.itemKey,y=x===void 0?rt:x,v=a.layout,R=a.outerElementType,_=a.outerTagName,Te=a.style,Ae=a.useIsScrolling,Ee=a.width,ee=this.state.isScrolling,$=u==="horizontal"||v==="horizontal",we=$?this._onScrollHorizontal:this._onScrollVertical,te=this._getRangeToRender(),pe=te[0],Le=te[1],ne=[];if(C>0)for(var z=pe;z<=Le;z++)ne.push(W.createElement(o,{data:L,key:y(z,L),index:z,isScrolling:Ae?ee:void 0,style:this._getItemStyle(z)}));var ae=s(this.props,this._instanceProps);return W.createElement(R||_||"div",{className:l,onScroll:we,ref:this._outerRefSetter,style:Me({position:"relative",height:h,width:Ee,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:u},Te)},W.createElement(d||S||"div",{children:ne,ref:b,style:{height:$?"100%":ae,pointerEvents:ee?"none":void 0,width:$?ae:"100%"}}))},E._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var a=this.props.itemCount;if(a>0){var o=this._getRangeToRender(),l=o[0],u=o[1],h=o[2],b=o[3];this._callOnItemsRendered(l,u,h,b)}}if(typeof this.props.onScroll=="function"){var d=this.state,S=d.scrollDirection,C=d.scrollOffset,L=d.scrollUpdateWasRequested;this._callOnScroll(S,C,L)}},E._getRangeToRender=function(){var a=this.props,o=a.itemCount,l=a.overscanCount,u=this.state,h=u.isScrolling,b=u.scrollDirection,d=u.scrollOffset;if(o===0)return[0,0,0,0];var S=f(this.props,d,this._instanceProps),C=m(this.props,S,d,this._instanceProps),L=!h||b==="backward"?Math.max(1,l):1,x=!h||b==="forward"?Math.max(1,l):1;return[Math.max(0,S-L),Math.max(0,Math.min(o-1,C+x)),S,C]},M}(W.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var dt=function(e,i){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,i.instance},mt=ut({getItemOffset:function(e,i){var s=e.itemSize;return i*s},getItemSize:function(e,i){var s=e.itemSize;return s},getEstimatedTotalSize:function(e){var i=e.itemCount,s=e.itemSize;return s*i},getOffsetForIndexAndAlignment:function(e,i,s,c,g,f){var m=e.direction,r=e.height,A=e.itemCount,p=e.itemSize,T=e.layout,M=e.width,E=m==="horizontal"||T==="horizontal",I=E?M:r,a=Math.max(0,A*p-I),o=Math.min(a,i*p),l=Math.max(0,i*p-I+p+f);switch(s==="smart"&&(c>=l-I&&c<=o+I?s="auto":s="center"),s){case"start":return o;case"end":return l;case"center":{var u=Math.round(l+(o-l)/2);return u<Math.ceil(I/2)?0:u>a+Math.floor(I/2)?a:u}case"auto":default:return c>=l&&c<=o?c:c<l?l:o}},getStartIndexForOffset:function(e,i){var s=e.itemCount,c=e.itemSize;return Math.max(0,Math.min(s-1,Math.floor(i/c)))},getStopIndexForStartIndex:function(e,i,s){var c=e.direction,g=e.height,f=e.itemCount,m=e.itemSize,r=e.layout,A=e.width,p=c==="horizontal"||r==="horizontal",T=i*m,M=p?A:g,E=Math.ceil((M+s-T)/m);return Math.max(0,Math.min(f-1,i+E-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function ht(t){if(!t.container)return null;const e=t.container.clientHeight,i=t.container.clientWidth;return n.createElement(mt,{height:e,itemCount:t.itemCount,itemSize:t.itemSize,width:i},t.children)}const gt=[new w.Asset("EURMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("MTLAP","GCNVDZIHGX473FEI7IXCUAEXUJ4BGCKEMHF36VYP5EMS7PX2QBLAMTLA"),new w.Asset("MTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("MTLRECT","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("BTCMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("SATSMTL","GACKTN5DAZGWXRWB2WLM6OPBDHAMT6SJNGLJZPQMEZBUR4JUGBX2UK7V"),new w.Asset("USDM","GDHDC4GBNPMENZAOBB4NCQ25TGZPDRK6ZGWUGSI22TVFATOLRPSUUSDM"),new w.Asset("USDC","GA5ZSEJYB37JRC5AVCIA5MOP4RHTM335X2KGX3IHOJAPP5RE34K4KZVN")],ft=[new w.Asset("USD","GCKFBEIYV2U22IO2BJ4KVJOIP7XPWQGQFKKWXR6DOSJBV7STMAQSMTGG"),new w.Asset("SRT","GCDNJUBQSX7AJWLJACMJ7I4BC3Z47BQUTMHEICZLE6MU4KQBRYG5JY6B")],St=q({clickable:{},icon:{[D.down(350)]:{minWidth:48}},logo:{[D.down(350)]:{width:36,height:36}},logoHidden:{visibility:"hidden"},badge:{top:4,right:4,boxShadow:"0 0 3px 1px black"},mainListItemText:{flex:"1 1 auto",whiteSpace:"nowrap"},mainListItemTextPrimaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:15},[D.down(350)]:{fontSize:13}},mainListItemTextSecondaryTypography:{overflow:"hidden",textOverflow:"ellipsis",[D.down(400)]:{fontSize:14},[D.down(350)]:{fontSize:12}},balanceListItemText:{flex:"1 0 auto",marginLeft:8,textAlign:"right"},balanceText:{fontSize:"140%",[D.down(350)]:{fontSize:"120%"}},actions:{flex:"0 0 auto",marginLeft:4,marginRight:-16,width:48},visibilityIcon:{color:"rgba(0, 0, 0, 0.54)","&.favorite":{color:"#FFD700"},"&.hidden":{color:"rgba(0, 0, 0, 0.38)"}},visibilityIconContainer:{marginRight:8,display:"flex",alignItems:"center"}});function yt(t){const e=St(),i=`${t.className||""} ${t.onClick?e.clickable:""}`,s=n.useMemo(()=>De(t.balance),[t.balance]),c=Re(s,t.testnet),{t:g}=k(),f=n.useMemo(()=>t.hideBalance?null:n.createElement($e,{assetCode:"",balance:t.balance.balance,showInfinity:t.isOwnAsset}),[t.balance.balance,t.hideBalance]);if(t.balance.asset_type==="native")return n.createElement(G,{button:!!t.onClick,className:i,onClick:t.onClick,style:t.style},n.createElement(H,{className:e.icon},n.createElement(le,{asset:s,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,testnet:t.testnet})),n.createElement(O,{classes:{root:e.mainListItemText,primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:t.spendableBalance?g("account.balance-details.item.spendable-balance.primary"):"Stellar Lumens (XLM)",secondary:t.spendableBalance?void 0:"stellar.org"}),n.createElement(O,{classes:{root:e.balanceListItemText,primary:e.balanceText},primary:f}));const m=c&&c.name||t.balance.asset_code,r=m!==t.balance.asset_code?`${m} (${t.balance.asset_code})`:t.balance.asset_code;return n.createElement(G,{button:!!t.onClick,className:i,onClick:t.onClick,style:t.style},t.isEditMode&&t.accountId&&n.createElement(H,{className:e.icon,style:{minWidth:"30px",marginRight:"8px"}},n.createElement(at,{accountId:t.accountId,asset:s})),n.createElement(H,{className:e.icon},n.createElement(Je,{badgeContent:t.badgeCount,classes:{badge:e.badge},color:"primary"},n.createElement(le,{asset:s,className:`${e.logo} ${t.hideLogo?e.logoHidden:""}`,dark:!0,testnet:t.testnet}))),n.createElement(O,{className:e.mainListItemText,classes:{primary:e.mainListItemTextPrimaryTypography,secondary:e.mainListItemTextSecondaryTypography},primary:r,secondary:n.createElement(Ie,{publicKey:t.balance.asset_issuer,testnet:t.testnet})}),n.createElement(O,{className:e.balanceListItemText,primary:f,primaryTypographyProps:{className:e.balanceText}}))}const N=n.memo(yt);function vt(t){const[e,i]=n.useState(""),[s,c]=n.useState(""),[g,f]=n.useState(""),m=Be("(max-width:450px)"),{t:r}=k(),A=()=>t.createAddAssetTransaction(new w.Asset(e,s),{limit:g||void 0}),p=()=>t.sendTransaction(A);return n.createElement(Y,{top:n.createElement(j,{hideBackButton:!0,onBack:t.onClose,title:r("account-settings.custom-trustline.title")})},n.createElement("form",{noValidate:!0,style:{display:"block",width:"100%"}},n.createElement(J,{label:r("account-settings.custom-trustline.textfield.code.label"),placeholder:"EURT, USDT, BTC, ...",autoFocus:!0,margin:"dense",name:"asset-code",value:e,onChange:T=>i(T.target.value)}),n.createElement(J,{fullWidth:!0,label:r("account-settings.custom-trustline.textfield.issuer.label"),placeholder:r("account-settings.custom-trustline.textfield.issuer.placeholder"),margin:"dense",name:"asset-issuer",value:s,onChange:T=>c(T.target.value)}),n.createElement(J,{inputProps:{pattern:"^[0-9]*(.[0-9]+)?$",inputMode:"decimal"},fullWidth:!0,label:r("account-settings.custom-trustline.textfield.limit.label"),placeholder:r("account-settings.custom-trustline.textfield.limit.placeholder"),margin:"dense",name:"trust-limit",value:g,type:"number",onChange:T=>f(T.target.value)}),n.createElement(Oe,{preventMobileActionsBox:!0},n.createElement(ie,{onClick:t.onClose},r("account-settings.custom-trustline.action.cancel")),n.createElement(ie,{icon:n.createElement(He,null),loading:t.txCreationPending,onClick:p,type:"primary"},r(m?"account-settings.custom-trustline.action.trust.short":"account-settings.custom-trustline.action.trust.long")))))}const bt=n.memo(vt);function It(t,e){return e=e.toLowerCase(),t.code.toLowerCase().startsWith(e)||t.name.toLowerCase().startsWith(e)}function Ct(t,e){return e=e.toLowerCase(),t.name.toLowerCase().startsWith(e)}function Ce(t){return{asset_code:t.getCode(),asset_issuer:t.getIssuer(),asset_type:t.getAssetType(),balance:"0",is_authorized:!0,is_authorized_to_maintain_liabilities:!0,last_modified_ledger:0,limit:"0",buying_liabilities:"0",selling_liabilities:"0",is_clawback_enabled:!1}}function Tt(t,e){const i={};for(const s of t){const c=e(s),g=i[c];g?g.push(s):i[c]=[s]}return i}const At=n.memo(function(e){return n.createElement(n.Fragment,null,e.assets.map(i=>n.createElement(N,{key:P(i),balance:Ce(i),hideBalance:!0,onClick:()=>e.onOpenAssetDetails(i),testnet:e.testnet})))}),U=73,ge=q({assetItem:{borderRadius:"0 !important",height:U},issuerItem:{background:"white",borderRadius:8,height:U},noResultItem:{background:"white",borderRadius:8,height:U}});function Et(t,e,i){const s=[];for(const f of Object.keys(e))s.push({type:"issuer",issuer:f}),s.push(...e[f].map(m=>({type:"asset",issuer:f,record:m})));function c(f){const m=ge(),r=s[f.index],{t:A}=k();return n.createElement("div",{style:f.style},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},r.type==="issuer"?n.createElement(G,{key:r.issuer,className:m.issuerItem},n.createElement(O,{primary:r.issuer==="native"?"stellar.org":n.createElement(Ie,{publicKey:r.issuer,testnet:t.testnet}),secondary:e[r.issuer].length===1?A("account.add-asset.item.issuer.secondary.one-asset"):A("account.add-asset.item.issuer.secondary.more-than-one-asset",{amount:e[r.issuer].length}),secondaryTypographyProps:{style:{overflow:"hidden",textOverflow:"ellipsis"}}})):null,r.type==="asset"?n.createElement(N,{balance:Ce(oe(r.record)),className:m.assetItem,hideBalance:!0,onClick:()=>i(oe(r.record)),style:{paddingLeft:32},testnet:t.testnet}):null))}function g(){const f=ge(),{t:m}=k();return n.createElement(G,{key:0,className:f.noResultItem},n.createElement(O,{primary:m("account.add-asset.item.no-result.primary"),secondary:m("account.add-asset.item.no-result.secondary")}))}return s.length>0?(c.count=s.length,c):(g.count=1,g)}const wt=q({grow:{flexGrow:1},list:{marginTop:16,padding:0},searchField:{background:"white",flexShrink:0,flexGrow:0,marginBottom:16},searchFieldInput:{fontSize:16,paddingTop:14,paddingBottom:14}}),pt=n.memo(function(e){const i=e.account.testnet?ft:gt,s=wt(),c=n.useRef(null),g=Xe(e.account.testnet),f=fe(),{t:m}=k(),r=Qe(e.account.testnet),[A,p]=n.useState(!1),[T,M]=n.useState(""),[E,I]=n.useState(!1),a=n.useCallback(y=>f.history.push(F(e.account.id,P(y))),[f.history,e.account.id]),o=()=>p(!0),l=()=>p(!1),u=async(y,v={})=>{const R=[w.Operation.changeTrust({asset:y,limit:v.limit,withMuxing:!0})];return qe(R,{accountData:e.accountData,horizon:e.horizon,walletAccount:e.account})},h=async y=>{try{I(!0);const v=await y();I(!1),await e.sendTransaction(v)}catch(v){I(!1),ze(v)}},b=y=>e.accountData.balances.some(v=>v.asset_code===y.code&&v.asset_issuer===y.issuer),d=n.useCallback((y,v)=>{const R=v.toLowerCase(),_=r.lookup(y);return _?_.domain.toLowerCase().includes(R)||_.name.toLowerCase().includes(R):!1},[r]),S=i.filter(y=>!b(y)),C=n.useCallback(y=>{M(y.target.value)},[]),L=n.useMemo(()=>{const y=g.filter(v=>It(v,T)||Ct(v.issuer_detail,T)||d(v.issuer,T));return Tt(y,v=>v.issuer)},[g,T,d]),x=n.useMemo(()=>Et(e.account,L,a),[e.account,L,a]);return n.createElement(Y,{excessWidth:24,top:n.createElement(j,{onBack:e.onClose,title:m("account.add-asset.title")})},n.createElement(ke,{grow:!0,margin:"16px 0 0"},n.createElement(Se,{autoFocus:!0,className:s.searchField,inputProps:{className:s.searchFieldInput},onChange:C,value:T,placeholder:m("account.add-asset.search-field.placeholder")}),n.createElement(V,{className:s.list},n.createElement(ye,{onClick:o},n.createElement(ve,null),"  ",m("account.add-asset.button.add-custom-asset.label"))),n.createElement(n.Suspense,{fallback:n.createElement(K,null)},T?n.createElement("ul",{className:`${s.list} ${s.grow}`,ref:c},n.createElement(ht,{container:c.current,itemCount:x.count,itemSize:U},x)):n.createElement(V,{className:`${s.list} ${s.grow}`},n.createElement(At,{assets:S,onOpenAssetDetails:a,testnet:e.account.testnet})))),n.createElement(be,{open:A,onClose:l,TransitionComponent:_e},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},n.createElement(bt,{account:e.account,accountData:e.accountData,createAddAssetTransaction:u,horizon:e.horizon,onClose:l,sendTransaction:h,txCreationPending:E}))))});function Lt(t){return n.createElement(Ze,{account:t.account,onSubmissionCompleted:t.onClose},({horizon:e,sendTransaction:i})=>n.createElement(pt,{...t,horizon:e,sendTransaction:i}))}const xt=n.memo(Lt),Mt=n.memo(function(e){const i=n.useMemo(()=>{if(!e.searchFieldValue.trim())return e.assetBalances;const s=e.searchFieldValue.toLowerCase().trim();return e.assetBalances.filter(({asset:c})=>!!c.code.toLowerCase().includes(s))},[e.assetBalances,e.searchFieldValue]);return n.createElement(n.Fragment,null,i.map(({asset:s,balance:c})=>{var m;const g=e.openOffers.filter(r=>r.buying.asset_code===s.code&&r.buying.asset_issuer===s.issuer||r.selling.asset_code===s.code&&r.selling.asset_issuer===s.issuer),f=e.olderOffersAvailable&&g.length>=10?"10+":g.length;return(m=e.assetSettings[P(s)])==null||m.visibility,n.createElement(N,{key:P(s),badgeCount:f,balance:c,onClick:()=>e.onOpenAssetDetails(s),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet,isOwnAsset:e.account.accountID===s.getIssuer(),isEditMode:e.isEditMode})}))}),Dt=n.memo(function(e){return n.createElement(n.Fragment,null,n.createElement(N,{key:"XLM",balance:e.balance,onClick:()=>e.onOpenAssetDetails(w.Asset.native()),style:{paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},accountId:e.account.accountID,testnet:e.account.testnet}),n.createElement(N,{key:"XLM:spendable",balance:{...e.balance,balance:Ve(e.balance.balance).eq(0)?"0":Ge(Ke(e.accountData),e.balance).toString()},hideLogo:!0,onClick:()=>e.onOpenAssetDetails(w.Asset.native()),spendableBalance:!0,style:{marginTop:-8,paddingLeft:e.hpadding,paddingRight:e.hpadding,marginLeft:e.hmargin,marginRight:e.hmargin},testnet:e.account.testnet}))});function Rt(t){const e=Pe(t.account.accountID,t.account.testnet),{offers:i,olderOffersAvailable:s}=Ne(t.account.accountID,t.account.testnet),c=We(),g=fe(),{t:f}=k(),[m,r]=n.useState(!1),{assetSettings:A}=Ye(t.account.accountID),[p,T]=n.useState([]);n.useEffect(()=>{if(m)return;const y=je(e.balances,A).filter(v=>v.asset_type!=="native").map(v=>({asset:new w.Asset(v.asset_code,v.asset_issuer),balance:v}));T(y)},[e.balances,A,m]);const M=n.useCallback(()=>g.history.push(ce(t.account.id)),[t.account.id,g.history]),E=n.useCallback(()=>g.history.push(et(t.account.id)),[t.account.id,g.history]),I=Z(g.location.pathname,ce(t.account.id)),a=Z(g.location.pathname,F("*","*"))&&!Z(g.location.pathname,F("*","manage")),o=y=>g.history.push(F(t.account.id,P(y))),l=()=>{r(!m)},u=e.balances.find(y=>y.asset_type==="native"),h=c?0:8,b=16,d=0,[S,C]=n.useState(""),L=n.useCallback(y=>{C(y.target.value)},[]),x=w.Asset.native().code.toLowerCase().includes(S.toLocaleLowerCase());return n.createElement(Y,{excessWidth:12,top:n.createElement(j,{onBack:t.onClose,title:t.account.name,actions:n.createElement(Fe,{onClick:l,color:m?"primary":"default"},n.createElement(tt,null))})},n.createElement(Se,{autoFocus:!0,onChange:L,value:S,placeholder:f("account.balance-details.search-field.placeholder")}),n.createElement(V,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px"}},n.createElement(ye,{gutterBottom:!0,onClick:M,style:{padding:`0 ${b}px`,marginLeft:d,marginRight:d}},n.createElement(ve,null),"  ",f("account.balance-details.button.add-asset.label")),n.createElement(Mt,{account:t.account,assetBalances:p,hmargin:d,hpadding:b,onOpenAssetDetails:o,openOffers:i,olderOffersAvailable:s,isEditMode:m,assetSettings:A,searchFieldValue:S})),n.createElement(nt,{style:{margin:"16px 0"}}),n.createElement(V,{style:{paddingLeft:h,paddingRight:h,margin:"0 -8px 8px"}},u&&x?n.createElement(Dt,{account:t.account,accountData:e,balance:u,hmargin:d,hpadding:b,onOpenAssetDetails:o}):null),n.createElement(be,{fullScreen:!0,open:I||a,onClose:E,TransitionComponent:Ue},n.createElement(n.Suspense,{fallback:n.createElement(K,null)},n.createElement(xt,{account:t.account,accountData:e,hpadding:h,itemHPadding:b,onClose:E}))))}const _t=n.memo(Rt);export{_t as default};
//# sourceMappingURL=BalanceDetailsDialog-CjQWzKUD.js.map
